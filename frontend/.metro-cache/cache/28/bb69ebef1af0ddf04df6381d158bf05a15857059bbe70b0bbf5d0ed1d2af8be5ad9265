{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../services/notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":178},"end":{"line":5,"column":78,"index":256}}],"key":"PilFUkBfYpg1cVGLNRiWDw/oULQ=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":257},"end":{"line":6,"column":34,"index":291}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"useAuthStore\",{enumerable:!0,get:function(){return I}});var t=r(d[0]),o=e(r(d[1]));r(d[2]);var s=r(d[3]),n=e(r(d[4]));const c='@reusapp_user',l='@reusapp_token',u='@reusapp_isAuthenticated',h='@reusapp_hasConsent',f=async e=>{try{if('undefined'!=typeof localStorage){const t=localStorage.getItem(e);return console.log(`\\ud83d\\udcd6 [WEB] getItem(${e}):`,t?'found':'null'),t}const t=await o.default.getItem(e);return console.log(`\\ud83d\\udcd6 [NATIVE] getItem(${e}):`,t?'found':'null'),t}catch(t){return console.error(`\\u274c Error getItem(${e}):`,t),null}},y=async(e,t)=>{try{if('undefined'!=typeof localStorage)return localStorage.setItem(e,t),void console.log(`\\ud83d\\udcbe [WEB] setItem(${e}): saved`);await o.default.setItem(e,t),console.log(`\\ud83d\\udcbe [NATIVE] setItem(${e}): saved`)}catch(t){console.error(`\\u274c Error setItem(${e}):`,t)}},p=async e=>{try{if('undefined'!=typeof localStorage)return localStorage.removeItem(e),void console.log(`\\ud83d\\uddd1\\ufe0f [WEB] removeItem(${e}): removed`);await o.default.removeItem(e),console.log(`\\ud83d\\uddd1\\ufe0f [NATIVE] removeItem(${e}): removed`)}catch(t){console.error(`\\u274c Error removeItem(${e}):`,t)}},I=(0,t.create)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!0,hasConsent:!1,setUser:t=>e({user:t,isAuthenticated:!!t}),setToken:t=>e({token:t}),setConsent:async t=>{try{await y(h,t?'true':'false'),console.log('\\u2705 Consent saved:',t),e({hasConsent:t})}catch(e){console.error('\\u274c Error saving consent:',e)}},login:async(t,o)=>{try{console.log('\\ud83d\\udd10 Guardant sessi\\xf3 per a:',t.email),await y(c,JSON.stringify(t)),await y(l,o),await y(u,'true'),console.log('\\u2705 Sessi\\xf3 guardada correctament'),e({user:t,token:o,isAuthenticated:!0});try{const e=await(0,s.registerForPushNotificationsAsync)();e&&(await n.default.put('/users/push-token',{push_token:e},{headers:{Authorization:o}}),console.log('Push token registered successfully'))}catch(e){console.error('Error registering push token:',e)}}catch(e){console.error('\\u274c Error guardant sessi\\xf3:',e)}},logout:async()=>{try{console.log('\\ud83d\\udeaa Tancant sessi\\xf3...'),await p(c),await p(l),await p(u),console.log('\\u2705 Sessi\\xf3 tancada correctament'),e({user:null,token:null,isAuthenticated:!1})}catch(e){console.error('\\u274c Error tancant sessi\\xf3:',e)}},loadStoredAuth:async()=>{try{console.log('\\ud83d\\udd0d Carregant sessi\\xf3 guardada...'),console.log('\\ud83d\\udcf1 Plataforma:',\"web\");const t=await f(c),o=await f(l),s=await f(u),n=await f(h);console.log('\\ud83d\\udce6 Dades trobades:',{hasUser:!!t,hasToken:!!o,isAuth:s,hasConsent:n});const y='true'===n;if(t&&o&&'true'===s){const s=JSON.parse(t);console.log('\\u2705 Sessi\\xf3 restaurada per a:',s.email),e({user:s,token:o,isAuthenticated:!0,hasConsent:y,isLoading:!1})}else console.log('\\u2139\\ufe0f No hi ha sessi\\xf3 guardada'),e({hasConsent:y,isLoading:!1})}catch(t){console.error('\\u274c Error carregant sessi\\xf3:',t),e({isLoading:!1})}}}))});","lineCount":1,"map":[[1,143,75,0,"Object"],[1,150,75,0,"defineProperty"],[1,165,75,0,"_e"],[1,168,75,0],[1,184,75,0,"enumerable"],[1,196,75,0],[1,198,75,0,"get"],[1,202,75,0],[1,220,75,0,"useAuthStore"],[1,221,75,0],[1,225,1,0],[1,229,1,0,"_zustand"],[1,231,1,0,"r"],[1,233,1,0,"d"],[1,235,1,0],[1,239,2,0,"AsyncStorage"],[1,241,2,0,"_interopDefault"],[1,243,2,0,"r"],[1,245,2,0,"d"],[1,247,2,0],[1,252,2,69,"r"],[1,254,2,69,"d"],[1,256,2,69],[1,260,5,0],[1,264,5,0,"_servicesNotifications"],[1,266,5,0,"r"],[1,268,5,0,"d"],[1,270,5,0],[1,274,6,0,"api"],[1,276,6,0,"_interopDefault"],[1,278,6,0,"r"],[1,280,6,0,"d"],[1,282,6,0],[1,287,9,0],[1,293,9,6,"STORAGE_KEYS"],[1,295,10,8],[1,311,9,6,"STORAGE_KEYS"],[1,313,11,9],[1,330,9,6,"STORAGE_KEYS"],[1,332,12,11],[1,359,9,6,"STORAGE_KEYS"],[1,361,13,11],[1,383,17,6,"storage"],[1,385,18,11,"async"],[1,395,19,4],[1,399,20,6],[1,402,20,59],[1,422,20,42,"localStorage"],[1,435,20,72],[1,436,21,8],[1,442,21,14,"value"],[1,444,21,22,"localStorage"],[1,457,21,35,"getItem"],[1,465,21,43,"key"],[1,468,23,8],[1,475,22,8,"console"],[1,483,22,16,"log"],[1,487,22,20],[1,517,22,40,"key"],[1,523,22,49,"value"],[1,525,22,57],[1,533,22,67],[1,541,23,15,"value"],[1,542,24,6],[1,543,25,6],[1,549,25,12,"value"],[1,557,25,26,"AsyncStorage"],[1,559,25,38,"default"],[1,567,25,39,"getItem"],[1,575,25,47,"key"],[1,578,27,6],[1,585,26,6,"console"],[1,593,26,14,"log"],[1,597,26,18],[1,630,26,41,"key"],[1,636,26,50,"value"],[1,638,26,58],[1,646,26,68],[1,654,27,13,"value"],[1,655,28,4],[1,656,28,6],[1,662,28,13,"error"],[1,665,30,6],[1,672,29,6,"console"],[1,680,29,14,"error"],[1,686,29,20],[1,710,29,39,"key"],[1,716,29,48,"error"],[1,719,30,13],[1,723,31,4],[1,726,17,6,"storage"],[1,728,33,11,"async"],[1,734,33,18,"key"],[1,736,33,31,"value"],[1,741,34,4],[1,745,35,6],[1,748,35,59],[1,768,35,42,"localStorage"],[1,781,38,8],[1,788,36,8,"localStorage"],[1,801,36,21,"setItem"],[1,809,36,29,"key"],[1,811,36,34,"value"],[1,819,37,8,"console"],[1,827,37,16,"log"],[1,831,37,20],[1,861,37,40,"key"],[1,880,40,12,"AsyncStorage"],[1,882,40,24,"default"],[1,890,40,25,"setItem"],[1,898,40,33,"key"],[1,900,40,38,"value"],[1,903,41,6,"console"],[1,911,41,14,"log"],[1,915,41,18],[1,948,41,41,"key"],[1,960,42,4],[1,961,42,6],[1,967,42,13,"error"],[1,970,43,6,"console"],[1,978,43,14,"error"],[1,984,43,20],[1,1008,43,39,"key"],[1,1014,43,48,"error"],[1,1016,44,4],[1,1019,17,6,"storage"],[1,1021,46,14,"async"],[1,1031,47,4],[1,1035,48,6],[1,1038,48,59],[1,1058,48,42,"localStorage"],[1,1071,51,8],[1,1078,49,8,"localStorage"],[1,1091,49,21,"removeItem"],[1,1102,49,32,"key"],[1,1110,50,8,"console"],[1,1118,50,16,"log"],[1,1122,50,20],[1,1161,50,44,"key"],[1,1182,53,12,"AsyncStorage"],[1,1184,53,24,"default"],[1,1192,53,25,"removeItem"],[1,1203,53,36,"key"],[1,1206,54,6,"console"],[1,1214,54,14,"log"],[1,1218,54,18],[1,1260,54,45,"key"],[1,1274,55,4],[1,1275,55,6],[1,1281,55,13,"error"],[1,1284,56,6,"console"],[1,1292,56,14,"error"],[1,1298,56,20],[1,1325,56,42,"key"],[1,1331,56,51,"error"],[1,1333,57,4],[1,1336,75,13,"useAuthStore"],[1,1339,75,28],[1,1341,75,28,"create"],[1,1343,75,34,"create"],[1,1351,75,47,"set"],[1,1355,75,50],[1,1356,76,2,"user"],[1,1361,76,8],[1,1366,77,2,"token"],[1,1372,77,9],[1,1377,78,2,"isAuthenticated"],[1,1394,78,19],[1,1396,79,2,"isLoading"],[1,1407,79,13],[1,1409,80,2,"hasConsent"],[1,1421,80,14],[1,1423,82,2,"setUser"],[1,1431,82,12,"user"],[1,1434,82,21,"set"],[1,1436,82,25],[1,1437,82,27,"user"],[1,1444,82,33,"isAuthenticated"],[1,1462,82,52,"user"],[1,1466,84,2,"setToken"],[1,1475,84,13,"token"],[1,1478,84,23,"set"],[1,1480,84,27],[1,1481,84,29,"token"],[1,1491,86,2,"setConsent"],[1,1502,86,14,"async"],[1,1512,87,4],[1,1522,88,12,"storage"],[1,1524,88,28,"STORAGE_KEYS"],[1,1526,88,50,"hasConsent"],[1,1528,88,63],[1,1535,88,72],[1,1544,89,6,"console"],[1,1552,89,14,"log"],[1,1556,89,18],[1,1580,89,38,"hasConsent"],[1,1583,90,6,"set"],[1,1585,90,10],[1,1586,90,12,"hasConsent"],[1,1600,91,4],[1,1601,91,6],[1,1607,91,13,"error"],[1,1610,92,6,"console"],[1,1618,92,14,"error"],[1,1624,92,20],[1,1655,92,47,"error"],[1,1657,93,4],[1,1660,96,2,"login"],[1,1666,96,9,"async"],[1,1672,96,16,"user"],[1,1674,96,22,"token"],[1,1679,97,4],[1,1683,98,6,"console"],[1,1691,98,14,"log"],[1,1695,98,18],[1,1736,98,47,"user"],[1,1738,98,52,"email"],[1,1751,99,12,"storage"],[1,1753,99,28,"STORAGE_KEYS"],[1,1755,99,47,"JSON"],[1,1760,99,52,"stringify"],[1,1770,99,62,"user"],[1,1780,100,12,"storage"],[1,1782,100,28,"STORAGE_KEYS"],[1,1784,100,48,"token"],[1,1793,101,12,"storage"],[1,1795,101,28,"STORAGE_KEYS"],[1,1797,101,50],[1,1805,102,6,"console"],[1,1813,102,14,"log"],[1,1817,102,18],[1,1859,103,6,"set"],[1,1861,103,10],[1,1862,103,12,"user"],[1,1869,103,18,"token"],[1,1877,103,25,"isAuthenticated"],[1,1894,103,42],[1,1898,106,6],[1,1902,107,8],[1,1908,107,14,"pushToken"],[1,1916,107,32],[1,1918,107,32,"registerForPushNotificationsAsync"],[1,1920,107,65,"registerForPushNotificationsAsync"],[1,1957,108,12,"pushToken"],[1,1967,109,16,"api"],[1,1969,109,19,"default"],[1,1977,109,20,"put"],[1,1981,109,24],[1,2001,110,12],[1,2002,110,14,"push_token"],[1,2013,110,26,"pushToken"],[1,2016,111,12],[1,2017,111,14,"headers"],[1,2025,111,23],[1,2026,111,25,"Authorization"],[1,2040,111,40,"token"],[1,2045,113,10,"console"],[1,2053,113,18,"log"],[1,2057,113,22],[1,2095,115,6],[1,2096,115,8],[1,2102,115,15,"error"],[1,2105,116,8,"console"],[1,2113,116,16,"error"],[1,2119,116,22],[1,2151,116,55,"error"],[1,2153,117,6],[1,2154,118,4],[1,2155,118,6],[1,2161,118,13,"error"],[1,2164,119,6,"console"],[1,2172,119,14,"error"],[1,2178,119,20],[1,2213,119,48,"error"],[1,2215,120,4],[1,2218,123,2,"logout"],[1,2225,123,10,"async"],[1,2235,124,4],[1,2239,125,6,"console"],[1,2247,125,14,"log"],[1,2251,125,18],[1,2294,126,12,"storage"],[1,2296,126,31,"STORAGE_KEYS"],[1,2305,127,12,"storage"],[1,2307,127,31,"STORAGE_KEYS"],[1,2316,128,12,"storage"],[1,2318,128,31,"STORAGE_KEYS"],[1,2321,129,6,"console"],[1,2329,129,14,"log"],[1,2333,129,18],[1,2374,130,6,"set"],[1,2376,130,10],[1,2377,130,12,"user"],[1,2382,130,18],[1,2387,130,24,"token"],[1,2393,130,31],[1,2398,130,37,"isAuthenticated"],[1,2415,130,54],[1,2418,131,4],[1,2419,131,6],[1,2425,131,13,"error"],[1,2428,132,6,"console"],[1,2436,132,14,"error"],[1,2442,132,20],[1,2476,132,47,"error"],[1,2478,133,4],[1,2481,136,2,"loadStoredAuth"],[1,2496,136,18,"async"],[1,2506,137,4],[1,2510,138,6,"console"],[1,2518,138,14,"log"],[1,2522,138,18],[1,2570,139,6,"console"],[1,2578,139,14,"log"],[1,2582,139,18],[1,2609,139,34],[1,2616,141,6],[1,2622,141,12,"userStr"],[1,2630,141,28,"storage"],[1,2632,141,44,"STORAGE_KEYS"],[1,2635,142,12,"token"],[1,2643,142,26,"storage"],[1,2645,142,42,"STORAGE_KEYS"],[1,2648,143,12,"isAuth"],[1,2656,143,27,"storage"],[1,2658,143,43,"STORAGE_KEYS"],[1,2661,144,12,"consentStr"],[1,2669,144,31,"storage"],[1,2671,144,47,"STORAGE_KEYS"],[1,2674,146,6,"console"],[1,2682,146,14,"log"],[1,2686,146,18],[1,2717,146,40],[1,2718,147,8,"hasUser"],[1,2728,147,19,"userStr"],[1,2730,148,8,"hasToken"],[1,2741,148,20,"token"],[1,2743,149,8,"isAuth"],[1,2752,150,8,"hasConsent"],[1,2763,150,20,"consentStr"],[1,2767,153,6],[1,2773,153,12,"hasConsent"],[1,2775,153,40],[1,2784,153,25,"consentStr"],[1,2786,155,6],[1,2789,155,10,"userStr"],[1,2792,155,21,"token"],[1,2795,155,41],[1,2804,155,30,"isAuth"],[1,2806,155,49],[1,2807,156,8],[1,2813,156,14,"user"],[1,2815,156,21,"JSON"],[1,2820,156,26,"parse"],[1,2826,156,32,"userStr"],[1,2829,157,8,"console"],[1,2837,157,16,"log"],[1,2841,157,20],[1,2878,157,50,"user"],[1,2880,157,55,"email"],[1,2887,158,8,"set"],[1,2889,158,12],[1,2890,158,14,"user"],[1,2897,158,20,"token"],[1,2905,158,27,"isAuthenticated"],[1,2922,158,44],[1,2924,158,50,"hasConsent"],[1,2937,158,62,"isLoading"],[1,2948,158,73],[1,2951,159,6],[1,2957,160,8,"console"],[1,2965,160,16,"log"],[1,2969,160,20],[1,3013,161,8,"set"],[1,3015,161,12],[1,3016,161,14,"hasConsent"],[1,3029,161,26,"isLoading"],[1,3040,161,37],[1,3043,163,4],[1,3044,163,6],[1,3050,163,13,"error"],[1,3053,164,6,"console"],[1,3061,164,14,"error"],[1,3067,164,20],[1,3103,164,49,"error"],[1,3106,165,6,"set"],[1,3108,165,10],[1,3109,165,12,"isLoading"],[1,3120,165,23],[1,3123,166,4],[1,3128,168,4],[1,3131]],"functionMap":{"names":["<global>","storage.getItem","storage.setItem","storage.removeItem","create$argument_0","setUser","setToken","setConsent","login","logout","loadStoredAuth"],"mappings":"AAA;WCiB;GDc;WEC;GFY;cGC;GHY;8CIiB;WCO,gDD;YEE,yBF;cGE;GHQ;SIE;GJyB;UKE;GLW;kBME;GN+B;EJC"},"hasCjsExports":false},"type":"js/module"}]}