{"dependencies":[{"name":"expo-image-picker","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"XQFgv2+WadF9xV+S67CI6D8lClA=","exportNames":["*"],"imports":1}},{"name":"expo-image-manipulator","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":59,"index":109}}],"key":"jSCgza62Lmd+veZCOu0xCYv/BW8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"pickAndCropImage\", {\n    enumerable: true,\n    get: function () {\n      return pickAndCropImage;\n    }\n  });\n  Object.defineProperty(exports, \"takePictureAndCrop\", {\n    enumerable: true,\n    get: function () {\n      return takePictureAndCrop;\n    }\n  });\n  var _expoImagePicker = require(_dependencyMap[0], \"expo-image-picker\");\n  var ImagePicker = _interopNamespace(_expoImagePicker);\n  var _expoImageManipulator = require(_dependencyMap[1], \"expo-image-manipulator\");\n  var ImageManipulator = _interopNamespace(_expoImageManipulator);\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[2], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  /**\n   * Selecciona una imatge de la galeria i la retalla en format quadrat\n   * @param aspectRatio - Proporció de l'aspecte (per defecte [1, 1] per quadrat)\n   * @returns Promise amb la imatge retallada en base64 o null\n   */\n  const pickAndCropImage = async (aspectRatio = [1, 1]) => {\n    try {\n      // Demanar permisos\n      const {\n        status\n      } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.default.alert('Permisos necessaris', 'Necessitem permisos per accedir a les teves fotos');\n        return null;\n      }\n\n      // Seleccionar imatge\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: aspectRatio,\n        quality: 0.8\n      });\n      if (result.canceled) {\n        return null;\n      }\n      const selectedImage = result.assets[0];\n\n      // Obtenir les dimensions de la imatge\n      const {\n        width,\n        height\n      } = selectedImage;\n\n      // Calcular el tamany del quadrat (la dimensió més petita)\n      const size = Math.min(width, height);\n\n      // Calcular l'origen per centrar el retall\n      const originX = (width - size) / 2;\n      const originY = (height - size) / 2;\n\n      // Retallar la imatge en format quadrat\n      const manipulatedImage = await ImageManipulator.manipulateAsync(selectedImage.uri, [{\n        crop: {\n          originX,\n          originY,\n          width: size,\n          height: size\n        }\n      },\n      // Redimensionar a 600x600 per optimitzar (més lleuger)\n      {\n        resize: {\n          width: 600,\n          height: 600\n        }\n      }], {\n        compress: 0.6,\n        format: ImageManipulator.SaveFormat.JPEG,\n        base64: true\n      });\n      if (manipulatedImage.base64) {\n        return `data:image/jpeg;base64,${manipulatedImage.base64}`;\n      }\n      return null;\n    } catch (error) {\n      console.error('Error seleccionant i retallant imatge:', error);\n      Alert.default.alert('Error', 'No s\\'ha pogut processar la imatge');\n      return null;\n    }\n  };\n\n  /**\n   * Pren una foto amb la càmera i la retalla en format quadrat\n   * @param aspectRatio - Proporció de l'aspecte (per defecte [1, 1] per quadrat)\n   * @returns Promise amb la imatge retallada en base64 o null\n   */\n  const takePictureAndCrop = async (aspectRatio = [1, 1]) => {\n    try {\n      // Demanar permisos de càmera\n      const {\n        status\n      } = await ImagePicker.requestCameraPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.default.alert('Permisos necessaris', 'Necessitem permisos per accedir a la càmera');\n        return null;\n      }\n\n      // Prendre foto\n      const result = await ImagePicker.launchCameraAsync({\n        allowsEditing: true,\n        aspect: aspectRatio,\n        quality: 0.8\n      });\n      if (result.canceled) {\n        return null;\n      }\n      const selectedImage = result.assets[0];\n\n      // Obtenir les dimensions de la imatge\n      const {\n        width,\n        height\n      } = selectedImage;\n\n      // Calcular el tamany del quadrat (la dimensió més petita)\n      const size = Math.min(width, height);\n\n      // Calcular l'origen per centrar el retall\n      const originX = (width - size) / 2;\n      const originY = (height - size) / 2;\n\n      // Retallar la imatge en format quadrat\n      const manipulatedImage = await ImageManipulator.manipulateAsync(selectedImage.uri, [{\n        crop: {\n          originX,\n          originY,\n          width: size,\n          height: size\n        }\n      },\n      // Redimensionar a 600x600 per optimitzar (més lleuger)\n      {\n        resize: {\n          width: 600,\n          height: 600\n        }\n      }], {\n        compress: 0.6,\n        format: ImageManipulator.SaveFormat.JPEG,\n        base64: true\n      });\n      if (manipulatedImage.base64) {\n        return `data:image/jpeg;base64,${manipulatedImage.base64}`;\n      }\n      return null;\n    } catch (error) {\n      console.error('Error prenent i retallant foto:', error);\n      Alert.default.alert('Error', 'No s\\'ha pogut processar la foto');\n      return null;\n    }\n  };\n});","lineCount":187,"map":[[27,2,10,0,"Object"],[27,8,10,0],[27,9,10,0,"defineProperty"],[27,23,10,0],[27,24,10,0,"exports"],[27,31,10,0],[28,4,10,0,"enumerable"],[28,14,10,0],[29,4,10,0,"get"],[29,7,10,0],[29,18,10,0,"get"],[29,19,10,0],[30,6,10,0],[30,13,10,0,"pickAndCropImage"],[30,29,10,0],[31,4,10,0],[32,2,10,0],[33,2,93,0,"Object"],[33,8,93,0],[33,9,93,0,"defineProperty"],[33,23,93,0],[33,24,93,0,"exports"],[33,31,93,0],[34,4,93,0,"enumerable"],[34,14,93,0],[35,4,93,0,"get"],[35,7,93,0],[35,18,93,0,"get"],[35,19,93,0],[36,6,93,0],[36,13,93,0,"takePictureAndCrop"],[36,31,93,0],[37,4,93,0],[38,2,93,0],[39,2,1,0],[39,6,1,0,"_expoImagePicker"],[39,22,1,0],[39,25,1,0,"require"],[39,32,1,0],[39,33,1,0,"_dependencyMap"],[39,47,1,0],[40,2,1,0],[40,6,1,0,"ImagePicker"],[40,17,1,0],[40,20,1,0,"_interopNamespace"],[40,37,1,0],[40,38,1,0,"_expoImagePicker"],[40,54,1,0],[41,2,2,0],[41,6,2,0,"_expoImageManipulator"],[41,27,2,0],[41,30,2,0,"require"],[41,37,2,0],[41,38,2,0,"_dependencyMap"],[41,52,2,0],[42,2,2,0],[42,6,2,0,"ImageManipulator"],[42,22,2,0],[42,25,2,0,"_interopNamespace"],[42,42,2,0],[42,43,2,0,"_expoImageManipulator"],[42,64,2,0],[43,2,2,59],[43,6,2,59,"_reactNativeWebDistExportsAlert"],[43,37,2,59],[43,40,2,59,"require"],[43,47,2,59],[43,48,2,59,"_dependencyMap"],[43,62,2,59],[44,2,2,59],[44,6,2,59,"Alert"],[44,11,2,59],[44,14,2,59,"_interopDefault"],[44,29,2,59],[44,30,2,59,"_reactNativeWebDistExportsAlert"],[44,61,2,59],[45,2,5,0],[46,0,6,0],[47,0,7,0],[48,0,8,0],[49,0,9,0],[50,2,10,7],[50,8,10,13,"pickAndCropImage"],[50,24,10,29],[50,27,10,32],[50,33,10,32,"pickAndCropImage"],[50,34,11,2,"aspectRatio"],[50,45,11,31],[50,48,11,34],[50,49,11,35],[50,50,11,36],[50,52,11,38],[50,53,11,39],[50,54,11,40],[50,59,12,29],[51,4,13,2],[51,8,13,6],[52,6,14,4],[53,6,15,4],[53,12,15,10],[54,8,15,12,"status"],[55,6,15,19],[55,7,15,20],[55,10,15,23],[55,16,15,29,"ImagePicker"],[55,27,15,40],[55,28,15,41,"requestMediaLibraryPermissionsAsync"],[55,63,15,76],[55,64,15,77],[55,65,15,78],[56,6,17,4],[56,10,17,8,"status"],[56,16,17,14],[56,21,17,19],[56,30,17,28],[56,32,17,30],[57,8,18,6,"Alert"],[57,13,18,11],[57,14,18,11,"default"],[57,21,18,11],[57,22,18,12,"alert"],[57,27,18,17],[57,28,19,8],[57,49,19,29],[57,51,20,8],[57,102,21,6],[57,103,21,7],[58,8,22,6],[58,15,22,13],[58,19,22,17],[59,6,23,4],[61,6,25,4],[62,6,26,4],[62,12,26,10,"result"],[62,18,26,16],[62,21,26,19],[62,27,26,25,"ImagePicker"],[62,38,26,36],[62,39,26,37,"launchImageLibraryAsync"],[62,62,26,60],[62,63,26,61],[63,8,27,6,"mediaTypes"],[63,18,27,16],[63,20,27,18,"ImagePicker"],[63,31,27,29],[63,32,27,30,"MediaTypeOptions"],[63,48,27,46],[63,49,27,47,"Images"],[63,55,27,53],[64,8,28,6,"allowsEditing"],[64,21,28,19],[64,23,28,21],[64,27,28,25],[65,8,29,6,"aspect"],[65,14,29,12],[65,16,29,14,"aspectRatio"],[65,27,29,25],[66,8,30,6,"quality"],[66,15,30,13],[66,17,30,15],[67,6,31,4],[67,7,31,5],[67,8,31,6],[68,6,33,4],[68,10,33,8,"result"],[68,16,33,14],[68,17,33,15,"canceled"],[68,25,33,23],[68,27,33,25],[69,8,34,6],[69,15,34,13],[69,19,34,17],[70,6,35,4],[71,6,37,4],[71,12,37,10,"selectedImage"],[71,25,37,23],[71,28,37,26,"result"],[71,34,37,32],[71,35,37,33,"assets"],[71,41,37,39],[71,42,37,40],[71,43,37,41],[71,44,37,42],[73,6,39,4],[74,6,40,4],[74,12,40,10],[75,8,40,12,"width"],[75,13,40,17],[76,8,40,19,"height"],[77,6,40,26],[77,7,40,27],[77,10,40,30,"selectedImage"],[77,23,40,43],[79,6,42,4],[80,6,43,4],[80,12,43,10,"size"],[80,16,43,14],[80,19,43,17,"Math"],[80,23,43,21],[80,24,43,22,"min"],[80,27,43,25],[80,28,43,26,"width"],[80,33,43,31],[80,35,43,33,"height"],[80,41,43,39],[80,42,43,40],[82,6,45,4],[83,6,46,4],[83,12,46,10,"originX"],[83,19,46,17],[83,22,46,20],[83,23,46,21,"width"],[83,28,46,26],[83,31,46,29,"size"],[83,35,46,33],[83,39,46,37],[83,40,46,38],[84,6,47,4],[84,12,47,10,"originY"],[84,19,47,17],[84,22,47,20],[84,23,47,21,"height"],[84,29,47,27],[84,32,47,30,"size"],[84,36,47,34],[84,40,47,38],[84,41,47,39],[86,6,49,4],[87,6,50,4],[87,12,50,10,"manipulatedImage"],[87,28,50,26],[87,31,50,29],[87,37,50,35,"ImageManipulator"],[87,53,50,51],[87,54,50,52,"manipulateAsync"],[87,69,50,67],[87,70,51,6,"selectedImage"],[87,83,51,19],[87,84,51,20,"uri"],[87,87,51,23],[87,89,52,6],[87,90,53,8],[88,8,54,10,"crop"],[88,12,54,14],[88,14,54,16],[89,10,55,12,"originX"],[89,17,55,19],[90,10,56,12,"originY"],[90,17,56,19],[91,10,57,12,"width"],[91,15,57,17],[91,17,57,19,"size"],[91,21,57,23],[92,10,58,12,"height"],[92,16,58,18],[92,18,58,20,"size"],[93,8,59,10],[94,6,60,8],[94,7,60,9],[95,6,61,8],[96,6,62,8],[97,8,63,10,"resize"],[97,14,63,16],[97,16,63,18],[98,10,64,12,"width"],[98,15,64,17],[98,17,64,19],[98,20,64,22],[99,10,65,12,"height"],[99,16,65,18],[99,18,65,20],[100,8,66,10],[101,6,67,8],[101,7,67,9],[101,8,68,7],[101,10,69,6],[102,8,70,8,"compress"],[102,16,70,16],[102,18,70,18],[102,21,70,21],[103,8,71,8,"format"],[103,14,71,14],[103,16,71,16,"ImageManipulator"],[103,32,71,32],[103,33,71,33,"SaveFormat"],[103,43,71,43],[103,44,71,44,"JPEG"],[103,48,71,48],[104,8,72,8,"base64"],[104,14,72,14],[104,16,72,16],[105,6,73,6],[105,7,74,4],[105,8,74,5],[106,6,76,4],[106,10,76,8,"manipulatedImage"],[106,26,76,24],[106,27,76,25,"base64"],[106,33,76,31],[106,35,76,33],[107,8,77,6],[107,15,77,13],[107,41,77,39,"manipulatedImage"],[107,57,77,55],[107,58,77,56,"base64"],[107,64,77,62],[107,66,77,64],[108,6,78,4],[109,6,80,4],[109,13,80,11],[109,17,80,15],[110,4,81,2],[110,5,81,3],[110,6,81,4],[110,13,81,11,"error"],[110,18,81,16],[110,20,81,18],[111,6,82,4,"console"],[111,13,82,11],[111,14,82,12,"error"],[111,19,82,17],[111,20,82,18],[111,60,82,58],[111,62,82,60,"error"],[111,67,82,65],[111,68,82,66],[112,6,83,4,"Alert"],[112,11,83,9],[112,12,83,9,"default"],[112,19,83,9],[112,20,83,10,"alert"],[112,25,83,15],[112,26,83,16],[112,33,83,23],[112,35,83,25],[112,71,83,61],[112,72,83,62],[113,6,84,4],[113,13,84,11],[113,17,84,15],[114,4,85,2],[115,2,86,0],[115,3,86,1],[117,2,88,0],[118,0,89,0],[119,0,90,0],[120,0,91,0],[121,0,92,0],[122,2,93,7],[122,8,93,13,"takePictureAndCrop"],[122,26,93,31],[122,29,93,34],[122,35,93,34,"takePictureAndCrop"],[122,36,94,2,"aspectRatio"],[122,47,94,31],[122,50,94,34],[122,51,94,35],[122,52,94,36],[122,54,94,38],[122,55,94,39],[122,56,94,40],[122,61,95,29],[123,4,96,2],[123,8,96,6],[124,6,97,4],[125,6,98,4],[125,12,98,10],[126,8,98,12,"status"],[127,6,98,19],[127,7,98,20],[127,10,98,23],[127,16,98,29,"ImagePicker"],[127,27,98,40],[127,28,98,41,"requestCameraPermissionsAsync"],[127,57,98,70],[127,58,98,71],[127,59,98,72],[128,6,100,4],[128,10,100,8,"status"],[128,16,100,14],[128,21,100,19],[128,30,100,28],[128,32,100,30],[129,8,101,6,"Alert"],[129,13,101,11],[129,14,101,11,"default"],[129,21,101,11],[129,22,101,12,"alert"],[129,27,101,17],[129,28,102,8],[129,49,102,29],[129,51,103,8],[129,96,104,6],[129,97,104,7],[130,8,105,6],[130,15,105,13],[130,19,105,17],[131,6,106,4],[133,6,108,4],[134,6,109,4],[134,12,109,10,"result"],[134,18,109,16],[134,21,109,19],[134,27,109,25,"ImagePicker"],[134,38,109,36],[134,39,109,37,"launchCameraAsync"],[134,56,109,54],[134,57,109,55],[135,8,110,6,"allowsEditing"],[135,21,110,19],[135,23,110,21],[135,27,110,25],[136,8,111,6,"aspect"],[136,14,111,12],[136,16,111,14,"aspectRatio"],[136,27,111,25],[137,8,112,6,"quality"],[137,15,112,13],[137,17,112,15],[138,6,113,4],[138,7,113,5],[138,8,113,6],[139,6,115,4],[139,10,115,8,"result"],[139,16,115,14],[139,17,115,15,"canceled"],[139,25,115,23],[139,27,115,25],[140,8,116,6],[140,15,116,13],[140,19,116,17],[141,6,117,4],[142,6,119,4],[142,12,119,10,"selectedImage"],[142,25,119,23],[142,28,119,26,"result"],[142,34,119,32],[142,35,119,33,"assets"],[142,41,119,39],[142,42,119,40],[142,43,119,41],[142,44,119,42],[144,6,121,4],[145,6,122,4],[145,12,122,10],[146,8,122,12,"width"],[146,13,122,17],[147,8,122,19,"height"],[148,6,122,26],[148,7,122,27],[148,10,122,30,"selectedImage"],[148,23,122,43],[150,6,124,4],[151,6,125,4],[151,12,125,10,"size"],[151,16,125,14],[151,19,125,17,"Math"],[151,23,125,21],[151,24,125,22,"min"],[151,27,125,25],[151,28,125,26,"width"],[151,33,125,31],[151,35,125,33,"height"],[151,41,125,39],[151,42,125,40],[153,6,127,4],[154,6,128,4],[154,12,128,10,"originX"],[154,19,128,17],[154,22,128,20],[154,23,128,21,"width"],[154,28,128,26],[154,31,128,29,"size"],[154,35,128,33],[154,39,128,37],[154,40,128,38],[155,6,129,4],[155,12,129,10,"originY"],[155,19,129,17],[155,22,129,20],[155,23,129,21,"height"],[155,29,129,27],[155,32,129,30,"size"],[155,36,129,34],[155,40,129,38],[155,41,129,39],[157,6,131,4],[158,6,132,4],[158,12,132,10,"manipulatedImage"],[158,28,132,26],[158,31,132,29],[158,37,132,35,"ImageManipulator"],[158,53,132,51],[158,54,132,52,"manipulateAsync"],[158,69,132,67],[158,70,133,6,"selectedImage"],[158,83,133,19],[158,84,133,20,"uri"],[158,87,133,23],[158,89,134,6],[158,90,135,8],[159,8,136,10,"crop"],[159,12,136,14],[159,14,136,16],[160,10,137,12,"originX"],[160,17,137,19],[161,10,138,12,"originY"],[161,17,138,19],[162,10,139,12,"width"],[162,15,139,17],[162,17,139,19,"size"],[162,21,139,23],[163,10,140,12,"height"],[163,16,140,18],[163,18,140,20,"size"],[164,8,141,10],[165,6,142,8],[165,7,142,9],[166,6,143,8],[167,6,144,8],[168,8,145,10,"resize"],[168,14,145,16],[168,16,145,18],[169,10,146,12,"width"],[169,15,146,17],[169,17,146,19],[169,20,146,22],[170,10,147,12,"height"],[170,16,147,18],[170,18,147,20],[171,8,148,10],[172,6,149,8],[172,7,149,9],[172,8,150,7],[172,10,151,6],[173,8,152,8,"compress"],[173,16,152,16],[173,18,152,18],[173,21,152,21],[174,8,153,8,"format"],[174,14,153,14],[174,16,153,16,"ImageManipulator"],[174,32,153,32],[174,33,153,33,"SaveFormat"],[174,43,153,43],[174,44,153,44,"JPEG"],[174,48,153,48],[175,8,154,8,"base64"],[175,14,154,14],[175,16,154,16],[176,6,155,6],[176,7,156,4],[176,8,156,5],[177,6,158,4],[177,10,158,8,"manipulatedImage"],[177,26,158,24],[177,27,158,25,"base64"],[177,33,158,31],[177,35,158,33],[178,8,159,6],[178,15,159,13],[178,41,159,39,"manipulatedImage"],[178,57,159,55],[178,58,159,56,"base64"],[178,64,159,62],[178,66,159,64],[179,6,160,4],[180,6,162,4],[180,13,162,11],[180,17,162,15],[181,4,163,2],[181,5,163,3],[181,6,163,4],[181,13,163,11,"error"],[181,18,163,16],[181,20,163,18],[182,6,164,4,"console"],[182,13,164,11],[182,14,164,12,"error"],[182,19,164,17],[182,20,164,18],[182,53,164,51],[182,55,164,53,"error"],[182,60,164,58],[182,61,164,59],[183,6,165,4,"Alert"],[183,11,165,9],[183,12,165,9,"default"],[183,19,165,9],[183,20,165,10,"alert"],[183,25,165,15],[183,26,165,16],[183,33,165,23],[183,35,165,25],[183,69,165,59],[183,70,165,60],[184,6,166,4],[184,13,166,11],[184,17,166,15],[185,4,167,2],[186,2,168,0],[186,3,168,1],[187,0,168,2],[187,3]],"functionMap":{"names":["<global>","pickAndCropImage","takePictureAndCrop"],"mappings":"AAA;gCCS;CD4E;kCEO;CF2E"},"hasCjsExports":false},"type":"js/module"}]}