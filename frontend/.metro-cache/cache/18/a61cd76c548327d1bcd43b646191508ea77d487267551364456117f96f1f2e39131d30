{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":137},"end":{"line":4,"column":78,"index":215}}],"key":"PilFUkBfYpg1cVGLNRiWDw/oULQ=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":216},"end":{"line":5,"column":34,"index":250}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"useAuthStore\",{enumerable:!0,get:function(){return u}});var t=r(d[0]),o=e(r(d[1])),s=r(d[2]),n=e(r(d[3]));const u=(0,t.create)(e=>({user:null,token:null,isAuthenticated:!1,isLoading:!0,hasConsent:!1,setUser:t=>e({user:t,isAuthenticated:!!t}),setToken:t=>e({token:t}),setConsent:async t=>{try{await o.default.setItem('hasConsent',t?'true':'false'),console.log('\\u2705 Consent saved:',t),e({hasConsent:t})}catch(e){console.error('\\u274c Error saving consent:',e)}},login:async(t,u)=>{try{await o.default.setItem('user',JSON.stringify(t)),await o.default.setItem('token',u),await o.default.setItem('isAuthenticated','true'),console.log('\\u2705 Auth data saved to AsyncStorage'),e({user:t,token:u,isAuthenticated:!0});try{const e=await(0,s.registerForPushNotificationsAsync)();e&&(await n.default.put('/users/push-token',{push_token:e},{headers:{Authorization:u}}),console.log('Push token registered successfully'))}catch(e){console.error('Error registering push token:',e)}}catch(e){console.error('\\u274c Error saving auth data:',e)}},logout:async()=>{try{await o.default.removeItem('user'),await o.default.removeItem('token'),await o.default.removeItem('isAuthenticated'),console.log('\\u2705 Auth data removed from AsyncStorage'),e({user:null,token:null,isAuthenticated:!1})}catch(e){console.error('\\u274c Error removing auth data:',e)}},loadStoredAuth:async()=>{try{console.log('\\ud83d\\udd0d Loading stored auth...');const t=await o.default.getItem('user'),s=await o.default.getItem('token'),n=await o.default.getItem('isAuthenticated'),u=await o.default.getItem('hasConsent');console.log('\\ud83d\\udce6 Stored data:',{hasUser:!!t,hasToken:!!s,isAuth:n,hasConsent:u});const l='true'===u;if(t&&s&&'true'===n){const o=JSON.parse(t);console.log('\\u2705 Auth restored for user:',o.email),e({user:o,token:s,isAuthenticated:!0,hasConsent:l,isLoading:!1})}else console.log('\\u2139\\ufe0f No stored auth found'),e({hasConsent:l,isLoading:!1})}catch(t){console.error('\\u274c Error loading stored auth:',t),e({isLoading:!1})}}}))});","lineCount":1,"map":[[1,143,21,0,"Object"],[1,150,21,0,"defineProperty"],[1,165,21,0,"_e"],[1,168,21,0],[1,184,21,0,"enumerable"],[1,196,21,0],[1,198,21,0,"get"],[1,202,21,0],[1,220,21,0,"useAuthStore"],[1,221,21,0],[1,225,1,0],[1,229,1,0,"_zustand"],[1,231,1,0,"r"],[1,233,1,0,"d"],[1,235,1,0],[1,239,2,0,"AsyncStorage"],[1,241,2,0,"_interopDefault"],[1,243,2,0,"r"],[1,245,2,0,"d"],[1,247,2,0],[1,252,4,0,"_servicesNotifications"],[1,254,4,0,"r"],[1,256,4,0,"d"],[1,258,4,0],[1,262,5,0,"api"],[1,264,5,0,"_interopDefault"],[1,266,5,0,"r"],[1,268,5,0,"d"],[1,270,5,0],[1,275,21,7],[1,281,21,13,"useAuthStore"],[1,284,21,28],[1,286,21,28,"create"],[1,288,21,34,"create"],[1,296,21,47,"set"],[1,300,21,50],[1,301,22,2,"user"],[1,306,22,8],[1,311,23,2,"token"],[1,317,23,9],[1,322,24,2,"isAuthenticated"],[1,339,24,19],[1,341,25,2,"isLoading"],[1,352,25,13],[1,354,26,2,"hasConsent"],[1,366,26,14],[1,368,28,2,"setUser"],[1,376,28,12,"user"],[1,379,28,21,"set"],[1,381,28,25],[1,382,28,27,"user"],[1,389,28,33,"isAuthenticated"],[1,407,28,52,"user"],[1,411,30,2,"setToken"],[1,420,30,13,"token"],[1,423,30,23,"set"],[1,425,30,27],[1,426,30,29,"token"],[1,436,32,2,"setConsent"],[1,447,32,14,"async"],[1,457,33,4],[1,467,34,12,"AsyncStorage"],[1,469,34,24,"default"],[1,477,34,25,"setItem"],[1,485,34,33],[1,498,34,47,"hasConsent"],[1,500,34,60],[1,507,34,69],[1,516,35,6,"console"],[1,524,35,14,"log"],[1,528,35,18],[1,552,35,38,"hasConsent"],[1,555,36,6,"set"],[1,557,36,10],[1,558,36,12,"hasConsent"],[1,572,37,4],[1,573,37,6],[1,579,37,13,"error"],[1,582,38,6,"console"],[1,590,38,14,"error"],[1,596,38,20],[1,627,38,47,"error"],[1,629,39,4],[1,632,42,2,"login"],[1,638,42,9,"async"],[1,644,42,16,"user"],[1,646,42,22,"token"],[1,651,43,4],[1,661,44,12,"AsyncStorage"],[1,663,44,24,"default"],[1,671,44,25,"setItem"],[1,679,44,33],[1,686,44,41,"JSON"],[1,691,44,46,"stringify"],[1,701,44,56,"user"],[1,711,45,12,"AsyncStorage"],[1,713,45,24,"default"],[1,721,45,25,"setItem"],[1,729,45,33],[1,737,45,42,"token"],[1,746,46,12,"AsyncStorage"],[1,748,46,24,"default"],[1,756,46,25,"setItem"],[1,764,46,33],[1,782,46,52],[1,790,47,6,"console"],[1,798,47,14,"log"],[1,802,47,18],[1,844,48,6,"set"],[1,846,48,10],[1,847,48,12,"user"],[1,854,48,18,"token"],[1,862,48,25,"isAuthenticated"],[1,879,48,42],[1,883,51,6],[1,887,52,8],[1,893,52,14,"pushToken"],[1,901,52,32],[1,903,52,32,"registerForPushNotificationsAsync"],[1,905,52,65,"registerForPushNotificationsAsync"],[1,942,53,12,"pushToken"],[1,952,54,16,"api"],[1,954,54,19,"default"],[1,962,54,20,"put"],[1,966,54,24],[1,986,55,12],[1,987,55,14,"push_token"],[1,998,55,26,"pushToken"],[1,1001,56,12],[1,1002,56,14,"headers"],[1,1010,56,23],[1,1011,56,25,"Authorization"],[1,1025,56,40,"token"],[1,1030,58,10,"console"],[1,1038,58,18,"log"],[1,1042,58,22],[1,1080,60,6],[1,1081,60,8],[1,1087,60,15,"error"],[1,1090,61,8,"console"],[1,1098,61,16,"error"],[1,1104,61,22],[1,1136,61,55,"error"],[1,1138,62,6],[1,1139,63,4],[1,1140,63,6],[1,1146,63,13,"error"],[1,1149,64,6,"console"],[1,1157,64,14,"error"],[1,1163,64,20],[1,1196,64,49,"error"],[1,1198,65,4],[1,1201,68,2,"logout"],[1,1208,68,10,"async"],[1,1218,69,4],[1,1228,70,12,"AsyncStorage"],[1,1230,70,24,"default"],[1,1238,70,25,"removeItem"],[1,1249,70,36],[1,1263,71,12,"AsyncStorage"],[1,1265,71,24,"default"],[1,1273,71,25,"removeItem"],[1,1284,71,36],[1,1299,72,12,"AsyncStorage"],[1,1301,72,24,"default"],[1,1309,72,25,"removeItem"],[1,1320,72,36],[1,1339,73,6,"console"],[1,1347,73,14,"log"],[1,1351,73,18],[1,1397,74,6,"set"],[1,1399,74,10],[1,1400,74,12,"user"],[1,1405,74,18],[1,1410,74,24,"token"],[1,1416,74,31],[1,1421,74,37,"isAuthenticated"],[1,1438,74,54],[1,1441,75,4],[1,1442,75,6],[1,1448,75,13,"error"],[1,1451,76,6,"console"],[1,1459,76,14,"error"],[1,1465,76,20],[1,1500,76,51,"error"],[1,1502,77,4],[1,1505,80,2,"loadStoredAuth"],[1,1520,80,18,"async"],[1,1530,81,4],[1,1534,82,6,"console"],[1,1542,82,14,"log"],[1,1546,82,18],[1,1585,83,6],[1,1591,83,12,"userStr"],[1,1599,83,28,"AsyncStorage"],[1,1601,83,40,"default"],[1,1609,83,41,"getItem"],[1,1617,83,49],[1,1625,84,12,"token"],[1,1633,84,26,"AsyncStorage"],[1,1635,84,38,"default"],[1,1643,84,39,"getItem"],[1,1651,84,47],[1,1660,85,12,"isAuth"],[1,1668,85,27,"AsyncStorage"],[1,1670,85,39,"default"],[1,1678,85,40,"getItem"],[1,1686,85,48],[1,1705,86,12,"consentStr"],[1,1713,86,31,"AsyncStorage"],[1,1715,86,43,"default"],[1,1723,86,44,"getItem"],[1,1731,86,52],[1,1745,88,6,"console"],[1,1753,88,14,"log"],[1,1757,88,18],[1,1785,88,37],[1,1786,89,8,"hasUser"],[1,1796,89,19,"userStr"],[1,1798,90,8,"hasToken"],[1,1809,90,20,"token"],[1,1811,91,8,"isAuth"],[1,1820,92,8,"hasConsent"],[1,1831,92,20,"consentStr"],[1,1835,95,6],[1,1841,95,12,"hasConsent"],[1,1843,95,40],[1,1852,95,25,"consentStr"],[1,1854,97,6],[1,1857,97,10,"userStr"],[1,1860,97,21,"token"],[1,1863,97,41],[1,1872,97,30,"isAuth"],[1,1874,97,49],[1,1875,98,8],[1,1881,98,14,"user"],[1,1883,98,21,"JSON"],[1,1888,98,26,"parse"],[1,1894,98,32,"userStr"],[1,1897,99,8,"console"],[1,1905,99,16,"log"],[1,1909,99,20],[1,1942,99,49,"user"],[1,1944,99,54,"email"],[1,1951,100,8,"set"],[1,1953,100,12],[1,1954,100,14,"user"],[1,1961,100,20,"token"],[1,1969,100,27,"isAuthenticated"],[1,1986,100,44],[1,1988,100,50,"hasConsent"],[1,2001,100,62,"isLoading"],[1,2012,100,73],[1,2015,101,6],[1,2021,102,8,"console"],[1,2029,102,16,"log"],[1,2033,102,20],[1,2070,103,8,"set"],[1,2072,103,12],[1,2073,103,14,"hasConsent"],[1,2086,103,26,"isLoading"],[1,2097,103,37],[1,2100,105,4],[1,2101,105,6],[1,2107,105,13,"error"],[1,2110,106,6,"console"],[1,2118,106,14,"error"],[1,2124,106,20],[1,2160,106,52,"error"],[1,2163,107,6,"set"],[1,2165,107,10],[1,2166,107,12,"isLoading"],[1,2177,107,23],[1,2180,108,4],[1,2185,110,4],[1,2188]],"functionMap":{"names":["<global>","create$argument_0","setUser","setToken","setConsent","login","logout","loadStoredAuth"],"mappings":"AAA;8CCoB;WCO,gDD;YEE,yBF;cGE;GHQ;SIE;GJwB;UKE;GLU;kBME;GN6B;EDC"},"hasCjsExports":false},"type":"js/module"}]}