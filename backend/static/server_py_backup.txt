ZnJvbSBmYXN0YXBpIGltcG9ydCBGYXN0QVBJLCBBUElSb3V0ZXIsIEhUVFBFeGNlcHRpb24sIEhl
YWRlciwgQm9keSwgUmVxdWVzdApmcm9tIGZhc3RhcGkubWlkZGxld2FyZS5jb3JzIGltcG9ydCBD
T1JTTWlkZGxld2FyZQpmcm9tIGZhc3RhcGkuc3RhdGljZmlsZXMgaW1wb3J0IFN0YXRpY0ZpbGVz
CmZyb20gZmFzdGFwaS5yZXNwb25zZXMgaW1wb3J0IEZpbGVSZXNwb25zZQpmcm9tIG1vdG9yLm1v
dG9yX2FzeW5jaW8gaW1wb3J0IEFzeW5jSU9Nb3RvckNsaWVudApmcm9tIGRvdGVudiBpbXBvcnQg
bG9hZF9kb3RlbnYKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmltcG9ydCBvcwppbXBvcnQgbG9n
Z2luZwppbXBvcnQgaHR0cHgKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWVkZWx0
YQpmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIExpc3QKZnJvbSBweWRhbnRpYyBpbXBvcnQg
QmFzZU1vZGVsLCBGaWVsZApmcm9tIGJzb24gaW1wb3J0IE9iamVjdElkCmltcG9ydCBwYXlwYWxy
ZXN0c2RrCmltcG9ydCByYW5kb20KZnJvbSBwdXNoX25vdGlmaWNhdGlvbnMgaW1wb3J0IHNlbmRf
cHVzaF9ub3RpZmljYXRpb24sIHNlbmRfbm90aWZpY2F0aW9uX3RvX3VzZXIKClJPT1RfRElSID0g
UGF0aChfX2ZpbGVfXykucGFyZW50CmxvYWRfZG90ZW52KFJPT1RfRElSIC8gJy5lbnYnKQoKIyBD
b25maWd1cmUgbG9nZ2luZwpsb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKCiMg
SW1wb3J0IGFkbWluIHJvdXRlcwpmcm9tIGFkbWluX3JvdXRlcyBpbXBvcnQgYWRtaW5fcm91dGVy
LCBPZmZlckNyZWF0ZSwgT2ZmZXJVcGRhdGUKZnJvbSBuZXdzX3NjaGVkdWxlciBpbXBvcnQgc3Rh
cnRfbmV3c19zY2hlZHVsZXIKCiMgTW9uZ29EQiBjb25uZWN0aW9uCm1vbmdvX3VybCA9IG9zLmVu
dmlyb25bJ01PTkdPX1VSTCddCmNsaWVudCA9IEFzeW5jSU9Nb3RvckNsaWVudChtb25nb191cmwp
CmRiID0gY2xpZW50W29zLmVudmlyb25bJ0RCX05BTUUnXV0KCiMgTmV1cm9tb2JpbGUgQVBJIGNv
bmZpZ3VyYXRpb24KTkVVUk9NT0JJTEVfQVBJX0JBU0UgPSAiaHR0cHM6Ly9hcGkubmV1cm9tb2Jp
bGUuY29tL3YxIgpORVVST01PQklMRV9UT0tFTiA9IG9zLmdldGVudignTkVVUk9NT0JJTEVfVE9L
RU4nLCAnJykKCiMgUGF5UGFsIGNvbmZpZ3VyYXRpb24KcGF5cGFscmVzdHNkay5jb25maWd1cmUo
ewogICAgIm1vZGUiOiBvcy5nZXRlbnYoJ1BBWVBBTF9NT0RFJywgJ3NhbmRib3gnKSwKICAgICJj
bGllbnRfaWQiOiBvcy5nZXRlbnYoJ1BBWVBBTF9DTElFTlRfSUQnLCAnJyksCiAgICAiY2xpZW50
X3NlY3JldCI6IG9zLmdldGVudignUEFZUEFMX1NFQ1JFVCcsICcnKQp9KQoKIyBUZXh0IGRlIGxh
IFBvbMOtdGljYSBkZSBQcm90ZWNjacOzIGRlIERhZGVzCmRlZiBnZXRfcHJpdmFjeV9wb2xpY3lf
dGV4dCgpOgogICAgcmV0dXJuICIiIgpQT0zDjVRJQ0EgREUgUFJPVEVDQ0nDkyBERSBEQURFUyAt
IEVMIFRPTUIgREUgUkVVUwoKw5psdGltYSBhY3R1YWxpdHphY2nDszogT2N0dWJyZSAyMDI1Cgox
LiBSRVNQT05TQUJMRSBERUwgVFJBQ1RBTUVOVApFbCBUb21iIGRlIFJldXMsIGFtYiBkb21pY2ls
aSBhIFJldXMsIFRhcnJhZ29uYSwgw6lzIGVsIHJlc3BvbnNhYmxlIGRlbCB0cmFjdGFtZW50IGRl
IGxlcyBzZXZlcyBkYWRlcyBwZXJzb25hbHMuCgoyLiBGSU5BTElUQVQgREVMIFRSQUNUQU1FTlQK
TGVzIHNldmVzIGRhZGVzIHBlcnNvbmFscyBzZXJhbiB0cmFjdGFkZXMgYW1iIGxlcyBzZWfDvGVu
dHMgZmluYWxpdGF0czoKLSBHZXN0acOzIGRlbCBzZXUgcmVnaXN0cmUgY29tIGEgdXN1YXJpIGRl
IGwnYXBsaWNhY2nDswotIFByZXN0YWNpw7MgZGVscyBzZXJ2ZWlzIG9mZXJ0cyBhIHRyYXbDqXMg
ZGUgbCdhcGxpY2FjacOzCi0gRW52aWFtZW50IGRlIGNvbXVuaWNhY2lvbnMgY29tZXJjaWFscyBz
b2JyZSBvZmVydGVzLCBlc2RldmVuaW1lbnRzIGkgcHJvbW9jaW9ucyBkZWxzIGVzdGFibGltZW50
cyBhc3NvY2lhdHMKLSBDb21wYXJ0aWNpw7MgYW1iIGVscyBub3N0cmVzIFBhdHJvY2luYWRvcnMg
QXNzb2NpYXRzIHBlciBhIGZpbmFsaXRhdHMgY29tZXJjaWFscyBpIHByb21vY2lvbmFscwotIE1p
bGxvcmEgZGUgbCdleHBlcmnDqG5jaWEgZCd1c3VhcmkgaSBwZXJzb25hbGl0emFjacOzIGRlIGNv
bnRpbmd1dHMKCjMuIExFR0lUSU1BQ0nDkwpMYSBiYXNlIGxlZ2FsIHBlciBhbCB0cmFjdGFtZW50
IGRlIGxlcyBzZXZlcyBkYWRlcyDDqXMgZWwgY29uc2VudGltZW50IHF1ZSBlbnMgYXRvcmdhIGVu
IGFjY2VwdGFyIGFxdWVzdGEgcG9sw610aWNhLgoKNC4gREVTVElOQVRBUklTIERFIExFUyBEQURF
UwpMZXMgc2V2ZXMgZGFkZXMgcG9kcmFuIHNlciBjb211bmljYWRlcyBhOgotIEVzdGFibGltZW50
cyBpIGNvbWVyw6dvcyBhc3NvY2lhdHMgYSBFbCBUb21iIGRlIFJldXMKLSBQYXRyb2NpbmFkb3Jz
IGkgY29swrdsYWJvcmFkb3JzIGNvbWVyY2lhbHMKLSBQcm92ZcOvZG9ycyBkZSBzZXJ2ZWlzIHRl
Y25vbMOyZ2ljcyBuZWNlc3NhcmlzIHBlciBhbCBmdW5jaW9uYW1lbnQgZGUgbCdhcGxpY2FjacOz
Cgo1LiBDT05TRVJWQUNJw5MgREUgTEVTIERBREVTCkxlcyBzZXZlcyBkYWRlcyBlcyBjb25zZXJ2
YXJhbiBtZW50cmUgbWFudGluZ3VpIGFjdGl1IGVsIHNldSBjb21wdGUgZCd1c3VhcmkgaSwgcG9z
dGVyaW9ybWVudCwgZHVyYW50IGVsIHRlcm1pbmkgbGVnYWxtZW50IGVzdGFibGVydC4KCjYuIERS
RVRTIERFIEwnVVNVQVJJClZvc3TDqCB0w6kgZHJldCBhOgotIEFjY2VkaXIgYSBsZXMgc2V2ZXMg
ZGFkZXMgcGVyc29uYWxzCi0gUmVjdGlmaWNhciBkYWRlcyBpbmV4YWN0ZXMgbyBpbmNvbXBsZXRl
cwotIFNvbMK3bGljaXRhciBsYSBzdXByZXNzacOzIGRlIGxlcyBzZXZlcyBkYWRlcwotIE9wb3Nh
ci1zZSBhbCB0cmFjdGFtZW50IGRlIGxlcyBzZXZlcyBkYWRlcwotIFNvbMK3bGljaXRhciBsYSBs
aW1pdGFjacOzIGRlbCB0cmFjdGFtZW50Ci0gUG9ydGFiaWxpdGF0IGRlIGxlcyBkYWRlcwotIFJl
dGlyYXIgZWwgY29uc2VudGltZW50IGVuIHF1YWxzZXZvbCBtb21lbnQKClBlciBleGVyY2lyIGFx
dWVzdHMgZHJldHMsIHBvdCBjb250YWN0YXItbm9zIGEgdHJhdsOpcyBkZSBsJ2FwbGljYWNpw7Mg
byBlbnZpYW50IHVuIGNvcnJldSBlbGVjdHLDsm5pYyBhIHByb3RlY2Npb2RhZGVzQGVsdG9tYmRl
cmV1cy5jb20KCjcuIENPTlNFTlRJTUVOVApFbiBhY2NlcHRhciBhcXVlc3RhIHBvbMOtdGljYSwg
dm9zdMOoIGNvbnNlbnQgZXhwcmVzc2FtZW50OgotIEVsIHRyYWN0YW1lbnQgZGUgbGVzIHNldmVz
IGRhZGVzIHBlcnNvbmFscyBwZXIgcGFydCBkJ0VsIFRvbWIgZGUgUmV1cwotIExhIGNvbXBhcnRp
Y2nDsyBkZSBsZXMgc2V2ZXMgZGFkZXMgYW1iIGVscyBQYXRyb2NpbmFkb3JzIEFzc29jaWF0cwot
IExhIHJlY2VwY2nDsyBkZSBjb211bmljYWNpb25zIGNvbWVyY2lhbHMKIiIiCgojIENyZWF0ZSB0
aGUgbWFpbiBhcHAKYXBwID0gRmFzdEFQSSh0aXRsZT0iRWwgVG9tYiBkZSBSZXVzIEFQSSIpCgoj
IEhlYWx0aCBjaGVjayBlbmRwb2ludHMgKGZvciBSYWlsd2F5IGFuZCBnZW5lcmFsIHVzZSkKQGFw
cC5nZXQoIi9oZWFsdGgiKQphc3luYyBkZWYgaGVhbHRoX2NoZWNrX3Jvb3QoKToKICAgIHJldHVy
biB7InN0YXR1cyI6ICJoZWFsdGh5IiwgInNlcnZpY2UiOiAiRWwgVG9tYiBkZSBSZXVzIEFQSSJ9
CgpAYXBwLmdldCgiL2FwaS9oZWFsdGgiKQphc3luYyBkZWYgaGVhbHRoX2NoZWNrKCk6CiAgICBy
ZXR1cm4geyJzdGF0dXMiOiAiaGVhbHRoeSIsICJzZXJ2aWNlIjogIkVsIFRvbWIgZGUgUmV1cyBB
UEkifQoKIyBDcmVhdGUgYSByb3V0ZXIgd2l0aCB0aGUgL2FwaSBwcmVmaXgKYXBpX3JvdXRlciA9
IEFQSVJvdXRlcihwcmVmaXg9Ii9hcGkiKQoKIyBQeWRhbnRpYyBNb2RlbHMKY2xhc3MgUHlPYmpl
Y3RJZChPYmplY3RJZCk6CiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBfX2dldF92YWxpZGF0b3Jz
X18oY2xzKToKICAgICAgICB5aWVsZCBjbHMudmFsaWRhdGUKICAgIAogICAgQGNsYXNzbWV0aG9k
CiAgICBkZWYgdmFsaWRhdGUoY2xzLCB2KToKICAgICAgICBpZiBub3QgT2JqZWN0SWQuaXNfdmFs
aWQodik6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgT2JqZWN0SWQiKQog
ICAgICAgIHJldHVybiBPYmplY3RJZCh2KQoKY2xhc3MgVXNlckJhc2UoQmFzZU1vZGVsKToKICAg
IGVtYWlsOiBzdHIKICAgIG5hbWU6IHN0ciAgIyBOb20gY29tcGxldAogICAgcGhvbmU6IE9wdGlv
bmFsW3N0cl0gPSAiIiAgIyBPcGNpb25hbAogICAgYmlydGhfZGF0ZTogT3B0aW9uYWxbZGF0ZXRp
bWVdID0gTm9uZSAgIyBEYXRhIGRlIG5haXhlbWVudCBvcGNpb25hbAogICAgZ2VuZGVyOiBPcHRp
b25hbFtzdHJdID0gIiIgICMgU2V4ZSBvcGNpb25hbAogICAgYWRkcmVzczogT3B0aW9uYWxbc3Ry
XSA9ICIiICAjIEFkcmXDp2Egb3BjaW9uYWwKICAgIGNpdHk6IE9wdGlvbmFsW3N0cl0gPSAiIiAg
IyBQb2JsYWNpw7Mgb3BjaW9uYWwKICAgIHJvbGU6IHN0ciA9ICJ1c2VyIiAgIyB1c2VyLCBhZG1p
biwgbG9jYWxfYXNzb2NpYXQsIGVudGl0YXRfY29sYWJvcmFkb3JhLCBtZW1icmVfY29uc2VsbAog
ICAgbGFuZ3VhZ2U6IHN0ciA9ICJjYSIgICMgSWRpb21hIHByZWZlcml0OiBjYSwgZXMsIGVuLCBm
ciwgaXQsIHJ1CiAgICB0YWdzOiBPcHRpb25hbFtMaXN0W3N0cl1dID0gW10gICMgTWFyY2Fkb3Jz
IGQnaW50ZXLDqHMgZGUgbCd1c3VhcmkKCmNsYXNzIFVzZXJDcmVhdGUoVXNlckJhc2UpOgogICAg
cGFzc3dvcmQ6IHN0cgogICAgZGF0YV9jb25zZW50OiBib29sICAjIENvbnNlbnRpbWVudCBvYmxp
Z2F0b3JpCgpjbGFzcyBVc2VyKFVzZXJCYXNlKToKICAgIGlkOiBzdHIgPSBGaWVsZChhbGlhcz0i
X2lkIikKICAgIGNyZWF0ZWRfYXQ6IGRhdGV0aW1lID0gRmllbGQoZGVmYXVsdF9mYWN0b3J5PWRh
dGV0aW1lLnV0Y25vdykKICAgIGRhdGFfY29uc2VudDogT3B0aW9uYWxbYm9vbF0gPSBOb25lCiAg
ICBkYXRhX2NvbnNlbnRfZGF0ZTogT3B0aW9uYWxbZGF0ZXRpbWVdID0gTm9uZQogICAgZXN0YWJs
aXNobWVudF9pZDogT3B0aW9uYWxbc3RyXSA9IE5vbmUgICMgUGVyIGxvY2FscyBhc3NvY2lhdHMK
ICAgIHB1c2hfdG9rZW46IE9wdGlvbmFsW3N0cl0gPSBOb25lICAjIFRva2VuIHBlciBub3RpZmlj
YWNpb25zIHB1c2gKICAgIG1lbWJlcl9jb2RlOiBPcHRpb25hbFtzdHJdID0gTm9uZSAgIyBDb2Rp
IMO6bmljIGRlIG1lbWJyZSBwZXIgUVIgKGNhcm5ldCkKICAgIAogICAgY2xhc3MgQ29uZmlnOgog
ICAgICAgIHBvcHVsYXRlX2J5X25hbWUgPSBUcnVlCiAgICAgICAganNvbl9lbmNvZGVycyA9IHtP
YmplY3RJZDogc3RyfQoKY2xhc3MgRXN0YWJsaXNobWVudEJhc2UoQmFzZU1vZGVsKToKICAgIG5h
bWU6IHN0cgogICAgY29tbWVyY2lhbF9uYW1lOiBPcHRpb25hbFtzdHJdID0gTm9uZSAgIyBOb20g
Y29tZXJjaWFsCiAgICBkZXNjcmlwdGlvbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgIGNhdGVn
b3J5OiBPcHRpb25hbFtzdHJdID0gTm9uZSAgIyBTZWN0b3IgKGNhdGVnb3JpYSBlc3RhZGlzdGlj
YSkKICAgIHN1YmNhdGVnb3J5OiBPcHRpb25hbFtzdHJdID0gTm9uZSAgIyBTdWJzZWN0b3IKICAg
IGFkZHJlc3M6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICBwb3N0YWxfY29kZTogT3B0aW9uYWxb
c3RyXSA9IE5vbmUKICAgIGxhdGl0dWRlOiBPcHRpb25hbFtmbG9hdF0gPSBOb25lCiAgICBsb25n
aXR1ZGU6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUKICAgIHBob25lOiBPcHRpb25hbFtzdHJdID0g
Tm9uZQogICAgZW1haWw6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICB3ZWJzaXRlOiBPcHRpb25h
bFtzdHJdID0gTm9uZQogICAgbmlmOiBPcHRpb25hbFtzdHJdID0gTm9uZSAgIyBDSUYvTklGICh2
YXRfbnVtYmVyKQogICAgaW1hZ2VfdXJsOiBPcHRpb25hbFtzdHJdID0gTm9uZSAgIyBVUkwgZGVs
IGxvZ28KICAgIAogICAgIyBOb3VzIGNhbXBzIGRlIGwnRXhjZWwKICAgIHN0YXR1czogT3B0aW9u
YWxbc3RyXSA9IE5vbmUgICMgZXN0YXR1czogIkEgU29jaSIsIGV0Yy4KICAgIHdoYXRzYXBwOiBP
cHRpb25hbFtzdHJdID0gTm9uZQogICAgdmF0X251bWJlcjogT3B0aW9uYWxbc3RyXSA9IE5vbmUg
ICMgTWF0ZWl4IHF1ZSBOSUYKICAgIGliYW46IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICBjb2xs
ZWN0aXU6IE9wdGlvbmFsW3N0cl0gPSBOb25lICAjIGNvbMK3bGVjdGl1CiAgICBxdW90YTogT3B0
aW9uYWxbc3RyXSA9IE5vbmUKICAgIGxvZ29fdXJsOiBPcHRpb25hbFtzdHJdID0gTm9uZQogICAg
aW1hdGdlMV91cmw6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICBpbWF0Z2UyX3VybDogT3B0aW9u
YWxbc3RyXSA9IE5vbmUKICAgIHdlYl91cmw6IE9wdGlvbmFsW3N0cl0gPSBOb25lICAjIE1hdGVp
eCBxdWUgd2Vic2l0ZQogICAgdG91cnZpcnR1YWxfdXJsOiBPcHRpb25hbFtzdHJdID0gTm9uZSAg
IyB0b3VyIHZpcnR1YWwKICAgIGluc3RhZ3JhbTogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgIGZh
Y2Vib29rOiBPcHRpb25hbFtzdHJdID0gTm9uZQogICAgdHdpdHRlcjogT3B0aW9uYWxbc3RyXSA9
IE5vbmUKICAgIGFsdHJlc19jYXRlZ29yaWVzOiBPcHRpb25hbFtzdHJdID0gTm9uZSAgIyBhbHRy
ZXMgY2F0ZWdvcmllcwogICAgbGJhYzogT3B0aW9uYWxbc3RyXSA9IE5vbmUgICMgTEJBQwogICAg
dGlxdWV0czogT3B0aW9uYWxbc3RyXSA9IE5vbmUgICMgdGlxdWV0cyAoT0svTm9uZSkKICAgIGdp
bWNhbmE6IE9wdGlvbmFsW3N0cl0gPSBOb25lICAjIGdpbWNhbmEgKE9LL05vbmUpCiAgICB0b21i
czogT3B0aW9uYWxbc3RyXSA9IE5vbmUgICMgVE9NQlMgKE9LL05vbmUpCiAgICAKICAgICMgSURz
IGV4dGVybnMKICAgIGV4dGVybmFsX2lkOiBPcHRpb25hbFtzdHJdID0gTm9uZSAgIyBJRCBleHRl
cm4KICAgIHBhcnRuZXJfaWQ6IE9wdGlvbmFsW3N0cl0gPSBOb25lICAjIElEIFNvY2kKICAgIGVz
dGFibGlzaG1lbnRfY29kZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUgICMgQ29kaSDDum5pYyBwZXIg
UVIgKEVTVEFCLVlZWVlNTURELVhYWFhYWCkKICAgIAogICAgIyBUaXB1cyBkZSByZWxhY2nDsyBh
bWIgRWwgVG9tYiBkZSBSZXVzCiAgICBlc3RhYmxpc2htZW50X3R5cGU6IE9wdGlvbmFsW3N0cl0g
PSBOb25lICAjICJsb2NhbF9hc3NvY2lhdCIsICJsb2NhbF9ub19zb2NpIiwgImxvY2FsX3RhbmNh
dCIsICJwYXRyb2NpbmFkb3IiLCAiYWx0cmVzIgogICAgY29sbGFib3JhdGlvbl90eXBlOiBPcHRp
b25hbFtzdHJdID0gTm9uZSAgIyBQZXIgImFsdHJlcyI6IGRlc2NyaXBjacOzIGRlbCB0aXB1cyBk
ZSBjb2zCt2xhYm9yYWNpw7MKICAgIHZpc2libGVfaW5fcHVibGljX2xpc3Q6IE9wdGlvbmFsW2Jv
b2xdID0gVHJ1ZSAgIyBTaSBhcGFyZWl4IGEgbGEgbGxpc3RhIHDDumJsaWNhIGQnZXN0YWJsaW1l
bnRzCiAgICAKICAgICMgWGFyeGVzIHNvY2lhbHMgKGNvbSBhIG9iamVjdGUpIC0gREVQUkVDQVRF
RCwgdXNhciBjYW1wcyBpbmRpdmlkdWFscwogICAgc29jaWFsX21lZGlhOiBPcHRpb25hbFtkaWN0
XSA9IE5vbmUgICMgeyJmYWNlYm9vayI6ICJ1cmwiLCAiaW5zdGFncmFtIjogInVybCIsICJ0d2l0
dGVyIjogInVybCIsIGV0Yy59CiAgICAKICAgICMgRW5sbGHDp29zIGFkZGljaW9uYWxzCiAgICBn
b29nbGVfbWFwc191cmw6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICB2aWRlb191cmw6IE9wdGlv
bmFsW3N0cl0gPSBOb25lCiAgICB2aWRlb191cmxfMjogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAg
IAogICAgIyBIb3JhcmlzCiAgICBvcGVuaW5nX2hvdXJzOiBPcHRpb25hbFtzdHJdID0gTm9uZQog
ICAgCiAgICAjIFByb3BpZXRhcmkgKGxvY2FsIGFzc29jaWF0KQogICAgb3duZXJfaWQ6IE9wdGlv
bmFsW3N0cl0gPSBOb25lCiAgICAKICAgIGNyZWF0ZWRfYXQ6IE9wdGlvbmFsW2RhdGV0aW1lXSA9
IE5vbmUKCmNsYXNzIEVzdGFibGlzaG1lbnQoRXN0YWJsaXNobWVudEJhc2UpOgogICAgaWQ6IHN0
ciA9IEZpZWxkKGFsaWFzPSJfaWQiKQogICAgCiAgICBjbGFzcyBDb25maWc6CiAgICAgICAgcG9w
dWxhdGVfYnlfbmFtZSA9IFRydWUKICAgICAgICBqc29uX2VuY29kZXJzID0ge09iamVjdElkOiBz
dHJ9CgpjbGFzcyBPZmZlckJhc2UoQmFzZU1vZGVsKToKICAgIGVzdGFibGlzaG1lbnRfaWQ6IHN0
cgogICAgdGl0bGU6IHN0cgogICAgZGVzY3JpcHRpb246IHN0cgogICAgZGlzY291bnQ6IE9wdGlv
bmFsW3N0cl0gPSBOb25lCiAgICB2YWxpZF9mcm9tOiBkYXRldGltZQogICAgdmFsaWRfdW50aWw6
IGRhdGV0aW1lCiAgICBpbWFnZV91cmw6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICB0ZXJtczog
T3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgIHdlYl9saW5rOiBPcHRpb25hbFtzdHJdID0gTm9uZQog
ICAgcGhvbmU6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICB0YWdzOiBPcHRpb25hbFtMaXN0W3N0
cl1dID0gW10gICMgTWFyY2Fkb3JzIHBlciBjbGFzc2lmaWNhciBvZmVydGVzCgpjbGFzcyBPZmZl
cihPZmZlckJhc2UpOgogICAgaWQ6IHN0ciA9IEZpZWxkKGFsaWFzPSJfaWQiKQogICAgY3JlYXRl
ZF9hdDogZGF0ZXRpbWUgPSBGaWVsZChkZWZhdWx0X2ZhY3Rvcnk9ZGF0ZXRpbWUudXRjbm93KQog
ICAgCiAgICBjbGFzcyBDb25maWc6CiAgICAgICAgcG9wdWxhdGVfYnlfbmFtZSA9IFRydWUKICAg
ICAgICBqc29uX2VuY29kZXJzID0ge09iamVjdElkOiBzdHJ9CgpjbGFzcyBFdmVudEJhc2UoQmFz
ZU1vZGVsKToKICAgIGVzdGFibGlzaG1lbnRfaWQ6IE9wdGlvbmFsW3N0cl0gPSBOb25lICAjIE51
bGwgc2kgw6lzIGRlIGwnYWRtaW4KICAgIHRpdGxlOiBzdHIKICAgIGRlc2NyaXB0aW9uOiBzdHIK
ICAgIGRpc2NvdW50OiBPcHRpb25hbFtzdHJdID0gTm9uZSAgIyBQb3Qgc2VyIHByZXUgZCdlbnRy
YWRhCiAgICB2YWxpZF9mcm9tOiBkYXRldGltZQogICAgdmFsaWRfdW50aWw6IGRhdGV0aW1lCiAg
ICBpbWFnZV91cmw6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICB0ZXJtczogT3B0aW9uYWxbc3Ry
XSA9IE5vbmUKICAgIHdlYl9saW5rOiBPcHRpb25hbFtzdHJdID0gTm9uZQogICAgcGhvbmU6IE9w
dGlvbmFsW3N0cl0gPSBOb25lCiAgICAjIFhhcnhlcyBzb2NpYWxzCiAgICBmYWNlYm9va19saW5r
OiBPcHRpb25hbFtzdHJdID0gTm9uZQogICAgaW5zdGFncmFtX2xpbms6IE9wdGlvbmFsW3N0cl0g
PSBOb25lCiAgICB0d2l0dGVyX2xpbms6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICB5b3V0dWJl
X2xpbms6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICBsaW5rZWRpbl9saW5rOiBPcHRpb25hbFtz
dHJdID0gTm9uZQogICAgdGlrdG9rX2xpbms6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICAjIExv
Y2FscyBwYXJ0aWNpcGFudHMgKG5vbcOpcyBwZXIgZXNkZXZlbmltZW50cyBkZSBsJ2FkbWluKQog
ICAgcGFydGljaXBhdGluZ19lc3RhYmxpc2htZW50czogT3B0aW9uYWxbTGlzdFtzdHJdXSA9IFtd
ICAjIEFycmF5IGQnSURzIGQnZXN0YWJsaW1lbnRzCiAgICB0YWdzOiBPcHRpb25hbFtMaXN0W3N0
cl1dID0gW10gICMgTWFyY2Fkb3JzIHBlciBjbGFzc2lmaWNhciBlc2RldmVuaW1lbnRzCgpjbGFz
cyBFdmVudChFdmVudEJhc2UpOgogICAgaWQ6IHN0ciA9IEZpZWxkKGFsaWFzPSJfaWQiKQogICAg
Y3JlYXRlZF9hdDogZGF0ZXRpbWUgPSBGaWVsZChkZWZhdWx0X2ZhY3Rvcnk9ZGF0ZXRpbWUudXRj
bm93KQogICAgCiAgICBjbGFzcyBDb25maWc6CiAgICAgICAgcG9wdWxhdGVfYnlfbmFtZSA9IFRy
dWUKICAgICAgICBqc29uX2VuY29kZXJzID0ge09iamVjdElkOiBzdHJ9CgojIFByb21vY2lvbnMg
YW1iIHNpc3RlbWEgZCdhcHJvdmFjacOzCmNsYXNzIFByb21vdGlvbkJhc2UoQmFzZU1vZGVsKToK
ICAgIHRpdGxlOiBzdHIKICAgIGRlc2NyaXB0aW9uOiBzdHIKICAgIGltYWdlX3VybDogc3RyICAj
IEZvcm1hdCAzeDQgdmVydGljYWwKICAgIGVzdGFibGlzaG1lbnRfaWQ6IE9wdGlvbmFsW3N0cl0g
PSBOb25lICAjIFNpIMOpcyBkJ3VuIGVzdGFibGltZW50IGVzcGVjw61maWMKICAgIGxpbmtfdXJs
OiBPcHRpb25hbFtzdHJdID0gTm9uZSAgIyBFbmxsYcOnIGNsaWNhYmxlCiAgICB2YWxpZF9mcm9t
OiBkYXRldGltZQogICAgdmFsaWRfdW50aWw6IGRhdGV0aW1lCiAgICB0YWc6IE9wdGlvbmFsW3N0
cl0gPSBOb25lICAjIE1hcmNhZG9yIHBlciBmaWx0cmFyIHVzdWFyaXMgcGFydGljaXBhbnRzCgpj
bGFzcyBQcm9tb3Rpb25DcmVhdGUoQmFzZU1vZGVsKToKICAgIHRpdGxlOiBzdHIKICAgIGRlc2Ny
aXB0aW9uOiBzdHIKICAgIGltYWdlX3VybDogc3RyCiAgICBlc3RhYmxpc2htZW50X2lkOiBPcHRp
b25hbFtzdHJdID0gTm9uZQogICAgbGlua191cmw6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICB2
YWxpZF9mcm9tOiBzdHIgICMgQWNjZXB0ZW0gc3RyaW5nIElTTwogICAgdmFsaWRfdW50aWw6IHN0
ciAgIyBBY2NlcHRlbSBzdHJpbmcgSVNPCiAgICB0YWc6IE9wdGlvbmFsW3N0cl0gPSBOb25lCgpj
bGFzcyBQcm9tb3Rpb24oUHJvbW90aW9uQmFzZSk6CiAgICBpZDogc3RyID0gRmllbGQoYWxpYXM9
Il9pZCIpCiAgICBjcmVhdGVkX2J5OiBzdHIgICMgdXNlcl9pZCBkZWwgY3JlYWRvcgogICAgc3Rh
dHVzOiBzdHIgPSAicGVuZGluZyIgICMgcGVuZGluZywgYXBwcm92ZWQsIHJlamVjdGVkCiAgICBy
ZXZpZXdlZF9ieTogT3B0aW9uYWxbc3RyXSA9IE5vbmUgICMgdXNlcl9pZCBkZSBsJ2FkbWluIHF1
ZSByZXZpc2EKICAgIHJldmlld2VkX2F0OiBPcHRpb25hbFtkYXRldGltZV0gPSBOb25lCiAgICBy
ZWplY3Rpb25fcmVhc29uOiBPcHRpb25hbFtzdHJdID0gTm9uZQogICAgY3JlYXRlZF9hdDogZGF0
ZXRpbWUgPSBGaWVsZChkZWZhdWx0X2ZhY3Rvcnk9ZGF0ZXRpbWUudXRjbm93KQogICAgdXBkYXRl
ZF9hdDogZGF0ZXRpbWUgPSBGaWVsZChkZWZhdWx0X2ZhY3Rvcnk9ZGF0ZXRpbWUudXRjbm93KQog
ICAgCiAgICBjbGFzcyBDb25maWc6CiAgICAgICAgcG9wdWxhdGVfYnlfbmFtZSA9IFRydWUKICAg
ICAgICBqc29uX2VuY29kZXJzID0ge09iamVjdElkOiBzdHJ9CgpjbGFzcyBOZXdzQXJ0aWNsZShC
YXNlTW9kZWwpOgogICAgdGl0bGU6IHN0cgogICAgdXJsOiBzdHIKICAgIHNvdXJjZTogc3RyCiAg
ICBkZXNjcmlwdGlvbjogT3B0aW9uYWxbc3RyXSA9ICIiCiAgICBpbWFnZTogT3B0aW9uYWxbc3Ry
XSA9IE5vbmUgICMgQmFzZTY0IG8gVVJMIGRlIGxhIGltYXRnZQogICAgcHVibGlzaF9kYXRlOiBP
cHRpb25hbFtkYXRldGltZV0gPSBGaWVsZChkZWZhdWx0X2ZhY3Rvcnk9ZGF0ZXRpbWUudXRjbm93
KQogICAgZXhwaXJ5X2RhdGU6IE9wdGlvbmFsW2RhdGV0aW1lXSA9IE5vbmUgICMgRGF0YSBkZSBj
YWR1Y2l0YXQKICAgIGNyZWF0ZWRfYXQ6IGRhdGV0aW1lID0gRmllbGQoZGVmYXVsdF9mYWN0b3J5
PWRhdGV0aW1lLnV0Y25vdykKICAgIGlzX2F1dG9tYXRpYzogYm9vbCA9IFRydWUgICMgVHJ1ZSBz
aSDDqXMgYXV0b23DoHRpY2EsIEZhbHNlIHNpIG1hbnVhbAogICAgY2F0ZWdvcnk6IE9wdGlvbmFs
W3N0cl0gPSAiZ2VuZXJhbCIKCmNsYXNzIENsdWJDb250ZW50KEJhc2VNb2RlbCk6CiAgICB0aXRs
ZTogc3RyCiAgICB1cmw6IE9wdGlvbmFsW3N0cl0gPSAiIgogICAgZGVzY3JpcHRpb246IE9wdGlv
bmFsW3N0cl0gPSAiIgogICAgaW1hZ2U6IE9wdGlvbmFsW3N0cl0gPSBOb25lICAjIEJhc2U2NCBv
IFVSTCBkZSBsYSBpbWF0Z2UKICAgIHB1Ymxpc2hfZGF0ZTogT3B0aW9uYWxbZGF0ZXRpbWVdID0g
RmllbGQoZGVmYXVsdF9mYWN0b3J5PWRhdGV0aW1lLnV0Y25vdykKICAgIGV4cGlyeV9kYXRlOiBP
cHRpb25hbFtkYXRldGltZV0gPSBOb25lICAjIERhdGEgZGUgY2FkdWNpdGF0CiAgICBjcmVhdGVk
X2F0OiBkYXRldGltZSA9IEZpZWxkKGRlZmF1bHRfZmFjdG9yeT1kYXRldGltZS51dGNub3cpCiAg
ICBjYXRlZ29yeTogT3B0aW9uYWxbc3RyXSA9ICJhY3Rpdml0YXQiICAjIGFjdGl2aXRhdCwgYXZh
bnRhdGdlLCBwcmVtaSwgZXRjLgoKY2xhc3MgSW5mb0NvbnRlbnQoQmFzZU1vZGVsKToKICAgIHRp
dGxlOiBzdHIKICAgIGRlc2NyaXB0aW9uOiBzdHIKICAgIGltYWdlOiBPcHRpb25hbFtzdHJdID0g
Tm9uZSAgIyBCYXNlNjQgbyBVUkwgZGUgbGEgaW1hdGdlICg0eDYpCiAgICBjb250YWN0X2VtYWls
OiBPcHRpb25hbFtzdHJdID0gIiIKICAgIG9yZGVyOiBPcHRpb25hbFtpbnRdID0gMCAgIyBPcmRy
ZSBkZSB2aXN1YWxpdHphY2nDswogICAgY3JlYXRlZF9hdDogZGF0ZXRpbWUgPSBGaWVsZChkZWZh
dWx0X2ZhY3Rvcnk9ZGF0ZXRpbWUudXRjbm93KQogICAgaXNfYWN0aXZlOiBib29sID0gVHJ1ZQoK
Y2xhc3MgVGlja2V0KEJhc2VNb2RlbCk6CiAgICB0aWNrZXRfbnVtYmVyOiBzdHIgICMgTsO6bWVy
byDDum5pYyBkZWwgdGlxdWV0CiAgICBlc3RhYmxpc2htZW50X25hbWU6IHN0ciAgIyBOb20gZGUg
bCdlc3RhYmxpbWVudAogICAgYW1vdW50OiBmbG9hdCAgIyBJbXBvcnQgdG90YWwKICAgIHRpY2tl
dF9kYXRlOiBPcHRpb25hbFtkYXRldGltZV0gPSBOb25lICAjIERhdGEgZGVsIHRpcXVldAogICAg
aW1hZ2U6IHN0ciAgIyBJbWF0Z2UgZGVsIHRpcXVldCAoYmFzZTY0KQogICAgdXNlcl9pZDogc3Ry
ICAjIFVzdWFyaSBxdWUgcHVqYSBlbCB0aXF1ZXQKICAgIHBhcnRpY2lwYXRpb25zX2dlbmVyYXRl
ZDogaW50ICAjIFBhcnRpY2lwYWNpb25zIGdlbmVyYWRlcyAoYW1vdW50IC8vIDEwKQogICAgY3Jl
YXRlZF9hdDogZGF0ZXRpbWUgPSBGaWVsZChkZWZhdWx0X2ZhY3Rvcnk9ZGF0ZXRpbWUudXRjbm93
KQogICAgdmFsaWRhdGVkOiBib29sID0gRmFsc2UgICMgU2kgaGEgZXN0YXQgdmFsaWRhdCBwZXIg
YWRtaW4KICAgIApjbGFzcyBEcmF3UGFydGljaXBhdGlvbihCYXNlTW9kZWwpOgogICAgdXNlcl9p
ZDogc3RyCiAgICBwYXJ0aWNpcGF0aW9uczogaW50ICAjIE7Dum1lcm8gZGUgcGFydGljaXBhY2lv
bnMgYWN1bXVsYWRlcwogICAgdGlja2V0c19jb3VudDogaW50ICAjIE7Dum1lcm8gZGUgdGlxdWV0
cyBlc2NhbmVqYXRzCiAgICBsYXN0X3RpY2tldF9kYXRlOiBPcHRpb25hbFtkYXRldGltZV0gPSBO
b25lCiAgICAKY2xhc3MgRHJhdyhCYXNlTW9kZWwpOgogICAgZHJhd19kYXRlOiBkYXRldGltZQog
ICAgd2lubmVyX2lkOiBPcHRpb25hbFtzdHJdID0gTm9uZQogICAgd2lubmVyX25hbWU6IE9wdGlv
bmFsW3N0cl0gPSBOb25lCiAgICBwcml6ZV9kZXNjcmlwdGlvbjogc3RyCiAgICB0b3RhbF9wYXJ0
aWNpcGFudHM6IGludAogICAgdG90YWxfcGFydGljaXBhdGlvbnM6IGludAogICAgc3RhdHVzOiBz
dHIgPSAicGVuZGluZyIgICMgcGVuZGluZywgY29tcGxldGVkCgpjbGFzcyBUaWNrZXRDYW1wYWln
bihCYXNlTW9kZWwpOgogICAgdGl0bGU6IHN0ciA9ICJFc2NhbmVqYSBUaXF1ZXRzIGkgR3Vhbnlh
IFByZW1pcyIKICAgIGRlc2NyaXB0aW9uOiBPcHRpb25hbFtzdHJdID0gIiIKICAgIGltYWdlOiBP
cHRpb25hbFtzdHJdID0gTm9uZSAgIyBJbWF0Z2UgZGUgbGEgY2FtcGFueWEKICAgIHN0YXJ0X2Rh
dGU6IGRhdGV0aW1lCiAgICBlbmRfZGF0ZTogZGF0ZXRpbWUKICAgIHByaXplX2Rlc2NyaXB0aW9u
OiBzdHIKICAgIGlzX2FjdGl2ZTogYm9vbCA9IFRydWUKICAgIHRhZzogT3B0aW9uYWxbc3RyXSA9
IE5vbmUgICMgTWFyY2Fkb3IgcGVyIGZpbHRyYXIgdXN1YXJpcyBwYXJ0aWNpcGFudHMKICAgIGNy
ZWF0ZWRfYXQ6IGRhdGV0aW1lID0gRmllbGQoZGVmYXVsdF9mYWN0b3J5PWRhdGV0aW1lLnV0Y25v
dykKCmNsYXNzIEdpZnRDYXJkQmFzZShCYXNlTW9kZWwpOgogICAgYW1vdW50OiBmbG9hdAogICAg
Y29kZTogc3RyCiAgICB1c2VyX2lkOiBzdHIKICAgIGJhbGFuY2U6IGZsb2F0CiAgICBzdGF0dXM6
IHN0ciA9ICJhY3RpdmUiICAjIGFjdGl2ZSwgdXNlZCwgZXhwaXJlZAoKY2xhc3MgR2lmdENhcmRD
cmVhdGUoQmFzZU1vZGVsKToKICAgIGFtb3VudDogZmxvYXQKICAgIHVzZXJfaWQ6IHN0cgoKY2xh
c3MgR2lmdENhcmQoR2lmdENhcmRCYXNlKToKICAgIGlkOiBzdHIgPSBGaWVsZChhbGlhcz0iX2lk
IikKICAgIGNyZWF0ZWRfYXQ6IGRhdGV0aW1lID0gRmllbGQoZGVmYXVsdF9mYWN0b3J5PWRhdGV0
aW1lLnV0Y25vdykKICAgIAogICAgY2xhc3MgQ29uZmlnOgogICAgICAgIHBvcHVsYXRlX2J5X25h
bWUgPSBUcnVlCiAgICAgICAganNvbl9lbmNvZGVycyA9IHtPYmplY3RJZDogc3RyfQoKY2xhc3Mg
VGlja2V0U2NhbkJhc2UoQmFzZU1vZGVsKToKICAgIHVzZXJfaWQ6IHN0cgogICAgdGlja2V0X2Nv
ZGU6IHN0cgogICAgZXN0YWJsaXNobWVudF9pZDogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgIGFt
b3VudDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZQoKY2xhc3MgVGlja2V0U2NhbihUaWNrZXRTY2Fu
QmFzZSk6CiAgICBpZDogc3RyID0gRmllbGQoYWxpYXM9Il9pZCIpCiAgICBzY2FubmVkX2F0OiBk
YXRldGltZSA9IEZpZWxkKGRlZmF1bHRfZmFjdG9yeT1kYXRldGltZS51dGNub3cpCiAgICAKICAg
IGNsYXNzIENvbmZpZzoKICAgICAgICBwb3B1bGF0ZV9ieV9uYW1lID0gVHJ1ZQogICAgICAgIGpz
b25fZW5jb2RlcnMgPSB7T2JqZWN0SWQ6IHN0cn0KCmNsYXNzIFBheW1lbnRPcmRlckNyZWF0ZShC
YXNlTW9kZWwpOgogICAgYW1vdW50OiBmbG9hdAogICAgY3VycmVuY3k6IHN0ciA9ICJFVVIiCiAg
ICByZXR1cm5fdXJsOiBzdHIKICAgIGNhbmNlbF91cmw6IHN0cgoKY2xhc3MgQ29uc2VudEhpc3Rv
cnlCYXNlKEJhc2VNb2RlbCk6CiAgICB1c2VyX2lkOiBzdHIKICAgIGNvbnNlbnRfdHlwZTogc3Ry
ICAjICJkYXRhX3Byb3RlY3Rpb24iCiAgICBjb25zZW50X2dpdmVuOiBib29sCiAgICBjb25zZW50
X3RleHQ6IHN0cgogICAgaXBfYWRkcmVzczogT3B0aW9uYWxbc3RyXSA9IE5vbmUKCmNsYXNzIENv
bnNlbnRIaXN0b3J5KENvbnNlbnRIaXN0b3J5QmFzZSk6CiAgICBpZDogc3RyID0gRmllbGQoYWxp
YXM9Il9pZCIpCiAgICBjcmVhdGVkX2F0OiBkYXRldGltZSA9IEZpZWxkKGRlZmF1bHRfZmFjdG9y
eT1kYXRldGltZS51dGNub3cpCiAgICAKICAgIGNsYXNzIENvbmZpZzoKICAgICAgICBwb3B1bGF0
ZV9ieV9uYW1lID0gVHJ1ZQogICAgICAgIGpzb25fZW5jb2RlcnMgPSB7T2JqZWN0SWQ6IHN0cn0K
CmNsYXNzIFB1c2hUb2tlblVwZGF0ZShCYXNlTW9kZWwpOgogICAgcHVzaF90b2tlbjogc3RyCgoj
IEhlbHBlciBmdW5jdGlvbiBmb3IgYXV0aGVudGljYXRpb24KYXN5bmMgZGVmIGdldF91c2VyX2Zy
b21fdG9rZW4oYXV0aG9yaXphdGlvbjogc3RyKToKICAgICIiIk9idGVuaXIgdXN1YXJpIGRlcyBk
ZWwgdG9rZW4gZCdhdXRvcml0emFjacOzIiIiCiAgICBpZiBub3QgYXV0aG9yaXphdGlvbjoKICAg
ICAgICByZXR1cm4gTm9uZQogICAgCiAgICAjIFN1cG9ydGFyIGRpZmVyZW50cyBmb3JtYXRzIGRl
IHRva2VuCiAgICB0b2tlbiA9IGF1dGhvcml6YXRpb24ucmVwbGFjZSgiQmVhcmVyICIsICIiKS5y
ZXBsYWNlKCJ0b2tlbl8iLCAiIikKICAgIAogICAgdHJ5OgogICAgICAgICMgUHJpbWVyIGludGVu
dGFyIGJ1c2NhciBwZXIgdG9rZW4gZGlyZWN0YW1lbnQgKG5vdSBzaXN0ZW1hKQogICAgICAgIHVz
ZXIgPSBhd2FpdCBkYi51c2Vycy5maW5kX29uZSh7InRva2VuIjogdG9rZW59KQogICAgICAgIGlm
IHVzZXI6CiAgICAgICAgICAgIHJldHVybiB1c2VyCiAgICAgICAgCiAgICAgICAgIyBTaSBubyBl
cyB0cm9iYSwgaW50ZW50YXIgYnVzY2FyIHBlciBfaWQgKHNpc3RlbWEgYW50aWMgYW1iIHRva2Vu
XykKICAgICAgICB0cnk6CiAgICAgICAgICAgIHVzZXIgPSBhd2FpdCBkYi51c2Vycy5maW5kX29u
ZSh7Il9pZCI6IE9iamVjdElkKHRva2VuKX0pCiAgICAgICAgICAgIHJldHVybiB1c2VyCiAgICAg
ICAgZXhjZXB0OgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgZXhjZXB0IEV4Y2VwdGlvbjoK
ICAgICAgICByZXR1cm4gTm9uZQoKIyBBdXRoZW50aWNhdGlvbiBlbmRwb2ludHMKQGFwaV9yb3V0
ZXIucG9zdCgiL2F1dGgvcmVnaXN0ZXIiLCByZXNwb25zZV9tb2RlbD1Vc2VyKQphc3luYyBkZWYg
cmVnaXN0ZXIodXNlcl9kYXRhOiBVc2VyQ3JlYXRlKToKICAgICMgQ2hlY2sgaWYgdXNlciBleGlz
dHMKICAgIGV4aXN0aW5nX3VzZXIgPSBhd2FpdCBkYi51c2Vycy5maW5kX29uZSh7ImVtYWlsIjog
dXNlcl9kYXRhLmVtYWlsfSkKICAgIGlmIGV4aXN0aW5nX3VzZXI6CiAgICAgICAgcmFpc2UgSFRU
UEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDAsIGRldGFpbD0iRW1haWwgYWxyZWFkeSByZWdpc3Rl
cmVkIikKICAgIAogICAgIyBWYWxpZGFyIHF1ZSBoYSBhY2NlcHRhdCBlbCBjb25zZW50aW1lbnQK
ICAgIGlmIG5vdCB1c2VyX2RhdGEuZGF0YV9jb25zZW50OgogICAgICAgIHJhaXNlIEhUVFBFeGNl
cHRpb24oc3RhdHVzX2NvZGU9NDAwLCBkZXRhaWw9IkhhcyBkJ2FjY2VwdGFyIGxhIHBvbMOtdGlj
YSBkZSBwcm90ZWNjacOzIGRlIGRhZGVzIikKICAgIAogICAgIyBJbXBvcnRzIG5lY2Vzc2FyaXMK
ICAgIGltcG9ydCBzZWNyZXRzCiAgICBmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQogICAg
ZnJvbSBwYXNzbGliLmNvbnRleHQgaW1wb3J0IENyeXB0Q29udGV4dAogICAgCiAgICAjIEhhc2gg
cGFzc3dvcmQgYW1iIGJjcnlwdAogICAgcHdkX2NvbnRleHQgPSBDcnlwdENvbnRleHQoc2NoZW1l
cz1bImJjcnlwdCJdLCBkZXByZWNhdGVkPSJhdXRvIikKICAgIHVzZXJfZGljdCA9IHVzZXJfZGF0
YS5kaWN0KCkKICAgIHVzZXJfZGljdFsncGFzc3dvcmQnXSA9IHB3ZF9jb250ZXh0Lmhhc2godXNl
cl9kYXRhLnBhc3N3b3JkKQogICAgdXNlcl9kaWN0WydkYXRhX2NvbnNlbnRfZGF0ZSddID0gZGF0
ZXRpbWUudXRjbm93KCkKICAgIHVzZXJfZGljdFsnY3JlYXRlZF9hdCddID0gZGF0ZXRpbWUudXRj
bm93KCkKICAgIAogICAgIyBHZW5lcmFyIHRva2VuIGF1dG9tw6B0aWNhbWVudCBwZXIgYWwgbm91
IHVzdWFyaQogICAgdXNlcl9kaWN0Wyd0b2tlbiddID0gc2VjcmV0cy50b2tlbl91cmxzYWZlKDMy
KQogICAgCiAgICAjIEdlbmVyYXIgY29kaSDDum5pYyBkZSBtZW1icmUgKFFSIElEKSAtIEZvcm1h
dDogUkVVUy1ZWVlZTU1ERC1YWFhYWAogICAgZGF0ZV9zdHIgPSBkYXRldGltZS51dGNub3coKS5z
dHJmdGltZSgnJVklbSVkJykKICAgIHJhbmRvbV9jb2RlID0gc2VjcmV0cy50b2tlbl9oZXgoMyku
dXBwZXIoKSAgIyA2IGNhcsOgY3RlcnMgaGV4YWRlY2ltYWxzCiAgICB1c2VyX2RpY3RbJ21lbWJl
cl9jb2RlJ10gPSBmIlJFVVMte2RhdGVfc3RyfS17cmFuZG9tX2NvZGV9IgogICAgCiAgICByZXN1
bHQgPSBhd2FpdCBkYi51c2Vycy5pbnNlcnRfb25lKHVzZXJfZGljdCkKICAgIHVzZXJfaWQgPSBz
dHIocmVzdWx0Lmluc2VydGVkX2lkKQogICAgCiAgICAjIEd1YXJkYXIgaGlzdG9yaWFsIGRlIGNv
bnNlbnRpbWVudAogICAgY29uc2VudF9oaXN0b3J5ID0gewogICAgICAgICJ1c2VyX2lkIjogdXNl
cl9pZCwKICAgICAgICAiY29uc2VudF90eXBlIjogImRhdGFfcHJvdGVjdGlvbiIsCiAgICAgICAg
ImNvbnNlbnRfZ2l2ZW4iOiBUcnVlLAogICAgICAgICJjb25zZW50X3RleHQiOiBnZXRfcHJpdmFj
eV9wb2xpY3lfdGV4dCgpLAogICAgICAgICJjcmVhdGVkX2F0IjogZGF0ZXRpbWUudXRjbm93KCkK
ICAgIH0KICAgIGF3YWl0IGRiLmNvbnNlbnRfaGlzdG9yeS5pbnNlcnRfb25lKGNvbnNlbnRfaGlz
dG9yeSkKICAgIAogICAgdXNlcl9kaWN0WydfaWQnXSA9IHVzZXJfaWQKICAgIAogICAgcmV0dXJu
IFVzZXIoKip1c2VyX2RpY3QpCgpAYXBpX3JvdXRlci5wdXQoIi91c2Vycy9wdXNoLXRva2VuIikK
YXN5bmMgZGVmIHVwZGF0ZV9wdXNoX3Rva2VuKAogICAgdG9rZW5fZGF0YTogUHVzaFRva2VuVXBk
YXRlLAogICAgYXV0aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpCik6CiAgICAiIiJBY3R1
YWxpdHphciBlbCB0b2tlbiBwdXNoIGQndW4gdXN1YXJpIiIiCiAgICBpZiBub3QgYXV0aG9yaXph
dGlvbjoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMSwgZGV0YWls
PSJObyBhdXRob3JpemF0aW9uIHRva2VuIHByb3ZpZGVkIikKICAgIAogICAgdXNlciA9IGF3YWl0
IGdldF91c2VyX2Zyb21fdG9rZW4oYXV0aG9yaXphdGlvbikKICAgIGlmIG5vdCB1c2VyOgogICAg
ICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAxLCBkZXRhaWw9IkludmFsaWQg
dG9rZW4iKQogICAgCiAgICAjIEFjdHVhbGl0emFyIGVsIHB1c2ggdG9rZW4KCgpAYXBpX3JvdXRl
ci5wdXQoIi91c2Vycy9sYW5ndWFnZSIpCmFzeW5jIGRlZiB1cGRhdGVfdXNlcl9sYW5ndWFnZSgK
ICAgIHJlcXVlc3Q6IFJlcXVlc3QsCiAgICBhdXRob3JpemF0aW9uOiBzdHIgPSBIZWFkZXIoTm9u
ZSkKKToKICAgICIiIkFjdHVhbGl0emFyIGwnaWRpb21hIHByZWZlcml0IGRlIGwndXN1YXJpIiIi
CiAgICAjIFV0aWxpdHphciBnZXRfdXNlcl9mcm9tX3Rva2VuIHBlciBhdXRlbnRpY2FjacOzIGNv
bnNpc3RlbnQKICAgIHVzZXIgPSBhd2FpdCBnZXRfdXNlcl9mcm9tX3Rva2VuKGF1dGhvcml6YXRp
b24pCiAgICBpZiBub3QgdXNlcjoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19j
b2RlPTQwMSwgZGV0YWlsPSJObyBhdXRvcml0emF0IikKICAgIAogICAgIyBPYnRlbmlyIGRhZGVz
IGRlbCBib2R5CiAgICB0cnk6CiAgICAgICAgZGF0YSA9IGF3YWl0IHJlcXVlc3QuanNvbigpCiAg
ICAgICAgbGFuZ3VhZ2UgPSBkYXRhLmdldCgnbGFuZ3VhZ2UnKQogICAgZXhjZXB0OgogICAgICAg
IHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAwLCBkZXRhaWw9IkJvZHkgSlNPTiBp
bnbDoGxpZCIpCiAgICAKICAgIGlmIG5vdCBsYW5ndWFnZToKICAgICAgICByYWlzZSBIVFRQRXhj
ZXB0aW9uKHN0YXR1c19jb2RlPTQwMCwgZGV0YWlsPSJDYW1wICdsYW5ndWFnZScgcmVxdWVyaXQi
KQogICAgCiAgICAjIFZhbGlkYXIgaWRpb21hCiAgICB2YWxpZF9sYW5ndWFnZXMgPSBbJ2NhJywg
J2VzJywgJ2VuJywgJ2ZyJywgJ2l0JywgJ3J1J10KICAgIGlmIGxhbmd1YWdlIG5vdCBpbiB2YWxp
ZF9sYW5ndWFnZXM6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDAs
IGRldGFpbD1mIklkaW9tYSBubyB2w6BsaWQuIE9wY2lvbnM6IHsnLCAnLmpvaW4odmFsaWRfbGFu
Z3VhZ2VzKX0iKQogICAgCiAgICAjIEFjdHVhbGl0emFyIGlkaW9tYQogICAgYXdhaXQgZGIudXNl
cnMudXBkYXRlX29uZSgKICAgICAgICB7Il9pZCI6IHVzZXJbJ19pZCddfSwKICAgICAgICB7IiRz
ZXQiOiB7Imxhbmd1YWdlIjogbGFuZ3VhZ2V9fQogICAgKQogICAgCiAgICByZXR1cm4geyJzdWNj
ZXNzIjogVHJ1ZSwgImxhbmd1YWdlIjogbGFuZ3VhZ2V9CgpAYXBpX3JvdXRlci5wb3N0KCIvYXV0
aC9sb2dpbiIpCmFzeW5jIGRlZiBsb2dpbihlbWFpbDogc3RyLCBwYXNzd29yZDogc3RyKToKICAg
IGZyb20gcGFzc2xpYi5jb250ZXh0IGltcG9ydCBDcnlwdENvbnRleHQKICAgIHB3ZF9jb250ZXh0
ID0gQ3J5cHRDb250ZXh0KHNjaGVtZXM9WyJiY3J5cHQiXSwgZGVwcmVjYXRlZD0iYXV0byIpCiAg
ICAKICAgIGxvZ2dlci5pbmZvKGYiTG9naW4gYXR0ZW1wdCBmb3IgZW1haWw6IHtlbWFpbH0iKQog
ICAgdXNlciA9IGF3YWl0IGRiLnVzZXJzLmZpbmRfb25lKHsiZW1haWwiOiBlbWFpbH0pCiAgICBp
ZiBub3QgdXNlcjoKICAgICAgICBsb2dnZXIud2FybmluZyhmIlVzZXIgbm90IGZvdW5kOiB7ZW1h
aWx9IikKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMSwgZGV0YWls
PSJJbnZhbGlkIGNyZWRlbnRpYWxzIikKICAgIAogICAgbG9nZ2VyLmluZm8oZiJVc2VyIGZvdW5k
OiB7ZW1haWx9LCB2ZXJpZnlpbmcgcGFzc3dvcmQuLi4iKQogICAgIyBWZXJpZmljYXIgY29udHJh
c2VueWEgYW1iIGJjcnlwdAogICAgdHJ5OgogICAgICAgIGlzX3ZhbGlkID0gcHdkX2NvbnRleHQu
dmVyaWZ5KHBhc3N3b3JkLCB1c2VyLmdldCgncGFzc3dvcmQnKSkKICAgICAgICBsb2dnZXIuaW5m
byhmIlBhc3N3b3JkIHZlcmlmaWNhdGlvbiByZXN1bHQ6IHtpc192YWxpZH0iKQogICAgICAgIGlm
IG5vdCBpc192YWxpZDoKICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29k
ZT00MDEsIGRldGFpbD0iSW52YWxpZCBjcmVkZW50aWFscyIpCiAgICBleGNlcHQgRXhjZXB0aW9u
IGFzIGU6CiAgICAgICAgbG9nZ2VyLmVycm9yKGYiUGFzc3dvcmQgdmVyaWZpY2F0aW9uIGVycm9y
OiB7ZX0iKQogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAxLCBkZXRh
aWw9IkludmFsaWQgY3JlZGVudGlhbHMiKQogICAgCiAgICAjIEdlbmVyYXIgaSBndWFyZGFyIHRv
a2VuIGEgbGEgYmFzZSBkZSBkYWRlcwogICAgaW1wb3J0IHNlY3JldHMKICAgIHRva2VuID0gc2Vj
cmV0cy50b2tlbl91cmxzYWZlKDMyKQogICAgCiAgICBhd2FpdCBkYi51c2Vycy51cGRhdGVfb25l
KAogICAgICAgIHsiX2lkIjogdXNlclsnX2lkJ119LAogICAgICAgIHsiJHNldCI6IHsidG9rZW4i
OiB0b2tlbn19CiAgICApCiAgICAKICAgIHVzZXJbJ19pZCddID0gc3RyKHVzZXJbJ19pZCddKQog
ICAgdXNlclsndG9rZW4nXSA9IHRva2VuCiAgICByZXR1cm4geyJ1c2VyIjogdXNlciwgInRva2Vu
IjogdG9rZW59CgojIE5ldXJvbW9iaWxlIEludGVncmF0aW9uIGVuZHBvaW50cwpAYXBpX3JvdXRl
ci5nZXQoIi9teS1lc3RhYmxpc2htZW50IikKYXN5bmMgZGVmIGdldF9teV9lc3RhYmxpc2htZW50
KGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRlcihOb25lKSk6CiAgICAiIiJPYnRlbmlyIGwnZXN0
YWJsaW1lbnQgZGVsIGxvY2FsIGFzc29jaWF0IiIiCiAgICBpZiBub3QgYXV0aG9yaXphdGlvbjoK
ICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMSwgZGV0YWlsPSJObyBh
dXRob3JpemF0aW9uIHRva2VuIHByb3ZpZGVkIikKICAgIAogICAgdXNlciA9IGF3YWl0IGdldF91
c2VyX2Zyb21fdG9rZW4oYXV0aG9yaXphdGlvbikKICAgIGlmIG5vdCB1c2VyOgogICAgICAgIHJh
aXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAxLCBkZXRhaWw9IkludmFsaWQgdG9rZW4i
KQogICAgCiAgICBpZiB1c2VyLmdldCgncm9sZScpIG5vdCBpbiBbJ2xvY2FsX2Fzc29jaWF0Jywg
J2FkbWluJ106CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDMsIGRl
dGFpbD0iT25seSBsb2NhbCBhc3NvY2lhdGVzIGNhbiBhY2Nlc3MgdGhpcyIpCiAgICAKICAgICMg
QnVzY2FyIGVzdGFibGltZW50IGRlbCBsb2NhbCBhc3NvY2lhdAogICAgZXN0YWJsaXNobWVudCA9
IGF3YWl0IGRiLmVzdGFibGlzaG1lbnRzLmZpbmRfb25lKHsib3duZXJfaWQiOiB1c2VyWydfaWQn
XX0pCiAgICAKICAgIGlmIGVzdGFibGlzaG1lbnQ6CiAgICAgICAgZXN0YWJsaXNobWVudFsnX2lk
J10gPSBzdHIoZXN0YWJsaXNobWVudFsnX2lkJ10pCiAgICAgICAgZXN0YWJsaXNobWVudFsnaWQn
XSA9IHN0cihlc3RhYmxpc2htZW50LmdldCgnX2lkJykpCiAgICAgICAgIyBDb252ZXJ0aXIgb3du
ZXJfaWQgYSBzdHJpbmcgc2kgZXhpc3RlaXgKICAgICAgICBpZiBlc3RhYmxpc2htZW50LmdldCgn
b3duZXJfaWQnKToKICAgICAgICAgICAgZXN0YWJsaXNobWVudFsnb3duZXJfaWQnXSA9IHN0cihl
c3RhYmxpc2htZW50Wydvd25lcl9pZCddKQogICAgICAgIHJldHVybiBlc3RhYmxpc2htZW50CiAg
ICAKICAgIHJldHVybiBOb25lCgpAYXBpX3JvdXRlci5wb3N0KCIvbXktZXN0YWJsaXNobWVudCIp
CmFzeW5jIGRlZiBjcmVhdGVfbXlfZXN0YWJsaXNobWVudCgKICAgIGVzdGFibGlzaG1lbnQ6IEVz
dGFibGlzaG1lbnRCYXNlLAogICAgYXV0aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpCik6
CiAgICAiIiJDcmVhciBlc3RhYmxpbWVudCBwZWwgbG9jYWwgYXNzb2NpYXQiIiIKICAgIGlmIG5v
dCBhdXRob3JpemF0aW9uOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9
NDAxLCBkZXRhaWw9Ik5vIGF1dGhvcml6YXRpb24gdG9rZW4gcHJvdmlkZWQiKQogICAgCiAgICB1
c2VyID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihhdXRob3JpemF0aW9uKQogICAgaWYgbm90
IHVzZXI6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDEsIGRldGFp
bD0iSW52YWxpZCB0b2tlbiIpCiAgICAKICAgIGlmIHVzZXIuZ2V0KCdyb2xlJykgbm90IGluIFsn
bG9jYWxfYXNzb2NpYXQnLCAnYWRtaW4nXToKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0
YXR1c19jb2RlPTQwMywgZGV0YWlsPSJPbmx5IGxvY2FsIGFzc29jaWF0ZXMgY2FuIGNyZWF0ZSBl
c3RhYmxpc2htZW50cyIpCiAgICAKICAgICMgVmVyaWZpY2FyIHNpIGphIHTDqSB1biBlc3RhYmxp
bWVudAogICAgZXhpc3RpbmcgPSBhd2FpdCBkYi5lc3RhYmxpc2htZW50cy5maW5kX29uZSh7Im93
bmVyX2lkIjogdXNlclsnX2lkJ119KQogICAgaWYgZXhpc3Rpbmc6CiAgICAgICAgcmFpc2UgSFRU
UEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDAsIGRldGFpbD0iWW91IGFscmVhZHkgaGF2ZSBhbiBl
c3RhYmxpc2htZW50IikKICAgIAogICAgIyBDcmVhciBlc3RhYmxpbWVudAogICAgZXN0YWJsaXNo
bWVudF9kaWN0ID0gZXN0YWJsaXNobWVudC5kaWN0KCkKICAgIGVzdGFibGlzaG1lbnRfZGljdFsn
b3duZXJfaWQnXSA9IHVzZXJbJ19pZCddCiAgICBlc3RhYmxpc2htZW50X2RpY3RbJ2NyZWF0ZWRf
YXQnXSA9IGRhdGV0aW1lLnV0Y25vdygpCiAgICAKICAgICMgR2VuZXJhciBjb2RpIMO6bmljIGQn
ZXN0YWJsaW1lbnQgc2kgbm8gZXhpc3RlaXgKICAgIGlmIG5vdCBlc3RhYmxpc2htZW50X2RpY3Qu
Z2V0KCdlc3RhYmxpc2htZW50X2NvZGUnKToKICAgICAgICBpbXBvcnQgc2VjcmV0cwogICAgICAg
IGRhdGVfc3RyID0gZGF0ZXRpbWUudXRjbm93KCkuc3RyZnRpbWUoJyVZJW0lZCcpCiAgICAgICAg
cmFuZG9tX2NvZGUgPSBzZWNyZXRzLnRva2VuX2hleCgzKS51cHBlcigpCiAgICAgICAgZXN0YWJs
aXNobWVudF9kaWN0Wydlc3RhYmxpc2htZW50X2NvZGUnXSA9IGYiRVNUQUIte2RhdGVfc3RyfS17
cmFuZG9tX2NvZGV9IgogICAgCiAgICByZXN1bHQgPSBhd2FpdCBkYi5lc3RhYmxpc2htZW50cy5p
bnNlcnRfb25lKGVzdGFibGlzaG1lbnRfZGljdCkKICAgIAogICAgIyBBY3R1YWxpdHphciB1c2Vy
IGFtYiBlc3RhYmxpc2htZW50X2lkCiAgICBhd2FpdCBkYi51c2Vycy51cGRhdGVfb25lKAogICAg
ICAgIHsiX2lkIjogT2JqZWN0SWQodXNlclsnX2lkJ10pfSwKICAgICAgICB7IiRzZXQiOiB7ImVz
dGFibGlzaG1lbnRfaWQiOiBzdHIocmVzdWx0Lmluc2VydGVkX2lkKX19CiAgICApCiAgICAKICAg
IHJldHVybiB7ImlkIjogc3RyKHJlc3VsdC5pbnNlcnRlZF9pZCksICJtZXNzYWdlIjogIkVzdGFi
bGlzaG1lbnQgY3JlYXRlZCBzdWNjZXNzZnVsbHkifQoKQGFwaV9yb3V0ZXIucHV0KCIvbXktZXN0
YWJsaXNobWVudCIpCmFzeW5jIGRlZiB1cGRhdGVfbXlfZXN0YWJsaXNobWVudCgKICAgIGVzdGFi
bGlzaG1lbnQ6IEVzdGFibGlzaG1lbnRCYXNlLAogICAgYXV0aG9yaXphdGlvbjogc3RyID0gSGVh
ZGVyKE5vbmUpCik6CiAgICAiIiJBY3R1YWxpdHphciBlc3RhYmxpbWVudCBkZWwgbG9jYWwgYXNz
b2NpYXQiIiIKICAgIGlmIG5vdCBhdXRob3JpemF0aW9uOgogICAgICAgIHJhaXNlIEhUVFBFeGNl
cHRpb24oc3RhdHVzX2NvZGU9NDAxLCBkZXRhaWw9Ik5vIGF1dGhvcml6YXRpb24gdG9rZW4gcHJv
dmlkZWQiKQogICAgCiAgICB1c2VyID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihhdXRob3Jp
emF0aW9uKQogICAgaWYgbm90IHVzZXI6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0
dXNfY29kZT00MDEsIGRldGFpbD0iSW52YWxpZCB0b2tlbiIpCiAgICAKICAgIGlmIHVzZXIuZ2V0
KCdyb2xlJykgbm90IGluIFsnbG9jYWxfYXNzb2NpYXQnLCAnYWRtaW4nXToKICAgICAgICByYWlz
ZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMywgZGV0YWlsPSJPbmx5IGxvY2FsIGFzc29j
aWF0ZXMgY2FuIHVwZGF0ZSBlc3RhYmxpc2htZW50cyIpCiAgICAKICAgICMgQnVzY2FyIGVzdGFi
bGltZW50CiAgICBleGlzdGluZyA9IGF3YWl0IGRiLmVzdGFibGlzaG1lbnRzLmZpbmRfb25lKHsi
b3duZXJfaWQiOiB1c2VyWydfaWQnXX0pCiAgICBpZiBub3QgZXhpc3Rpbmc6CiAgICAgICAgcmFp
c2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iTm8gZXN0YWJsaXNobWVu
dCBmb3VuZCIpCiAgICAKICAgICMgQWN0dWFsaXR6YXIKICAgIHVwZGF0ZV9kYXRhID0ge2s6IHYg
Zm9yIGssIHYgaW4gZXN0YWJsaXNobWVudC5kaWN0KCkuaXRlbXMoKSBpZiB2IGlzIG5vdCBOb25l
fQogICAgCiAgICBhd2FpdCBkYi5lc3RhYmxpc2htZW50cy51cGRhdGVfb25lKAogICAgICAgIHsi
X2lkIjogZXhpc3RpbmdbJ19pZCddfSwKICAgICAgICB7IiRzZXQiOiB1cGRhdGVfZGF0YX0KICAg
ICkKICAgIAogICAgcmV0dXJuIHsibWVzc2FnZSI6ICJFc3RhYmxpc2htZW50IHVwZGF0ZWQgc3Vj
Y2Vzc2Z1bGx5In0KCkBhcGlfcm91dGVyLmdldCgiL2VzdGFibGlzaG1lbnRzIikKYXN5bmMgZGVm
IGdldF9lc3RhYmxpc2htZW50cygpOgogICAgdHJ5OgogICAgICAgICMgTkVVUk9NT0JJTEUgREVT
QUNUSVZBVCAtIFV0aWxpdHphbnQgbm9tw6lzIGRhZGVzIGxvY2FscyBkZSBNb25nb0RCCiAgICAg
ICAgaWYgVHJ1ZTogICMgbm90IE5FVVJPTU9CSUxFX1RPS0VOOgogICAgICAgICAgICBsb2dnZXIu
aW5mbygiTmV1cm9tb2JpbGUgdGVtcG9yYWxtZW50IGRlc2FjdGl2YXQsIHVzaW5nIGxvY2FsIGRh
dGEgb25seSIpCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVzaW5nIGxvY2FsIE1vbmdv
REIgZGF0YSAtIE5ldXJvbW9iaWxlIGRpc2FibGVkIikKICAgICAgICAKICAgICAgICAjIFRyeSB0
byBmZXRjaCBmcm9tIE5ldXJvbW9iaWxlIEFQSQogICAgICAgICMgQ29uZmlndXJhciBjbGllbnQg
YW1iIG1pbGxvciBnZXN0acOzIFNTTAogICAgICAgIGltcG9ydCBzc2wKICAgICAgICBzc2xfY29u
dGV4dCA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkKICAgICAgICBzc2xfY29udGV4dC5j
aGVja19ob3N0bmFtZSA9IEZhbHNlCiAgICAgICAgc3NsX2NvbnRleHQudmVyaWZ5X21vZGUgPSBz
c2wuQ0VSVF9OT05FCiAgICAgICAgCiAgICAgICAgYXN5bmMgd2l0aCBodHRweC5Bc3luY0NsaWVu
dCh2ZXJpZnk9c3NsX2NvbnRleHQpIGFzIGNsaWVudDoKICAgICAgICAgICAgaGVhZGVycyA9IHsK
ICAgICAgICAgICAgICAgICJBdXRob3JpemF0aW9uIjogZiJCZWFyZXIge05FVVJPTU9CSUxFX1RP
S0VOfSIsCiAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24i
CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuZ2V0KAog
ICAgICAgICAgICAgICAgZiJ7TkVVUk9NT0JJTEVfQVBJX0JBU0V9L2NvbW1lcmNlcyIsCiAgICAg
ICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsCiAgICAgICAgICAgICAgICB0aW1lb3V0PTE1LjAK
ICAgICAgICAgICAgKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVz
X2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgY29tbWVyY2VzID0gcmVzcG9uc2UuanNvbigp
CiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIkZldGNoZWQge2xlbihjb21tZXJjZXMpfSBj
b21tZXJjZXMgZnJvbSBOZXVyb21vYmlsZSIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAg
ICAgICMgU3RvcmUgaW4gTW9uZ29EQiBmb3IgY2FjaGluZwogICAgICAgICAgICAgICAgZm9yIGNv
bW1lcmNlIGluIGNvbW1lcmNlczoKICAgICAgICAgICAgICAgICAgICAjIEFzc2VndXJhciBxdWUg
ZWxzIGNhbXBzIGV4aXN0ZWl4ZW4KICAgICAgICAgICAgICAgICAgICBjb21tZXJjZV9kYXRhID0g
ewogICAgICAgICAgICAgICAgICAgICAgICAiX2lkIjogY29tbWVyY2UuZ2V0KCJpZCIsIHN0cihP
YmplY3RJZCgpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogY29tbWVyY2UuZ2V0
KCJuYW1lIiwgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICAiYWRkcmVzcyI6IGNvbW1lcmNl
LmdldCgiYWRkcmVzcyIpLAogICAgICAgICAgICAgICAgICAgICAgICAibGF0aXR1ZGUiOiBjb21t
ZXJjZS5nZXQoImxhdGl0dWRlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICJsb25naXR1ZGUi
OiBjb21tZXJjZS5nZXQoImxvbmdpdHVkZSIpLAogICAgICAgICAgICAgICAgICAgICAgICAicGhv
bmUiOiBjb21tZXJjZS5nZXQoInBob25lIiksCiAgICAgICAgICAgICAgICAgICAgICAgICJlbWFp
bCI6IGNvbW1lcmNlLmdldCgiZW1haWwiKSwKICAgICAgICAgICAgICAgICAgICAgICAgImNhdGVn
b3J5IjogY29tbWVyY2UuZ2V0KCJjYXRlZ29yeSIpLAogICAgICAgICAgICAgICAgICAgICAgICAi
ZGVzY3JpcHRpb24iOiBjb21tZXJjZS5nZXQoImRlc2NyaXB0aW9uIiksCiAgICAgICAgICAgICAg
ICAgICAgICAgICJpbWFnZV91cmwiOiBjb21tZXJjZS5nZXQoImltYWdlX3VybCIpLAogICAgICAg
ICAgICAgICAgICAgICAgICAidXBkYXRlZF9hdCI6IGRhdGV0aW1lLnV0Y25vdygpCiAgICAgICAg
ICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGF3
YWl0IGRiLmVzdGFibGlzaG1lbnRzLnVwZGF0ZV9vbmUoCiAgICAgICAgICAgICAgICAgICAgICAg
IHsiX2lkIjogY29tbWVyY2VfZGF0YVsiX2lkIl19LAogICAgICAgICAgICAgICAgICAgICAgICB7
IiRzZXQiOiBjb21tZXJjZV9kYXRhfSwKICAgICAgICAgICAgICAgICAgICAgICAgdXBzZXJ0PVRy
dWUKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAg
ICMgQWZlZ2lyIGVzdGFibGltZW50cyBsb2NhbHMgcXVlIG5vIGVzdGFuIGEgTmV1cm9tb2JpbGUK
ICAgICAgICAgICAgICAgIG5ldXJvbW9iaWxlX2lkcyA9IFtjLmdldCgiaWQiKSBmb3IgYyBpbiBj
b21tZXJjZXNdCiAgICAgICAgICAgICAgICBsb2NhbF9lc3RhYmxpc2htZW50cyA9IGF3YWl0IGRi
LmVzdGFibGlzaG1lbnRzLmZpbmQoewogICAgICAgICAgICAgICAgICAgICIkYW5kIjogWwogICAg
ICAgICAgICAgICAgICAgICAgICB7Il9pZCI6IHsiJG5pbiI6IG5ldXJvbW9iaWxlX2lkc319LAog
ICAgICAgICAgICAgICAgICAgICAgICB7InN0YXR1cyI6ICJBIFNvY2kifSwKICAgICAgICAgICAg
ICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgIiRvciI6IFsKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB7InZpc2libGVfaW5fcHVibGljX2xpc3QiOiBUcnVl
fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7InZpc2libGVfaW5fcHVibGljX2xp
c3QiOiB7IiRleGlzdHMiOiBGYWxzZX19CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAg
ICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAg
ICAgICB9KS50b19saXN0KDEwMDApCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMg
Q29udmVydGlyIE9iamVjdElkIGEgc3RyaW5nIHBlciBhbHMgbG9jYWxzCiAgICAgICAgICAgICAg
ICBmb3IgZXN0IGluIGxvY2FsX2VzdGFibGlzaG1lbnRzOgogICAgICAgICAgICAgICAgICAgIGVz
dFsnX2lkJ10gPSBzdHIoZXN0WydfaWQnXSkKICAgICAgICAgICAgICAgICAgICBlc3RbJ2lkJ10g
PSBlc3RbJ19pZCddCiAgICAgICAgICAgICAgICAgICAgaWYgZXN0LmdldCgnb3duZXJfaWQnKToK
ICAgICAgICAgICAgICAgICAgICAgICAgZXN0Wydvd25lcl9pZCddID0gc3RyKGVzdFsnb3duZXJf
aWQnXSkKICAgICAgICAgICAgICAgICAgICBjb21tZXJjZXMuYXBwZW5kKGVzdCkKICAgICAgICAg
ICAgICAgIAogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiJBZGRlZCB7bGVuKGxvY2FsX2Vz
dGFibGlzaG1lbnRzKX0gbG9jYWwgZXN0YWJsaXNobWVudHMiKQogICAgICAgICAgICAgICAgcmV0
dXJuIGNvbW1lcmNlcwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbG9nZ2VyLmVy
cm9yKGYiRmFpbGVkIHRvIGZldGNoIGZyb20gTmV1cm9tb2JpbGU6IHtyZXNwb25zZS5zdGF0dXNf
Y29kZX0iKQogICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nZ2VyLmVy
cm9yKGYiRXJyb3IgZmV0Y2hpbmcgZnJvbSBOZXVyb21vYmlsZToge3N0cihlKX0iKQogICAgCiAg
ICAjIEZhbGxiYWNrIHRvIE1vbmdvREIgLSBub23DqXMgZXN0YWJsaW1lbnRzIHZpc2libGVzIHDD
umJsaWNhbWVudCBpIHNvY2lzIGFjdGl1cwogICAgZXN0YWJsaXNobWVudHMgPSBhd2FpdCBkYi5l
c3RhYmxpc2htZW50cy5maW5kKHsKICAgICAgICAiJGFuZCI6IFsKICAgICAgICAgICAgIyBOb23D
qXMgc29jaXMgYWN0aXVzCiAgICAgICAgICAgIHsic3RhdHVzIjogIkEgU29jaSJ9LAogICAgICAg
ICAgICAjIEkgdmlzaWJsZXMgcMO6YmxpY2FtZW50CiAgICAgICAgICAgIHsKICAgICAgICAgICAg
ICAgICIkb3IiOiBbCiAgICAgICAgICAgICAgICAgICAgeyJ2aXNpYmxlX2luX3B1YmxpY19saXN0
IjogVHJ1ZX0sCiAgICAgICAgICAgICAgICAgICAgeyJ2aXNpYmxlX2luX3B1YmxpY19saXN0Ijog
eyIkZXhpc3RzIjogRmFsc2V9fSAgIyBQZXIgY29tcGF0aWJpbGl0YXQgYW1iIGVzdGFibGltZW50
cyBhbnRpY3MKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfQogICAgICAgIF0KICAgIH0p
LnRvX2xpc3QoMTAwMCkKICAgIAogICAgbG9nZ2VyLmluZm8oZiJSZXR1cm5pbmcge2xlbihlc3Rh
Ymxpc2htZW50cyl9IGVzdGFibGlzaG1lbnRzIGZyb20gTW9uZ29EQiBmYWxsYmFjayIpCiAgICAK
ICAgIGZvciBlc3QgaW4gZXN0YWJsaXNobWVudHM6CiAgICAgICAgZXN0WydfaWQnXSA9IHN0cihl
c3RbJ19pZCddKQogICAgICAgIGVzdFsnaWQnXSA9IGVzdFsnX2lkJ10KICAgICAgICAjIENvbnZl
cnRpciBvd25lcl9pZCBhIHN0cmluZyBzaSBleGlzdGVpeAogICAgICAgIGlmIGVzdC5nZXQoJ293
bmVyX2lkJyk6CiAgICAgICAgICAgIGVzdFsnb3duZXJfaWQnXSA9IHN0cihlc3RbJ293bmVyX2lk
J10pCiAgICByZXR1cm4gZXN0YWJsaXNobWVudHMKCkBhcGlfcm91dGVyLmdldCgiL2VzdGFibGlz
aG1lbnRzL3tlc3RhYmxpc2htZW50X2lkfSIpCmFzeW5jIGRlZiBnZXRfZXN0YWJsaXNobWVudChl
c3RhYmxpc2htZW50X2lkOiBzdHIpOgogICAgZXN0ID0gYXdhaXQgZGIuZXN0YWJsaXNobWVudHMu
ZmluZF9vbmUoeyJfaWQiOiBPYmplY3RJZChlc3RhYmxpc2htZW50X2lkKX0pCiAgICBpZiBub3Qg
ZXN0OgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDA0LCBkZXRhaWw9
IkVzdGFibGlzaG1lbnQgbm90IGZvdW5kIikKICAgIGVzdFsnX2lkJ10gPSBzdHIoZXN0WydfaWQn
XSkKICAgICMgQ29udmVydGlyIG93bmVyX2lkIGEgc3RyaW5nIHNpIGV4aXN0ZWl4CiAgICBpZiBl
c3QuZ2V0KCdvd25lcl9pZCcpOgogICAgICAgIGVzdFsnb3duZXJfaWQnXSA9IHN0cihlc3RbJ293
bmVyX2lkJ10pCiAgICByZXR1cm4gZXN0CgpAYXBpX3JvdXRlci5wdXQoIi9hZG1pbi9lc3RhYmxp
c2htZW50cy97ZXN0YWJsaXNobWVudF9pZH0iKQphc3luYyBkZWYgdXBkYXRlX2VzdGFibGlzaG1l
bnQoCiAgICBlc3RhYmxpc2htZW50X2lkOiBzdHIsCiAgICBlc3RhYmxpc2htZW50OiBFc3RhYmxp
c2htZW50QmFzZSwKICAgIGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRlcihOb25lKQopOgogICAg
IiIiQWN0dWFsaXR6YXIgZXN0YWJsaW1lbnQgKG5vbcOpcyBhZG1pbikiIiIKICAgIGlmIG5vdCBh
dXRob3JpemF0aW9uOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAx
LCBkZXRhaWw9Ik5vIGF1dGhvcml6YXRpb24gdG9rZW4gcHJvdmlkZWQiKQogICAgCiAgICB1c2Vy
ID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihhdXRob3JpemF0aW9uKQogICAgaWYgbm90IHVz
ZXIgb3IgdXNlci5nZXQoJ3JvbGUnKSAhPSAnYWRtaW4nOgogICAgICAgIHJhaXNlIEhUVFBFeGNl
cHRpb24oc3RhdHVzX2NvZGU9NDAzLCBkZXRhaWw9Ik9ubHkgYWRtaW5zIGNhbiB1cGRhdGUgZXN0
YWJsaXNobWVudHMiKQogICAgCiAgICAjIFZlcmlmaWNhciBxdWUgbCdlc3RhYmxpbWVudCBleGlz
dGVpeAogICAgZXhpc3RpbmcgPSBhd2FpdCBkYi5lc3RhYmxpc2htZW50cy5maW5kX29uZSh7Il9p
ZCI6IE9iamVjdElkKGVzdGFibGlzaG1lbnRfaWQpfSkKICAgIGlmIG5vdCBleGlzdGluZzoKICAg
ICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJFc3RhYmxp
c2htZW50IG5vdCBmb3VuZCIpCiAgICAKICAgICMgQWN0dWFsaXR6YXIgZXN0YWJsaW1lbnQKICAg
IGVzdGFibGlzaG1lbnRfZGljdCA9IGVzdGFibGlzaG1lbnQuZGljdChleGNsdWRlX3Vuc2V0PVRy
dWUpCiAgICBlc3RhYmxpc2htZW50X2RpY3RbJ3VwZGF0ZWRfYXQnXSA9IGRhdGV0aW1lLnV0Y25v
dygpCiAgICAKICAgIGF3YWl0IGRiLmVzdGFibGlzaG1lbnRzLnVwZGF0ZV9vbmUoCiAgICAgICAg
eyJfaWQiOiBPYmplY3RJZChlc3RhYmxpc2htZW50X2lkKX0sCiAgICAgICAgeyIkc2V0IjogZXN0
YWJsaXNobWVudF9kaWN0fQogICAgKQogICAgCiAgICByZXR1cm4geyJzdWNjZXNzIjogVHJ1ZSwg
Im1lc3NhZ2UiOiAiRXN0YWJsaXNobWVudCB1cGRhdGVkIHN1Y2Nlc3NmdWxseSJ9CgojIE9mZmVy
cyBlbmRwb2ludHMKQGFwaV9yb3V0ZXIuZ2V0KCIvb2ZmZXJzIikKYXN5bmMgZGVmIGdldF9vZmZl
cnMoKToKICAgICIiIk9idGVuaXIgb2ZlcnRlcyBhY3RpdmVzIChubyBjYWR1Y2FkZXMpIHBlciBh
bCBkaXJlY3RvcmkgcMO6YmxpYyIiIgogICAgZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUK
ICAgIAogICAgIyBGaWx0cmFyIG5vbcOpcyBvZmVydGVzIG5vIGNhZHVjYWRlcyAodmFsaWRfdW50
aWwgPiBhcmEpCiAgICBjdXJyZW50X3RpbWUgPSBkYXRldGltZS5ub3coKQogICAgb2ZmZXJzID0g
YXdhaXQgZGIub2ZmZXJzLmZpbmQoewogICAgICAgICJ2YWxpZF91bnRpbCI6IHsiJGd0ZSI6IGN1
cnJlbnRfdGltZX0KICAgIH0pLnNvcnQoImNyZWF0ZWRfYXQiLCAtMSkudG9fbGlzdCgxMDApCiAg
ICAKICAgIGZvciBvZmZlciBpbiBvZmZlcnM6CiAgICAgICAgb2ZmZXJbJ19pZCddID0gc3RyKG9m
ZmVyWydfaWQnXSkKICAgICAgICBvZmZlclsnaWQnXSA9IHN0cihvZmZlclsnX2lkJ10pCiAgICBy
ZXR1cm4gb2ZmZXJzCgpAYXBpX3JvdXRlci5nZXQoIi9vZmZlcnMve29mZmVyX2lkfSIpCmFzeW5j
IGRlZiBnZXRfb2ZmZXIob2ZmZXJfaWQ6IHN0cik6CiAgICBvZmZlciA9IGF3YWl0IGRiLm9mZmVy
cy5maW5kX29uZSh7Il9pZCI6IE9iamVjdElkKG9mZmVyX2lkKX0pCiAgICBpZiBub3Qgb2ZmZXI6
CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iT2Zm
ZXIgbm90IGZvdW5kIikKICAgIG9mZmVyWydfaWQnXSA9IHN0cihvZmZlclsnX2lkJ10pCiAgICBv
ZmZlclsnaWQnXSA9IHN0cihvZmZlclsnX2lkJ10pCiAgICByZXR1cm4gb2ZmZXIKCgojID09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0KIyBMT0NBTCBBU1NPQ0lBVCAtIEdlc3Rpw7MgZCdPZmVydGVzCiMgPT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PQoKQGFwaV9yb3V0ZXIucHV0KCIvZXN0YWJsaXNobWVudHMve2VzdGFi
bGlzaG1lbnRfaWR9L2dhbGxlcnkiKQphc3luYyBkZWYgdXBkYXRlX2VzdGFibGlzaG1lbnRfZ2Fs
bGVyeSgKICAgIGVzdGFibGlzaG1lbnRfaWQ6IHN0ciwKICAgIGdhbGxlcnlfZGF0YTogZGljdCwK
ICAgIGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRlcihOb25lKQopOgogICAgIiIiQWN0dWFsaXR6
YXIgbGEgZ2FsZXJpYSBkJ2ltYXRnZXMgZCd1biBlc3RhYmxpbWVudCIiIgogICAgdXNlciA9IGF3
YWl0IGdldF91c2VyX2Zyb21fdG9rZW4oYXV0aG9yaXphdGlvbikKICAgIGlmIG5vdCB1c2VyOgog
ICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAxLCBkZXRhaWw9Ik5vIGF1
dG9yaXR6YXQiKQogICAgCiAgICAjIFZlcmlmaWNhciBxdWUgbCd1c3Vhcmkgw6lzIHByb3BpZXRh
cmkgZGUgbCdlc3RhYmxpbWVudCBvIGFkbWluCiAgICBlc3RhYmxpc2htZW50ID0gYXdhaXQgZGIu
ZXN0YWJsaXNobWVudHMuZmluZF9vbmUoeyJfaWQiOiBPYmplY3RJZChlc3RhYmxpc2htZW50X2lk
KX0pCiAgICBpZiBub3QgZXN0YWJsaXNobWVudDoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9u
KHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJFc3RhYmxpbWVudCBubyB0cm9iYXQiKQogICAgCiAg
ICB1c2VyX2lkID0gc3RyKHVzZXJbJ19pZCddKQogICAgaXNfb3duZXIgPSBzdHIoZXN0YWJsaXNo
bWVudC5nZXQoJ293bmVyX2lkJykpID09IHVzZXJfaWQKICAgIGlzX2FkbWluID0gdXNlci5nZXQo
J3JvbGUnKSA9PSAnYWRtaW4nCiAgICAKICAgIGlmIG5vdCBpc19vd25lciBhbmQgbm90IGlzX2Fk
bWluOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAzLCBkZXRhaWw9
Ik5vIHRlbnMgcGVybcOtcyBwZXIgbW9kaWZpY2FyIGFxdWVzdCBlc3RhYmxpbWVudCIpCiAgICAK
ICAgICMgQWN0dWFsaXR6YXIgbGEgZ2FsZXJpYQogICAgZ2FsbGVyeSA9IGdhbGxlcnlfZGF0YS5n
ZXQoJ2dhbGxlcnknLCBbXSkKICAgIAogICAgIyBWYWxpZGFyIHF1ZSBubyBoaSBoYSBtw6lzIGRl
IDMgaW1hdGdlcwogICAgaWYgbGVuKGdhbGxlcnkpID4gMzoKICAgICAgICByYWlzZSBIVFRQRXhj
ZXB0aW9uKHN0YXR1c19jb2RlPTQwMCwgZGV0YWlsPSJNw6B4aW0gMyBpbWF0Z2VzIHBlcm1lc2Vz
IikKICAgIAogICAgIyBBY3R1YWxpdHphciBhIGxhIGJhc2UgZGUgZGFkZXMKICAgIHJlc3VsdCA9
IGF3YWl0IGRiLmVzdGFibGlzaG1lbnRzLnVwZGF0ZV9vbmUoCiAgICAgICAgeyJfaWQiOiBPYmpl
Y3RJZChlc3RhYmxpc2htZW50X2lkKX0sCiAgICAgICAgeyIkc2V0IjogeyJnYWxsZXJ5IjogZ2Fs
bGVyeSwgInVwZGF0ZWRfYXQiOiBkYXRldGltZS51dGNub3coKX19CiAgICApCiAgICAKICAgIGlm
IHJlc3VsdC5tb2RpZmllZF9jb3VudCA9PSAwOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24o
c3RhdHVzX2NvZGU9NDA0LCBkZXRhaWw9Ik5vIHMnaGEgcG9ndXQgYWN0dWFsaXR6YXIgbCdlc3Rh
YmxpbWVudCIpCiAgICAKICAgIHJldHVybiB7InN1Y2Nlc3MiOiBUcnVlLCAibWVzc2FnZSI6ICJH
YWxlcmlhIGFjdHVhbGl0emFkYSBjb3JyZWN0YW1lbnQifQoKCkBhcGlfcm91dGVyLmdldCgiL2xv
Y2FsLWFzc29jaWF0L215LW9mZmVycyIpCmFzeW5jIGRlZiBnZXRfbXlfb2ZmZXJzKGF1dGhvcml6
YXRpb246IHN0ciA9IEhlYWRlcihOb25lKSk6CiAgICAiIiJPYnRlbmlyIGxlcyBvZmVydGVzIGRl
bCBsb2NhbCBhc3NvY2lhdCIiIgogICAgaWYgbm90IGF1dGhvcml6YXRpb246CiAgICAgICAgcmFp
c2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDEsIGRldGFpbD0iVG9rZW4gbm8gcHJvcG9y
Y2lvbmF0IikKICAgIAogICAgdG9rZW4gPSBhdXRob3JpemF0aW9uLnJlcGxhY2UoJ0JlYXJlciAn
LCAnJykKICAgIHVzZXIgPSBhd2FpdCBkYi51c2Vycy5maW5kX29uZSh7InRva2VuIjogdG9rZW59
KQogICAgCiAgICBpZiBub3QgdXNlcjoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1
c19jb2RlPTQwMSwgZGV0YWlsPSJVc3Vhcmkgbm8gdHJvYmF0IikKICAgIAogICAgaWYgdXNlci5n
ZXQoJ3JvbGUnKSBub3QgaW4gWydsb2NhbF9hc3NvY2lhdCcsICdhZG1pbiddOgogICAgICAgIHJh
aXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAzLCBkZXRhaWw9IkFjY8OpcyBkZW5lZ2F0
IikKICAgIAogICAgIyBPYnRlbmlyIGwnZXN0YWJsaW1lbnQgZGVsIGxvY2FsIGFzc29jaWF0CiAg
ICBlc3RhYmxpc2htZW50ID0gYXdhaXQgZGIuZXN0YWJsaXNobWVudHMuZmluZF9vbmUoeyJvd25l
cl9pZCI6IHVzZXJbJ19pZCddfSkKICAgIAogICAgaWYgbm90IGVzdGFibGlzaG1lbnQ6CiAgICAg
ICAgcmV0dXJuIFtdCiAgICAKICAgICMgT2J0ZW5pciBvZmVydGVzIGQnYXF1ZXN0IGVzdGFibGlt
ZW50CiAgICBvZmZlcnMgPSBhd2FpdCBkYi5vZmZlcnMuZmluZCh7ImVzdGFibGlzaG1lbnRfaWQi
OiBzdHIoZXN0YWJsaXNobWVudFsnX2lkJ10pfSkudG9fbGlzdCgxMDApCiAgICBmb3Igb2ZmZXIg
aW4gb2ZmZXJzOgogICAgICAgIG9mZmVyWydfaWQnXSA9IHN0cihvZmZlclsnX2lkJ10pCiAgICAK
ICAgIHJldHVybiBvZmZlcnMKCkBhcGlfcm91dGVyLnBvc3QoIi9sb2NhbC1hc3NvY2lhdC9vZmZl
cnMiKQphc3luYyBkZWYgY3JlYXRlX215X29mZmVyKAogICAgb2ZmZXI6IE9mZmVyQ3JlYXRlLAog
ICAgYXV0aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpCik6CiAgICAiIiJDcmVhciB1bmEg
b2ZlcnRhIGNvbSBhIGxvY2FsIGFzc29jaWF0IiIiCiAgICBpZiBub3QgYXV0aG9yaXphdGlvbjoK
ICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMSwgZGV0YWlsPSJUb2tl
biBubyBwcm9wb3JjaW9uYXQiKQogICAgCiAgICB0b2tlbiA9IGF1dGhvcml6YXRpb24ucmVwbGFj
ZSgnQmVhcmVyICcsICcnKQogICAgdXNlciA9IGF3YWl0IGRiLnVzZXJzLmZpbmRfb25lKHsidG9r
ZW4iOiB0b2tlbn0pCiAgICAKICAgIGlmIG5vdCB1c2VyOgogICAgICAgIHJhaXNlIEhUVFBFeGNl
cHRpb24oc3RhdHVzX2NvZGU9NDAxLCBkZXRhaWw9IlVzdWFyaSBubyB0cm9iYXQiKQogICAgCiAg
ICBpZiB1c2VyLmdldCgncm9sZScpIG5vdCBpbiBbJ2xvY2FsX2Fzc29jaWF0JywgJ2FkbWluJ106
CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDMsIGRldGFpbD0iQWNj
w6lzIGRlbmVnYXQiKQogICAgCiAgICAjIE9idGVuaXIgbCdlc3RhYmxpbWVudCBkZWwgbG9jYWwg
YXNzb2NpYXQKICAgIGVzdGFibGlzaG1lbnQgPSBhd2FpdCBkYi5lc3RhYmxpc2htZW50cy5maW5k
X29uZSh7Im93bmVyX2lkIjogdXNlclsnX2lkJ119KQogICAgCiAgICBpZiBub3QgZXN0YWJsaXNo
bWVudDoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWls
PSJObyB0ZW5zIHVuIGVzdGFibGltZW50IGFzc2lnbmF0IikKICAgIAogICAgIyBGb3LDp2FyIHF1
ZSBsJ29mZXJ0YSBzaWd1aSBwZXIgbCdlc3RhYmxpbWVudCBkZWwgbG9jYWwKICAgIG9mZmVyX2Rp
Y3QgPSBvZmZlci5kaWN0KCkKICAgIG9mZmVyX2RpY3RbJ2VzdGFibGlzaG1lbnRfaWQnXSA9IHN0
cihlc3RhYmxpc2htZW50WydfaWQnXSkKICAgIG9mZmVyX2RpY3RbJ2NyZWF0ZWRfYXQnXSA9IGRh
dGV0aW1lLnV0Y25vdygpCiAgICBvZmZlcl9kaWN0Wyd1cGRhdGVkX2F0J10gPSBkYXRldGltZS51
dGNub3coKQogICAgb2ZmZXJfZGljdFsnY3JlYXRlZF9ieSddID0gc3RyKHVzZXJbJ19pZCddKQog
ICAgCiAgICByZXN1bHQgPSBhd2FpdCBkYi5vZmZlcnMuaW5zZXJ0X29uZShvZmZlcl9kaWN0KQog
ICAgb2ZmZXJfZGljdFsnX2lkJ10gPSBzdHIocmVzdWx0Lmluc2VydGVkX2lkKQogICAgCiAgICBy
ZXR1cm4gb2ZmZXJfZGljdAoKQGFwaV9yb3V0ZXIucHV0KCIvbG9jYWwtYXNzb2NpYXQvb2ZmZXJz
L3tvZmZlcl9pZH0iKQphc3luYyBkZWYgdXBkYXRlX215X29mZmVyKAogICAgb2ZmZXJfaWQ6IHN0
ciwKICAgIG9mZmVyOiBPZmZlclVwZGF0ZSwKICAgIGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRl
cihOb25lKQopOgogICAgIiIiQWN0dWFsaXR6YXIgdW5hIG9mZXJ0YSBjb20gYSBsb2NhbCBhc3Nv
Y2lhdCIiIgogICAgaWYgbm90IGF1dGhvcml6YXRpb246CiAgICAgICAgcmFpc2UgSFRUUEV4Y2Vw
dGlvbihzdGF0dXNfY29kZT00MDEsIGRldGFpbD0iVG9rZW4gbm8gcHJvcG9yY2lvbmF0IikKICAg
IAogICAgdG9rZW4gPSBhdXRob3JpemF0aW9uLnJlcGxhY2UoJ0JlYXJlciAnLCAnJykKICAgIHVz
ZXIgPSBhd2FpdCBkYi51c2Vycy5maW5kX29uZSh7InRva2VuIjogdG9rZW59KQogICAgCiAgICBp
ZiBub3QgdXNlcjoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMSwg
ZGV0YWlsPSJVc3Vhcmkgbm8gdHJvYmF0IikKICAgIAogICAgaWYgdXNlci5nZXQoJ3JvbGUnKSBu
b3QgaW4gWydsb2NhbF9hc3NvY2lhdCcsICdhZG1pbiddOgogICAgICAgIHJhaXNlIEhUVFBFeGNl
cHRpb24oc3RhdHVzX2NvZGU9NDAzLCBkZXRhaWw9IkFjY8OpcyBkZW5lZ2F0IikKICAgIAogICAg
IyBPYnRlbmlyIGwnZXN0YWJsaW1lbnQgZGVsIGxvY2FsIGFzc29jaWF0CiAgICBlc3RhYmxpc2ht
ZW50ID0gYXdhaXQgZGIuZXN0YWJsaXNobWVudHMuZmluZF9vbmUoeyJvd25lcl9pZCI6IHVzZXJb
J19pZCddfSkKICAgIAogICAgaWYgbm90IGVzdGFibGlzaG1lbnQ6CiAgICAgICAgcmFpc2UgSFRU
UEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iTm8gdGVucyB1biBlc3RhYmxpbWVu
dCBhc3NpZ25hdCIpCiAgICAKICAgICMgVmVyaWZpY2FyIHF1ZSBsJ29mZXJ0YSBwZXJ0YW55IGEg
bCdlc3RhYmxpbWVudCBkZWwgbG9jYWwKICAgIGV4aXN0aW5nX29mZmVyID0gYXdhaXQgZGIub2Zm
ZXJzLmZpbmRfb25lKHsiX2lkIjogT2JqZWN0SWQob2ZmZXJfaWQpfSkKICAgIAogICAgaWYgbm90
IGV4aXN0aW5nX29mZmVyOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9
NDA0LCBkZXRhaWw9Ik9mZXJ0YSBubyB0cm9iYWRhIikKICAgIAogICAgaWYgZXhpc3Rpbmdfb2Zm
ZXIuZ2V0KCdlc3RhYmxpc2htZW50X2lkJykgIT0gc3RyKGVzdGFibGlzaG1lbnRbJ19pZCddKSBh
bmQgdXNlci5nZXQoJ3JvbGUnKSAhPSAnYWRtaW4nOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRp
b24oc3RhdHVzX2NvZGU9NDAzLCBkZXRhaWw9Ik5vIHBvdHMgZWRpdGFyIG9mZXJ0ZXMgZCdhbHRy
ZXMgZXN0YWJsaW1lbnRzIikKICAgIAogICAgdXBkYXRlX2RhdGEgPSB7azogdiBmb3IgaywgdiBp
biBvZmZlci5kaWN0KCkuaXRlbXMoKSBpZiB2IGlzIG5vdCBOb25lfQogICAgdXBkYXRlX2RhdGFb
J3VwZGF0ZWRfYXQnXSA9IGRhdGV0aW1lLnV0Y25vdygpCiAgICAKICAgIHJlc3VsdCA9IGF3YWl0
IGRiLm9mZmVycy51cGRhdGVfb25lKAogICAgICAgIHsiX2lkIjogT2JqZWN0SWQob2ZmZXJfaWQp
fSwKICAgICAgICB7IiRzZXQiOiB1cGRhdGVfZGF0YX0KICAgICkKICAgIAogICAgaWYgcmVzdWx0
Lm1hdGNoZWRfY291bnQgPT0gMDoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19j
b2RlPTQwNCwgZGV0YWlsPSJPZmVydGEgbm8gdHJvYmFkYSIpCiAgICAKICAgIHVwZGF0ZWQgPSBh
d2FpdCBkYi5vZmZlcnMuZmluZF9vbmUoeyJfaWQiOiBPYmplY3RJZChvZmZlcl9pZCl9KQogICAg
dXBkYXRlZFsnX2lkJ10gPSBzdHIodXBkYXRlZFsnX2lkJ10pCiAgICAKICAgIHJldHVybiB1cGRh
dGVkCgpAYXBpX3JvdXRlci5kZWxldGUoIi9sb2NhbC1hc3NvY2lhdC9vZmZlcnMve29mZmVyX2lk
fSIpCmFzeW5jIGRlZiBkZWxldGVfbXlfb2ZmZXIoCiAgICBvZmZlcl9pZDogc3RyLAogICAgYXV0
aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpCik6CiAgICAiIiJFbGltaW5hciB1bmEgb2Zl
cnRhIGNvbSBhIGxvY2FsIGFzc29jaWF0IiIiCiAgICBpZiBub3QgYXV0aG9yaXphdGlvbjoKICAg
ICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMSwgZGV0YWlsPSJUb2tlbiBu
byBwcm9wb3JjaW9uYXQiKQogICAgCiAgICB0b2tlbiA9IGF1dGhvcml6YXRpb24ucmVwbGFjZSgn
QmVhcmVyICcsICcnKQogICAgdXNlciA9IGF3YWl0IGRiLnVzZXJzLmZpbmRfb25lKHsidG9rZW4i
OiB0b2tlbn0pCiAgICAKICAgIGlmIG5vdCB1c2VyOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRp
b24oc3RhdHVzX2NvZGU9NDAxLCBkZXRhaWw9IlVzdWFyaSBubyB0cm9iYXQiKQogICAgCiAgICBp
ZiB1c2VyLmdldCgncm9sZScpIG5vdCBpbiBbJ2xvY2FsX2Fzc29jaWF0JywgJ2FkbWluJ106CiAg
ICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDMsIGRldGFpbD0iQWNjw6lz
IGRlbmVnYXQiKQogICAgCiAgICAjIE9idGVuaXIgbCdlc3RhYmxpbWVudCBkZWwgbG9jYWwgYXNz
b2NpYXQKICAgIGVzdGFibGlzaG1lbnQgPSBhd2FpdCBkYi5lc3RhYmxpc2htZW50cy5maW5kX29u
ZSh7Im93bmVyX2lkIjogdXNlclsnX2lkJ119KQogICAgCiAgICBpZiBub3QgZXN0YWJsaXNobWVu
dDoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJO
byB0ZW5zIHVuIGVzdGFibGltZW50IGFzc2lnbmF0IikKICAgIAogICAgIyBWZXJpZmljYXIgcXVl
IGwnb2ZlcnRhIHBlcnRhbnkgYSBsJ2VzdGFibGltZW50IGRlbCBsb2NhbAogICAgZXhpc3Rpbmdf
b2ZmZXIgPSBhd2FpdCBkYi5vZmZlcnMuZmluZF9vbmUoeyJfaWQiOiBPYmplY3RJZChvZmZlcl9p
ZCl9KQogICAgCiAgICBpZiBub3QgZXhpc3Rpbmdfb2ZmZXI6CiAgICAgICAgcmFpc2UgSFRUUEV4
Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iT2ZlcnRhIG5vIHRyb2JhZGEiKQogICAg
CiAgICBpZiBleGlzdGluZ19vZmZlci5nZXQoJ2VzdGFibGlzaG1lbnRfaWQnKSAhPSBzdHIoZXN0
YWJsaXNobWVudFsnX2lkJ10pIGFuZCB1c2VyLmdldCgncm9sZScpICE9ICdhZG1pbic6CiAgICAg
ICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDMsIGRldGFpbD0iTm8gcG90cyBl
bGltaW5hciBvZmVydGVzIGQnYWx0cmVzIGVzdGFibGltZW50cyIpCiAgICAKICAgIHJlc3VsdCA9
IGF3YWl0IGRiLm9mZmVycy5kZWxldGVfb25lKHsiX2lkIjogT2JqZWN0SWQob2ZmZXJfaWQpfSkK
ICAgIAogICAgaWYgcmVzdWx0LmRlbGV0ZWRfY291bnQgPT0gMDoKICAgICAgICByYWlzZSBIVFRQ
RXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJPZmVydGEgbm8gdHJvYmFkYSIpCiAg
ICAKICAgIHJldHVybiB7InN1Y2Nlc3MiOiBUcnVlLCAibWVzc2FnZSI6ICJPZmVydGEgZWxpbWlu
YWRhIn0KCgojIEV2ZW50cyBlbmRwb2ludHMKQGFwaV9yb3V0ZXIuZ2V0KCIvZXZlbnRzIikKYXN5
bmMgZGVmIGdldF9ldmVudHMoKToKICAgICIiIk9idGVuaXIgZXNkZXZlbmltZW50cyBww7pibGlj
cyAobm9tw6lzIGFtYiBsJ2VzdHJ1Y3R1cmEgbm92YSkiIiIKICAgIGN1cnJlbnRfdGltZSA9IGRh
dGV0aW1lLnV0Y25vdygpCiAgICBldmVudHMgPSBhd2FpdCBkYi5ldmVudHMuZmluZCh7CiAgICAg
ICAgInZhbGlkX2Zyb20iOiB7IiRleGlzdHMiOiBUcnVlfSwKICAgICAgICAidmFsaWRfdW50aWwi
OiB7IiRleGlzdHMiOiBUcnVlLCAiJGd0ZSI6IGN1cnJlbnRfdGltZX0KICAgIH0pLnNvcnQoInZh
bGlkX2Zyb20iLCAxKS50b19saXN0KDEwMCkKICAgIAogICAgZm9yIGV2ZW50IGluIGV2ZW50czoK
ICAgICAgICBldmVudFsnX2lkJ10gPSBzdHIoZXZlbnRbJ19pZCddKQogICAgICAgIGV2ZW50Wydp
ZCddID0gc3RyKGV2ZW50WydfaWQnXSkKICAgICAgICBpZiBldmVudC5nZXQoJ2VzdGFibGlzaG1l
bnRfaWQnKToKICAgICAgICAgICAgZXZlbnRbJ2VzdGFibGlzaG1lbnRfaWQnXSA9IHN0cihldmVu
dFsnZXN0YWJsaXNobWVudF9pZCddKQogICAgCiAgICByZXR1cm4gZXZlbnRzCgpAYXBpX3JvdXRl
ci5nZXQoIi9ldmVudHMve2V2ZW50X2lkfSIpCmFzeW5jIGRlZiBnZXRfZXZlbnQoZXZlbnRfaWQ6
IHN0cik6CiAgICAiIiJPYnRlbmlyIHVuIGVzZGV2ZW5pbWVudCBwZXIgSUQiIiIKICAgIGV2ZW50
ID0gYXdhaXQgZGIuZXZlbnRzLmZpbmRfb25lKHsiX2lkIjogT2JqZWN0SWQoZXZlbnRfaWQpfSkK
ICAgIGlmIG5vdCBldmVudDoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2Rl
PTQwNCwgZGV0YWlsPSJFdmVudCBub3QgZm91bmQiKQogICAgCiAgICBldmVudFsnX2lkJ10gPSBz
dHIoZXZlbnRbJ19pZCddKQogICAgZXZlbnRbJ2lkJ10gPSBzdHIoZXZlbnRbJ19pZCddKQogICAg
aWYgZXZlbnQuZ2V0KCdlc3RhYmxpc2htZW50X2lkJyk6CiAgICAgICAgZXZlbnRbJ2VzdGFibGlz
aG1lbnRfaWQnXSA9IHN0cihldmVudFsnZXN0YWJsaXNobWVudF9pZCddKQogICAgCiAgICByZXR1
cm4gZXZlbnQKCiMgUHJvbW90aW9ucyBlbmRwb2ludHMKQGFwaV9yb3V0ZXIuZ2V0KCIvcHJvbW90
aW9ucyIpCmFzeW5jIGRlZiBnZXRfcHJvbW90aW9ucyhhdXRob3JpemF0aW9uOiBzdHIgPSBIZWFk
ZXIoTm9uZSkpOgogICAgIiIiCiAgICBPYnRlbmlyIHByb21vY2lvbnM6CiAgICAtIFNpIMOpcyBh
ZG1pbiBvIGxvY2FsX2Fzc29jaWF0OiB2ZXUgdG90ZXMgbGVzIHNldmVzCiAgICAtIFNpIMOpcyB1
c3Vhcmkgbm9ybWFsOiBub23DqXMgdmV1IGxlcyBhcHJvdmFkZXMKICAgICIiIgogICAgaWYgYXV0
aG9yaXphdGlvbjoKICAgICAgICB1c2VyID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihhdXRo
b3JpemF0aW9uKQogICAgICAgIAogICAgICAgIGlmIHVzZXIgYW5kIHVzZXIuZ2V0KCdyb2xlJykg
aW4gWydhZG1pbicsICdsb2NhbF9hc3NvY2lhdCcsICdlbnRpdGF0X2NvbGFib3JhZG9yYScsICdt
ZW1icmVfY29uc2VsbCddOgogICAgICAgICAgICB1c2VyX2lkID0gc3RyKHVzZXJbJ19pZCddKQog
ICAgICAgICAgICAjIEFkbWlucyBpIGFzc29jaWF0cyB2ZXVlbiB0b3RlcyBsZXMgc2V2ZXMKICAg
ICAgICAgICAgaWYgdXNlci5nZXQoJ3JvbGUnKSA9PSAnYWRtaW4nOgogICAgICAgICAgICAgICAg
cHJvbW90aW9ucyA9IGF3YWl0IGRiLnByb21vdGlvbnMuZmluZCgpLnNvcnQoImNyZWF0ZWRfYXQi
LCAtMSkudG9fbGlzdCgxMDApCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcm9t
b3Rpb25zID0gYXdhaXQgZGIucHJvbW90aW9ucy5maW5kKHsiY3JlYXRlZF9ieSI6IHVzZXJfaWR9
KS5zb3J0KCJjcmVhdGVkX2F0IiwgLTEpLnRvX2xpc3QoMTAwKQogICAgICAgIGVsc2U6CiAgICAg
ICAgICAgICMgVXN1YXJpcyBub3JtYWxzIG5vbcOpcyB2ZXVlbiBhcHJvdmFkZXMKICAgICAgICAg
ICAgcHJvbW90aW9ucyA9IGF3YWl0IGRiLnByb21vdGlvbnMuZmluZCh7InN0YXR1cyI6ICJhcHBy
b3ZlZCJ9KS5zb3J0KCJjcmVhdGVkX2F0IiwgLTEpLnRvX2xpc3QoMTAwKQogICAgZWxzZToKICAg
ICAgICAjIFNlbnNlIGF1dGVudGljYWNpw7M6IG5vbcOpcyBhcHJvdmFkZXMKICAgICAgICBwcm9t
b3Rpb25zID0gYXdhaXQgZGIucHJvbW90aW9ucy5maW5kKHsic3RhdHVzIjogImFwcHJvdmVkIn0p
LnNvcnQoImNyZWF0ZWRfYXQiLCAtMSkudG9fbGlzdCgxMDApCiAgICAKICAgIGZvciBwcm9tbyBp
biBwcm9tb3Rpb25zOgogICAgICAgIHByb21vWydfaWQnXSA9IHN0cihwcm9tb1snX2lkJ10pCiAg
ICAgICAgcHJvbW9bJ2lkJ10gPSBzdHIocHJvbW9bJ19pZCddKQogICAgCiAgICByZXR1cm4gcHJv
bW90aW9ucwoKQGFwaV9yb3V0ZXIuZ2V0KCIvcHJvbW90aW9ucy97cHJvbW90aW9uX2lkfSIpCmFz
eW5jIGRlZiBnZXRfcHJvbW90aW9uKHByb21vdGlvbl9pZDogc3RyKToKICAgICIiIk9idGVuaXIg
dW5hIHByb21vY2nDsyBlc3BlY8OtZmljYSIiIgogICAgdHJ5OgogICAgICAgIHByb21vdGlvbiA9
IGF3YWl0IGRiLnByb21vdGlvbnMuZmluZF9vbmUoeyJfaWQiOiBPYmplY3RJZChwcm9tb3Rpb25f
aWQpfSkKICAgICAgICBpZiBub3QgcHJvbW90aW9uOgogICAgICAgICAgICByYWlzZSBIVFRQRXhj
ZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJQcm9tb3Rpb24gbm90IGZvdW5kIikKICAg
ICAgICAKICAgICAgICBwcm9tb3Rpb25bJ19pZCddID0gc3RyKHByb21vdGlvblsnX2lkJ10pCiAg
ICAgICAgcHJvbW90aW9uWydpZCddID0gc3RyKHByb21vdGlvblsnX2lkJ10pCiAgICAgICAgcmV0
dXJuIHByb21vdGlvbgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJhaXNlIEhU
VFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAwLCBkZXRhaWw9c3RyKGUpKQoKIyA9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09CiMgTk9Uw41DSUVTICJSRVVTIEkgRUwgVEVSUklUT1JJIgojID09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT0KCkBhcGlfcm91dGVyLmdldCgiL25ld3MiKQphc3luYyBkZWYgZ2V0X25ld3MobGlt
aXQ6IGludCA9IDIwKToKICAgICIiIk9idGVuaXIgbm90w61jaWVzIGRlIFJldXMgaSBlbCBUZXJy
aXRvcmkgKG5vbcOpcyBub3TDrWNpZXMgdsOgbGlkZXMgaSBubyBleHBpcmFkZXMpIiIiCiAgICB0
cnk6CiAgICAgICAgbm93ID0gZGF0ZXRpbWUudXRjbm93KCkKICAgICAgICAjIEZpbHRyYXIgbm90
w61jaWVzIHF1ZSBubyBoYW4gZXhwaXJhdCBvIHF1ZSBubyB0ZW5lbiBkYXRhIGRlIGNhZHVjaXRh
dAogICAgICAgIG5ld3MgPSBhd2FpdCBkYi5uZXdzLmZpbmQoewogICAgICAgICAgICAiJG9yIjog
WwogICAgICAgICAgICAgICAgeyJleHBpcnlfZGF0ZSI6IE5vbmV9LAogICAgICAgICAgICAgICAg
eyJleHBpcnlfZGF0ZSI6IHsiJGd0ZSI6IG5vd319CiAgICAgICAgICAgIF0KICAgICAgICB9KS5z
b3J0KCJjcmVhdGVkX2F0IiwgLTEpLmxpbWl0KGxpbWl0KS50b19saXN0KGxpbWl0KQogICAgICAg
IAogICAgICAgIGZvciBpdGVtIGluIG5ld3M6CiAgICAgICAgICAgIGl0ZW1bJ19pZCddID0gc3Ry
KGl0ZW1bJ19pZCddKQogICAgICAgICAgICBpdGVtWydpZCddID0gc3RyKGl0ZW1bJ19pZCddKQog
ICAgICAgIHJldHVybiBuZXdzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcmFp
c2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT01MDAsIGRldGFpbD1zdHIoZSkpCgpAYXBpX3Jv
dXRlci5wb3N0KCIvbmV3cyIpCmFzeW5jIGRlZiBjcmVhdGVfbmV3cyhuZXdzX2RhdGE6IE5ld3NB
cnRpY2xlLCBhdXRob3JpemF0aW9uOiBzdHIgPSBIZWFkZXIoTm9uZSkpOgogICAgIiIiQ3JlYXIg
bm90w61jaWEgbWFudWFsbWVudCAobm9tw6lzIGFkbWluKSIiIgogICAgdXNlciA9IGF3YWl0IGdl
dF91c2VyX2Zyb21fdG9rZW4oYXV0aG9yaXphdGlvbikKICAgIGlmIG5vdCB1c2VyIG9yIHVzZXIu
Z2V0KCJyb2xlIikgIT0gImFkbWluIjoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1
c19jb2RlPTQwMywgZGV0YWlsPSJBY2Nlc3MgZGVuaWVkIikKICAgIAogICAgdHJ5OgogICAgICAg
IG5ld3NfZGljdCA9IG5ld3NfZGF0YS5kaWN0KCkKICAgICAgICBuZXdzX2RpY3RbJ2lzX2F1dG9t
YXRpYyddID0gRmFsc2UgICMgTWFyY2FyIGNvbSBtYW51YWwKICAgICAgICByZXN1bHQgPSBhd2Fp
dCBkYi5uZXdzLmluc2VydF9vbmUobmV3c19kaWN0KQogICAgICAgIG5ld3NfZGljdFsnX2lkJ10g
PSBzdHIocmVzdWx0Lmluc2VydGVkX2lkKQogICAgICAgIG5ld3NfZGljdFsnaWQnXSA9IHN0cihy
ZXN1bHQuaW5zZXJ0ZWRfaWQpCiAgICAgICAgcmV0dXJuIG5ld3NfZGljdAogICAgZXhjZXB0IEV4
Y2VwdGlvbiBhcyBlOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAw
LCBkZXRhaWw9c3RyKGUpKQoKQGFwaV9yb3V0ZXIucHV0KCIvbmV3cy97bmV3c19pZH0iKQphc3lu
YyBkZWYgdXBkYXRlX25ld3MobmV3c19pZDogc3RyLCBuZXdzX2RhdGE6IE5ld3NBcnRpY2xlLCBh
dXRob3JpemF0aW9uOiBzdHIgPSBIZWFkZXIoTm9uZSkpOgogICAgIiIiQWN0dWFsaXR6YXIgbm90
w61jaWEgKG5vbcOpcyBhZG1pbikiIiIKICAgIHVzZXIgPSBhd2FpdCBnZXRfdXNlcl9mcm9tX3Rv
a2VuKGF1dGhvcml6YXRpb24pCiAgICBpZiBub3QgdXNlciBvciB1c2VyLmdldCgicm9sZSIpICE9
ICJhZG1pbiI6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDMsIGRl
dGFpbD0iQWNjZXNzIGRlbmllZCIpCiAgICAKICAgIHRyeToKICAgICAgICBuZXdzX2RpY3QgPSBu
ZXdzX2RhdGEuZGljdChleGNsdWRlX3Vuc2V0PVRydWUpCiAgICAgICAgcmVzdWx0ID0gYXdhaXQg
ZGIubmV3cy51cGRhdGVfb25lKAogICAgICAgICAgICB7Il9pZCI6IE9iamVjdElkKG5ld3NfaWQp
fSwKICAgICAgICAgICAgeyIkc2V0IjogbmV3c19kaWN0fQogICAgICAgICkKICAgICAgICBpZiBy
ZXN1bHQubWF0Y2hlZF9jb3VudCA9PSAwOgogICAgICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9u
KHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJOZXdzIG5vdCBmb3VuZCIpCiAgICAgICAgCiAgICAg
ICAgdXBkYXRlZF9uZXdzID0gYXdhaXQgZGIubmV3cy5maW5kX29uZSh7Il9pZCI6IE9iamVjdElk
KG5ld3NfaWQpfSkKICAgICAgICB1cGRhdGVkX25ld3NbJ19pZCddID0gc3RyKHVwZGF0ZWRfbmV3
c1snX2lkJ10pCiAgICAgICAgdXBkYXRlZF9uZXdzWydpZCddID0gc3RyKHVwZGF0ZWRfbmV3c1sn
X2lkJ10pCiAgICAgICAgcmV0dXJuIHVwZGF0ZWRfbmV3cwogICAgZXhjZXB0IEV4Y2VwdGlvbiBh
cyBlOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9
c3RyKGUpKQoKQGFwaV9yb3V0ZXIuZGVsZXRlKCIvbmV3cy97bmV3c19pZH0iKQphc3luYyBkZWYg
ZGVsZXRlX25ld3MobmV3c19pZDogc3RyLCBhdXRob3JpemF0aW9uOiBzdHIgPSBIZWFkZXIoTm9u
ZSkpOgogICAgIiIiRWxpbWluYXIgbm90w61jaWEgKG5vbcOpcyBhZG1pbikiIiIKICAgIHVzZXIg
PSBhd2FpdCBnZXRfdXNlcl9mcm9tX3Rva2VuKGF1dGhvcml6YXRpb24pCiAgICBpZiBub3QgdXNl
ciBvciB1c2VyLmdldCgicm9sZSIpICE9ICJhZG1pbiI6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2Vw
dGlvbihzdGF0dXNfY29kZT00MDMsIGRldGFpbD0iQWNjZXNzIGRlbmllZCIpCiAgICAKICAgIHRy
eToKICAgICAgICByZXN1bHQgPSBhd2FpdCBkYi5uZXdzLmRlbGV0ZV9vbmUoeyJfaWQiOiBPYmpl
Y3RJZChuZXdzX2lkKX0pCiAgICAgICAgaWYgcmVzdWx0LmRlbGV0ZWRfY291bnQgPT0gMDoKICAg
ICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iTmV3
cyBub3QgZm91bmQiKQogICAgICAgIHJldHVybiB7Im1lc3NhZ2UiOiAiTmV3cyBkZWxldGVkIHN1
Y2Nlc3NmdWxseSJ9CiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcmFpc2UgSFRU
UEV4Y2VwdGlvbihzdGF0dXNfY29kZT01MDAsIGRldGFpbD1zdHIoZSkpCgpAYXBpX3JvdXRlci5w
b3N0KCIvbmV3cy9mZXRjaC1hdXRvbWF0aWMiKQphc3luYyBkZWYgZmV0Y2hfYXV0b21hdGljX25l
d3MoYXV0aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpKToKICAgICIiIkV4ZWN1dGFyIHNj
cmFwaW5nIGF1dG9tw6B0aWMgZGUgbm90w61jaWVzIChub23DqXMgYWRtaW4pIiIiCiAgICB1c2Vy
ID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihhdXRob3JpemF0aW9uKQogICAgaWYgbm90IHVz
ZXIgb3IgdXNlci5nZXQoInJvbGUiKSAhPSAiYWRtaW4iOgogICAgICAgIHJhaXNlIEhUVFBFeGNl
cHRpb24oc3RhdHVzX2NvZGU9NDAzLCBkZXRhaWw9IkFjY2VzcyBkZW5pZWQiKQogICAgCiAgICB0
cnk6CiAgICAgICAgZnJvbSBuZXdzX3NjcmFwZXIgaW1wb3J0IGZldGNoX2RhaWx5X25ld3MKICAg
ICAgICAKICAgICAgICAjIE9idGVuaXIgbm90w61jaWVzCiAgICAgICAgbmV3c19pdGVtcyA9IGF3
YWl0IGZldGNoX2RhaWx5X25ld3MobWF4X25ld3M9NikKICAgICAgICAKICAgICAgICAjIEd1YXJk
YXIgYSBsYSBiYXNlIGRlIGRhZGVzCiAgICAgICAgaW5zZXJ0ZWRfY291bnQgPSAwCiAgICAgICAg
Zm9yIGl0ZW0gaW4gbmV3c19pdGVtczoKICAgICAgICAgICAgIyBFdml0YXIgZHVwbGljYXRzCiAg
ICAgICAgICAgIGV4aXN0aW5nID0gYXdhaXQgZGIubmV3cy5maW5kX29uZSh7InVybCI6IGl0ZW1b
J3VybCddfSkKICAgICAgICAgICAgaWYgbm90IGV4aXN0aW5nOgogICAgICAgICAgICAgICAgYXdh
aXQgZGIubmV3cy5pbnNlcnRfb25lKHsKICAgICAgICAgICAgICAgICAgICAidGl0bGUiOiBpdGVt
Wyd0aXRsZSddLAogICAgICAgICAgICAgICAgICAgICJ1cmwiOiBpdGVtWyd1cmwnXSwKICAgICAg
ICAgICAgICAgICAgICAic291cmNlIjogaXRlbVsnc291cmNlJ10sCiAgICAgICAgICAgICAgICAg
ICAgImNyZWF0ZWRfYXQiOiBkYXRldGltZS51dGNub3coKSwKICAgICAgICAgICAgICAgICAgICAi
cHVibGlzaF9kYXRlIjogZGF0ZXRpbWUudXRjbm93KCksCiAgICAgICAgICAgICAgICAgICAgImlz
X2F1dG9tYXRpYyI6IFRydWUsCiAgICAgICAgICAgICAgICAgICAgImNhdGVnb3J5IjogImdlbmVy
YWwiCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgaW5zZXJ0ZWRfY291bnQgKz0g
MQogICAgICAgIAogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICJzdWNjZXNzIjogVHJ1ZSwK
ICAgICAgICAgICAgImZldGNoZWQiOiBsZW4obmV3c19pdGVtcyksCiAgICAgICAgICAgICJpbnNl
cnRlZCI6IGluc2VydGVkX2NvdW50LAogICAgICAgICAgICAic2tpcHBlZCI6IGxlbihuZXdzX2l0
ZW1zKSAtIGluc2VydGVkX2NvdW50CiAgICAgICAgfQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBl
OgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9c3Ry
KGUpKQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgQ0xVQiBFTCBUT01CIC0gQ09OVElOR1VUUwoj
ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT0KCkBhcGlfcm91dGVyLmdldCgiL2NsdWIvY29udGVudCIpCmFz
eW5jIGRlZiBnZXRfY2x1Yl9jb250ZW50KGxpbWl0OiBpbnQgPSA1MCk6CiAgICAiIiJPYnRlbmly
IGNvbnRpbmd1dHMgZGVsIENsdWIgRWwgVG9tYiAoaW5jbG91IGVzZGV2ZW5pbWVudHMgYWN0aXVz
KSIiIgogICAgdHJ5OgogICAgICAgICMgMS4gRmlsdHJhciBjb250aW5ndXRzIGRlbCBjbHViIG5v
IGNhZHVjYXRzCiAgICAgICAgY2x1Yl9jb250ZW50ID0gYXdhaXQgZGIuY2x1Yl9jb250ZW50LmZp
bmQoewogICAgICAgICAgICAiJG9yIjogWwogICAgICAgICAgICAgICAgeyJleHBpcnlfZGF0ZSI6
IE5vbmV9LAogICAgICAgICAgICAgICAgeyJleHBpcnlfZGF0ZSI6IHsiJGd0ZSI6IGRhdGV0aW1l
LnV0Y25vdygpfX0KICAgICAgICAgICAgXQogICAgICAgIH0pLnNvcnQoInB1Ymxpc2hfZGF0ZSIs
IC0xKS50b19saXN0KGxpbWl0KQogICAgICAgIAogICAgICAgIGZvciBpdGVtIGluIGNsdWJfY29u
dGVudDoKICAgICAgICAgICAgaXRlbVsnX2lkJ10gPSBzdHIoaXRlbVsnX2lkJ10pCiAgICAgICAg
ICAgIGl0ZW1bJ2lkJ10gPSBzdHIoaXRlbVsnX2lkJ10pCiAgICAgICAgCiAgICAgICAgIyAyLiBP
YnRlbmlyIGVzZGV2ZW5pbWVudHMgYWN0aXVzIChubyBjYWR1Y2F0cykKICAgICAgICBub3cgPSBk
YXRldGltZS51dGNub3coKQogICAgICAgIGV2ZW50cyA9IGF3YWl0IGRiLmV2ZW50cy5maW5kKHsK
ICAgICAgICAgICAgInZhbGlkX3VudGlsIjogeyIkZ3RlIjogbm93fQogICAgICAgIH0pLnNvcnQo
InZhbGlkX2Zyb20iLCAtMSkudG9fbGlzdCgyMCkKICAgICAgICAKICAgICAgICAjIDMuIENvbnZl
cnRpciBlc2RldmVuaW1lbnRzIGEgZm9ybWF0IGRlIGNvbnRpbmd1dCBkZWwgY2x1YgogICAgICAg
IGZvciBldmVudCBpbiBldmVudHM6CiAgICAgICAgICAgIGV2ZW50WydfaWQnXSA9IHN0cihldmVu
dFsnX2lkJ10pCiAgICAgICAgICAgIGV2ZW50WydpZCddID0gc3RyKGV2ZW50WydfaWQnXSkKICAg
ICAgICAgICAgIyBBZmVnaXIgY2F0ZWdvcmlhIHBlciBpZGVudGlmaWNhci1sb3MgY29tIGEgZXNk
ZXZlbmltZW50cwogICAgICAgICAgICBpZiAnY2F0ZWdvcnknIG5vdCBpbiBldmVudDoKICAgICAg
ICAgICAgICAgIGV2ZW50WydjYXRlZ29yeSddID0gJ0VzZGV2ZW5pbWVudHMnCiAgICAgICAgICAg
ICMgTWFwZWFyIGNhbXBzIGQnZXZlbnQgYSBmb3JtYXQgZGUgY2x1Yl9jb250ZW50CiAgICAgICAg
ICAgIGlmICdwdWJsaXNoX2RhdGUnIG5vdCBpbiBldmVudDoKICAgICAgICAgICAgICAgIGV2ZW50
WydwdWJsaXNoX2RhdGUnXSA9IGV2ZW50LmdldCgndmFsaWRfZnJvbScsIGRhdGV0aW1lLnV0Y25v
dygpKQogICAgICAgICAgICBpZiAnZXhwaXJ5X2RhdGUnIG5vdCBpbiBldmVudDoKICAgICAgICAg
ICAgICAgIGV2ZW50WydleHBpcnlfZGF0ZSddID0gZXZlbnQuZ2V0KCd2YWxpZF91bnRpbCcpCiAg
ICAgICAgCiAgICAgICAgIyA0LiBDb21iaW5hciBjb250aW5ndXQgZGVsIGNsdWIgaSBlc2RldmVu
aW1lbnRzCiAgICAgICAgYWxsX2NvbnRlbnQgPSBjbHViX2NvbnRlbnQgKyBldmVudHMKICAgICAg
ICAKICAgICAgICAjIDUuIE9yZGVuYXIgcGVyIGRhdGEgZGUgcHVibGljYWNpw7MKICAgICAgICBh
bGxfY29udGVudC5zb3J0KGtleT1sYW1iZGEgeDogeC5nZXQoJ3B1Ymxpc2hfZGF0ZScsIGRhdGV0
aW1lLm1pbiksIHJldmVyc2U9VHJ1ZSkKICAgICAgICAKICAgICAgICByZXR1cm4gYWxsX2NvbnRl
bnRbOmxpbWl0XQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJhaXNlIEhUVFBF
eGNlcHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9c3RyKGUpKQoKQGFwaV9yb3V0ZXIucG9z
dCgiL2NsdWIvY29udGVudCIpCmFzeW5jIGRlZiBjcmVhdGVfY2x1Yl9jb250ZW50KGNvbnRlbnRf
ZGF0YTogQ2x1YkNvbnRlbnQsIGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRlcihOb25lKSk6CiAg
ICAiIiJDcmVhciBjb250aW5ndXQgZGVsIENsdWIgKG5vbcOpcyBhZG1pbikiIiIKICAgIHVzZXIg
PSBhd2FpdCBnZXRfdXNlcl9mcm9tX3Rva2VuKGF1dGhvcml6YXRpb24pCiAgICBpZiBub3QgdXNl
ciBvciB1c2VyLmdldCgicm9sZSIpICE9ICJhZG1pbiI6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2Vw
dGlvbihzdGF0dXNfY29kZT00MDMsIGRldGFpbD0iQWNjZXNzIGRlbmllZCIpCiAgICAKICAgIHRy
eToKICAgICAgICBjb250ZW50X2RpY3QgPSBjb250ZW50X2RhdGEuZGljdCgpCiAgICAgICAgcmVz
dWx0ID0gYXdhaXQgZGIuY2x1Yl9jb250ZW50Lmluc2VydF9vbmUoY29udGVudF9kaWN0KQogICAg
ICAgIGNvbnRlbnRfZGljdFsnX2lkJ10gPSBzdHIocmVzdWx0Lmluc2VydGVkX2lkKQogICAgICAg
IGNvbnRlbnRfZGljdFsnaWQnXSA9IHN0cihyZXN1bHQuaW5zZXJ0ZWRfaWQpCiAgICAgICAgcmV0
dXJuIGNvbnRlbnRfZGljdAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJhaXNl
IEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9c3RyKGUpKQoKQGFwaV9yb3V0
ZXIucHV0KCIvY2x1Yi9jb250ZW50L3tjb250ZW50X2lkfSIpCmFzeW5jIGRlZiB1cGRhdGVfY2x1
Yl9jb250ZW50KGNvbnRlbnRfaWQ6IHN0ciwgY29udGVudF9kYXRhOiBDbHViQ29udGVudCwgYXV0
aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpKToKICAgICIiIkFjdHVhbGl0emFyIGNvbnRp
bmd1dCBkZWwgQ2x1YiAobm9tw6lzIGFkbWluKSIiIgogICAgdXNlciA9IGF3YWl0IGdldF91c2Vy
X2Zyb21fdG9rZW4oYXV0aG9yaXphdGlvbikKICAgIGlmIG5vdCB1c2VyIG9yIHVzZXIuZ2V0KCJy
b2xlIikgIT0gImFkbWluIjoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2Rl
PTQwMywgZGV0YWlsPSJBY2Nlc3MgZGVuaWVkIikKICAgIAogICAgdHJ5OgogICAgICAgIGNvbnRl
bnRfZGljdCA9IGNvbnRlbnRfZGF0YS5kaWN0KGV4Y2x1ZGVfdW5zZXQ9VHJ1ZSkKICAgICAgICBy
ZXN1bHQgPSBhd2FpdCBkYi5jbHViX2NvbnRlbnQudXBkYXRlX29uZSgKICAgICAgICAgICAgeyJf
aWQiOiBPYmplY3RJZChjb250ZW50X2lkKX0sCiAgICAgICAgICAgIHsiJHNldCI6IGNvbnRlbnRf
ZGljdH0KICAgICAgICApCiAgICAgICAgaWYgcmVzdWx0Lm1hdGNoZWRfY291bnQgPT0gMDoKICAg
ICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iQ29u
dGVudCBub3QgZm91bmQiKQogICAgICAgIAogICAgICAgIHVwZGF0ZWRfY29udGVudCA9IGF3YWl0
IGRiLmNsdWJfY29udGVudC5maW5kX29uZSh7Il9pZCI6IE9iamVjdElkKGNvbnRlbnRfaWQpfSkK
ICAgICAgICB1cGRhdGVkX2NvbnRlbnRbJ19pZCddID0gc3RyKHVwZGF0ZWRfY29udGVudFsnX2lk
J10pCiAgICAgICAgdXBkYXRlZF9jb250ZW50WydpZCddID0gc3RyKHVwZGF0ZWRfY29udGVudFsn
X2lkJ10pCiAgICAgICAgcmV0dXJuIHVwZGF0ZWRfY29udGVudAogICAgZXhjZXB0IEV4Y2VwdGlv
biBhcyBlOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRh
aWw9c3RyKGUpKQoKQGFwaV9yb3V0ZXIuZGVsZXRlKCIvY2x1Yi9jb250ZW50L3tjb250ZW50X2lk
fSIpCmFzeW5jIGRlZiBkZWxldGVfY2x1Yl9jb250ZW50KGNvbnRlbnRfaWQ6IHN0ciwgYXV0aG9y
aXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpKToKICAgICIiIkVsaW1pbmFyIGNvbnRpbmd1dCBk
ZWwgQ2x1YiAobm9tw6lzIGFkbWluKSIiIgogICAgdXNlciA9IGF3YWl0IGdldF91c2VyX2Zyb21f
dG9rZW4oYXV0aG9yaXphdGlvbikKICAgIGlmIG5vdCB1c2VyIG9yIHVzZXIuZ2V0KCJyb2xlIikg
IT0gImFkbWluIjoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMywg
ZGV0YWlsPSJBY2Nlc3MgZGVuaWVkIikKICAgIAogICAgdHJ5OgogICAgICAgIHJlc3VsdCA9IGF3
YWl0IGRiLmNsdWJfY29udGVudC5kZWxldGVfb25lKHsiX2lkIjogT2JqZWN0SWQoY29udGVudF9p
ZCl9KQogICAgICAgIGlmIHJlc3VsdC5kZWxldGVkX2NvdW50ID09IDA6CiAgICAgICAgICAgIHJh
aXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDA0LCBkZXRhaWw9IkNvbnRlbnQgbm90IGZv
dW5kIikKICAgICAgICByZXR1cm4geyJtZXNzYWdlIjogIkNvbnRlbnQgZGVsZXRlZCBzdWNjZXNz
ZnVsbHkifQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJhaXNlIEhUVFBFeGNl
cHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9c3RyKGUpKQoKIyA9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09CiMgSU5GT1JNQUNJw5MgLSBDb250aW5ndXRzIHNvYnJlIEVsIFRvbWIgZGUgUmV1cwojID09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0KCkBhcGlfcm91dGVyLmdldCgiL2luZm8vY29udGVudCIpCmFzeW5j
IGRlZiBnZXRfaW5mb19jb250ZW50KCk6CiAgICAiIiJPYnRlbmlyIGNvbnRpbmd1dHMgZCdpbmZv
cm1hY2nDsyAocMO6YmxpYykiIiIKICAgIHRyeToKICAgICAgICBjb250ZW50ID0gYXdhaXQgZGIu
aW5mb19jb250ZW50LmZpbmQoeyJpc19hY3RpdmUiOiBUcnVlfSkuc29ydCgib3JkZXIiLCAxKS50
b19saXN0KDUwKQogICAgICAgIGZvciBpdGVtIGluIGNvbnRlbnQ6CiAgICAgICAgICAgIGl0ZW1b
J19pZCddID0gc3RyKGl0ZW1bJ19pZCddKQogICAgICAgICAgICBpdGVtWydpZCddID0gc3RyKGl0
ZW1bJ19pZCddKQogICAgICAgIHJldHVybiBjb250ZW50CiAgICBleGNlcHQgRXhjZXB0aW9uIGFz
IGU6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT01MDAsIGRldGFpbD1z
dHIoZSkpCgpAYXBpX3JvdXRlci5wb3N0KCIvaW5mby9jb250ZW50IikKYXN5bmMgZGVmIGNyZWF0
ZV9pbmZvX2NvbnRlbnQoY29udGVudF9kYXRhOiBJbmZvQ29udGVudCwgYXV0aG9yaXphdGlvbjog
c3RyID0gSGVhZGVyKE5vbmUpKToKICAgICIiIkNyZWFyIGNvbnRpbmd1dCBkJ2luZm9ybWFjacOz
IChub23DqXMgYWRtaW4pIiIiCiAgICB1c2VyID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihh
dXRob3JpemF0aW9uKQogICAgaWYgbm90IHVzZXIgb3IgdXNlci5nZXQoInJvbGUiKSAhPSAiYWRt
aW4iOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAzLCBkZXRhaWw9
IkFjY2VzcyBkZW5pZWQiKQogICAgCiAgICB0cnk6CiAgICAgICAgY29udGVudF9kaWN0ID0gY29u
dGVudF9kYXRhLmRpY3QoKQogICAgICAgIHJlc3VsdCA9IGF3YWl0IGRiLmluZm9fY29udGVudC5p
bnNlcnRfb25lKGNvbnRlbnRfZGljdCkKICAgICAgICBjb250ZW50X2RpY3RbJ19pZCddID0gc3Ry
KHJlc3VsdC5pbnNlcnRlZF9pZCkKICAgICAgICBjb250ZW50X2RpY3RbJ2lkJ10gPSBzdHIocmVz
dWx0Lmluc2VydGVkX2lkKQogICAgICAgIHJldHVybiBjb250ZW50X2RpY3QKICAgIGV4Y2VwdCBF
eGNlcHRpb24gYXMgZToKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUw
MCwgZGV0YWlsPXN0cihlKSkKCkBhcGlfcm91dGVyLnB1dCgiL2luZm8vY29udGVudC97Y29udGVu
dF9pZH0iKQphc3luYyBkZWYgdXBkYXRlX2luZm9fY29udGVudChjb250ZW50X2lkOiBzdHIsIGNv
bnRlbnRfZGF0YTogSW5mb0NvbnRlbnQsIGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRlcihOb25l
KSk6CiAgICAiIiJBY3R1YWxpdHphciBjb250aW5ndXQgZCdpbmZvcm1hY2nDsyAobm9tw6lzIGFk
bWluKSIiIgogICAgdXNlciA9IGF3YWl0IGdldF91c2VyX2Zyb21fdG9rZW4oYXV0aG9yaXphdGlv
bikKICAgIGlmIG5vdCB1c2VyIG9yIHVzZXIuZ2V0KCJyb2xlIikgIT0gImFkbWluIjoKICAgICAg
ICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMywgZGV0YWlsPSJBY2Nlc3MgZGVu
aWVkIikKICAgIAogICAgdHJ5OgogICAgICAgIGNvbnRlbnRfZGljdCA9IGNvbnRlbnRfZGF0YS5k
aWN0KGV4Y2x1ZGVfdW5zZXQ9VHJ1ZSkKICAgICAgICByZXN1bHQgPSBhd2FpdCBkYi5pbmZvX2Nv
bnRlbnQudXBkYXRlX29uZSgKICAgICAgICAgICAgeyJfaWQiOiBPYmplY3RJZChjb250ZW50X2lk
KX0sCiAgICAgICAgICAgIHsiJHNldCI6IGNvbnRlbnRfZGljdH0KICAgICAgICApCiAgICAgICAg
aWYgcmVzdWx0Lm1hdGNoZWRfY291bnQgPT0gMDoKICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2Vw
dGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iQ29udGVudCBub3QgZm91bmQiKQogICAgICAg
IAogICAgICAgIHVwZGF0ZWRfY29udGVudCA9IGF3YWl0IGRiLmluZm9fY29udGVudC5maW5kX29u
ZSh7Il9pZCI6IE9iamVjdElkKGNvbnRlbnRfaWQpfSkKICAgICAgICB1cGRhdGVkX2NvbnRlbnRb
J19pZCddID0gc3RyKHVwZGF0ZWRfY29udGVudFsnX2lkJ10pCiAgICAgICAgdXBkYXRlZF9jb250
ZW50WydpZCddID0gc3RyKHVwZGF0ZWRfY29udGVudFsnX2lkJ10pCiAgICAgICAgcmV0dXJuIHVw
ZGF0ZWRfY29udGVudAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJhaXNlIEhU
VFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9c3RyKGUpKQoKQGFwaV9yb3V0ZXIu
ZGVsZXRlKCIvaW5mby9jb250ZW50L3tjb250ZW50X2lkfSIpCmFzeW5jIGRlZiBkZWxldGVfaW5m
b19jb250ZW50KGNvbnRlbnRfaWQ6IHN0ciwgYXV0aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5v
bmUpKToKICAgICIiIkVsaW1pbmFyIGNvbnRpbmd1dCBkJ2luZm9ybWFjacOzIChub23DqXMgYWRt
aW4pIiIiCiAgICB1c2VyID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihhdXRob3JpemF0aW9u
KQogICAgaWYgbm90IHVzZXIgb3IgdXNlci5nZXQoInJvbGUiKSAhPSAiYWRtaW4iOgogICAgICAg
IHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAzLCBkZXRhaWw9IkFjY2VzcyBkZW5p
ZWQiKQogICAgCiAgICB0cnk6CiAgICAgICAgcmVzdWx0ID0gYXdhaXQgZGIuaW5mb19jb250ZW50
LmRlbGV0ZV9vbmUoeyJfaWQiOiBPYmplY3RJZChjb250ZW50X2lkKX0pCiAgICAgICAgaWYgcmVz
dWx0LmRlbGV0ZWRfY291bnQgPT0gMDoKICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihz
dGF0dXNfY29kZT00MDQsIGRldGFpbD0iQ29udGVudCBub3QgZm91bmQiKQogICAgICAgIHJldHVy
biB7Im1lc3NhZ2UiOiAiQ29udGVudCBkZWxldGVkIHN1Y2Nlc3NmdWxseSJ9CiAgICBleGNlcHQg
RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT01
MDAsIGRldGFpbD1zdHIoZSkpCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBTSVNURU1BIERFIFRJ
UVVFVFMgSSBTT1JURUpPUwojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmNsYXNzIFRpY2tldFByb2Nl
c3NSZXF1ZXN0KEJhc2VNb2RlbCk6CiAgICB0aWNrZXRfaW1hZ2U6IHN0cgoKQGFwaV9yb3V0ZXIu
cG9zdCgiL3RpY2tldHMvcHJvY2VzcyIpCmFzeW5jIGRlZiBwcm9jZXNzX3RpY2tldChyZXF1ZXN0
OiBUaWNrZXRQcm9jZXNzUmVxdWVzdCwgYXV0aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUp
KToKICAgICIiIlByb2Nlc3NhciB0aXF1ZXQgYW1iIE9DUiBpIGdlbmVyYXIgcGFydGljaXBhY2lv
bnMiIiIKICAgIHVzZXIgPSBhd2FpdCBnZXRfdXNlcl9mcm9tX3Rva2VuKGF1dGhvcml6YXRpb24p
CiAgICBpZiBub3QgdXNlcjoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2Rl
PTQwMSwgZGV0YWlsPSJVbmF1dGhvcml6ZWQiKQogICAgCiAgICB0cnk6CiAgICAgICAgIyBmcm9t
IGVtZXJnZW50aW50ZWdyYXRpb25zLmxsbS5jaGF0IGltcG9ydCBMbG1DaGF0LCBVc2VyTWVzc2Fn
ZSwgSW1hZ2VDb250ZW50CiAgICAgICAgZnJvbSBvcGVuYWkgaW1wb3J0IE9wZW5BSQogICAgICAg
IGltcG9ydCBvcwogICAgICAgIGZyb20gcGFydGljaXBhdGlvbl90cmFja2VyIGltcG9ydCB0cmFj
a19wYXJ0aWNpcGF0aW9uCiAgICAgICAgCiAgICAgICAgIyBQcm9jZXNzYXIgaW1hdGdlIGFtYiBP
Q1IgdXRpbGl0emFudCBJQQogICAgICAgIGFwaV9rZXkgPSBvcy5nZXRlbnYoJ0VNRVJHRU5UX0xM
TV9LRVknKQogICAgICAgIAogICAgICAgIHByb21wdCA9ICIiIkV0cyB1biBleHBlcnQgZW4gcHJv
Y2Vzc2FyIHRpcXVldHMgZGUgY29tcHJhLiBBbmFsaXR6YSBhcXVlc3RhIGltYXRnZSBkZSB0aXF1
ZXQgaSBleHRyZXU6CgoxLiBOw7ptZXJvIGRlIHRpcXVldCAoYnVzY2E6ICJOwroiLCAiVGlja2V0
IiwgIkZhY3R1cmEiLCBvIG7Dum1lcm8gbGxhcmcpCjIuIE5vbSBkZSBsJ2VzdGFibGltZW50IChh
IGxhIHBhcnQgc3VwZXJpb3IpCjMuIE5JRiBvIENJRiBkZSBsJ2VzdGFibGltZW50IChidXNjYTog
Ik5JRjoiLCAiQ0lGOiIsICJCLSIsICJBLSIgc2VndWl0IGRlIG7Dum1lcm9zKQo0LiBJbXBvcnQg
dG90YWwgKGJ1c2NhOiAiVE9UQUwiLCAiVG90YWwiLCAiSU1QT1JURSIsICJFVVIiKQo1LiBEYXRh
IChmb3JtYXQgREQvTU0vWVlZWSBvIHNpbWlsYXIpCgpJTVBPUlRBTlQ6IFJldG9ybmEgTk9Nw4lT
IHVuIEpTT04gdsOgbGlkIGFtYiBhcXVlc3QgZm9ybWF0IGV4YWN0ZToKewogICJ0aWNrZXRfbnVt
YmVyIjogIm7Dum1lcm8gZGVsIHRpcXVldCIsCiAgImVzdGFibGlzaG1lbnQiOiAibm9tIGRlIGwn
ZXN0YWJsaW1lbnQiLAogICJuaWYiOiAiTklGL0NJRiBkZSBsJ2VzdGFibGltZW50IiwKICAiYW1v
dW50IjogaW1wb3J0ZV9udW3DqHJpYywKICAiZGF0ZSI6ICJERC9NTS9ZWVlZIgp9CgpTaSBubyBw
b3RzIGV4dHJldXJlIGFsZ3VuYSBkYWRhLCBwb3NhIG51bGwuIiIiCgogICAgICAgIGNoYXQgPSBM
bG1DaGF0KAogICAgICAgICAgICBhcGlfa2V5PWFwaV9rZXksCiAgICAgICAgICAgIHNlc3Npb25f
aWQ9ZiJ0aWNrZXRfe3VzZXJbJ19pZCddfV97ZGF0ZXRpbWUubm93KCkudGltZXN0YW1wKCl9IiwK
ICAgICAgICAgICAgc3lzdGVtX21lc3NhZ2U9IkV0cyB1biBleHBlcnQgT0NSIHF1ZSBleHRyZXUg
ZGFkZXMgZGUgdGlxdWV0cyBhbWIgcHJlY2lzacOzLiIKICAgICAgICApLndpdGhfbW9kZWwoIm9w
ZW5haSIsICJncHQtNG8tbWluaSIpCiAgICAgICAgCiAgICAgICAgIyBQcmVwYXJhciBpbWF0Z2Ug
KGVsaW1pbmFyIHByZWZpeCBzaSDDqXMgbmVjZXNzYXJpKQogICAgICAgIGltYWdlX2RhdGEgPSBy
ZXF1ZXN0LnRpY2tldF9pbWFnZQogICAgICAgIGlmIGltYWdlX2RhdGEuc3RhcnRzd2l0aCgnZGF0
YTppbWFnZScpOgogICAgICAgICAgICAjIEV4dHJldXJlIG5vbcOpcyBsYSBwYXJ0IGJhc2U2NAog
ICAgICAgICAgICBpbWFnZV9kYXRhID0gaW1hZ2VfZGF0YS5zcGxpdCgnLCcpWzFdCiAgICAgICAg
CiAgICAgICAgIyBDcmVhciBjb250aW5ndXQgZCdpbWF0Z2UKICAgICAgICBpbWFnZV9jb250ZW50
ID0gSW1hZ2VDb250ZW50KGltYWdlX2Jhc2U2ND1pbWFnZV9kYXRhKQogICAgICAgIAogICAgICAg
ICMgRW52aWFyIGltYXRnZSBpIHByb21wdAogICAgICAgIHVzZXJfbWVzc2FnZSA9IFVzZXJNZXNz
YWdlKAogICAgICAgICAgICB0ZXh0PXByb21wdCwKICAgICAgICAgICAgZmlsZV9jb250ZW50cz1b
aW1hZ2VfY29udGVudF0KICAgICAgICApCiAgICAgICAgCiAgICAgICAgcmVzcG9uc2UgPSBhd2Fp
dCBjaGF0LnNlbmRfbWVzc2FnZSh1c2VyX21lc3NhZ2UpCiAgICAgICAgCiAgICAgICAgIyBQYXJz
ZWphciByZXNwb3N0YSBKU09OCiAgICAgICAgaW1wb3J0IGpzb24KICAgICAgICBpbXBvcnQgcmUK
ICAgICAgICAKICAgICAgICAjIEV4dHJldXJlIEpTT04gZGUgbGEgcmVzcG9zdGEgKHBlciBzaSBo
aSBoYSB0ZXh0IGV4dHJhKQogICAgICAgIGpzb25fbWF0Y2ggPSByZS5zZWFyY2gocidcey4qXH0n
LCByZXNwb25zZSwgcmUuRE9UQUxMKQogICAgICAgIGlmIG5vdCBqc29uX21hdGNoOgogICAgICAg
ICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMCwgZGV0YWlsPSJObyBzJ2hh
IHBvZ3V0IHByb2Nlc3NhciBlbCB0aXF1ZXQuIEFzc2VndXJhJ3QgcXVlIGxhIGltYXRnZSDDqXMg
Y2xhcmEgaSBsbGVnaWJsZS4iKQogICAgICAgIAogICAgICAgIHRpY2tldF9kYXRhID0ganNvbi5s
b2Fkcyhqc29uX21hdGNoLmdyb3VwKCkpCiAgICAgICAgCiAgICAgICAgIyBERUJVRzogTG9nIGRl
bCBxdWUgcydoYSBkZXRlY3RhdAogICAgICAgIHByaW50KGYi8J+UjSBPQ1IgREVURUNUQVQ6IHtq
c29uLmR1bXBzKHRpY2tldF9kYXRhLCBpbmRlbnQ9MiwgZW5zdXJlX2FzY2lpPUZhbHNlKX0iKQog
ICAgICAgIAogICAgICAgICMgVmFsaWRhciBkYWRlcyBiw6BzaXF1ZXMKICAgICAgICBpZiBub3Qg
dGlja2V0X2RhdGEuZ2V0KCJ0aWNrZXRfbnVtYmVyIikgb3Igbm90IHRpY2tldF9kYXRhLmdldCgi
YW1vdW50Iik6CiAgICAgICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAw
LCBkZXRhaWw9Ik5vIHMnaGEgcG9ndXQgbGxlZ2lyIGVsIG7Dum1lcm8gZGUgdGlxdWV0IG8gbCdp
bXBvcnQuIEZlcyB1bmEgZm90byBtw6lzIGNsYXJhLiIpCiAgICAgICAgCiAgICAgICAgIyBDb21w
cm92YXIgZHVwbGljYXRzIChtYXRlaXggbsO6bWVybyBkZSB0aXF1ZXQpCiAgICAgICAgZXhpc3Rp
bmcgPSBhd2FpdCBkYi50aWNrZXRzLmZpbmRfb25lKHsidGlja2V0X251bWJlciI6IHRpY2tldF9k
YXRhWyJ0aWNrZXRfbnVtYmVyIl19KQogICAgICAgIGlmIGV4aXN0aW5nOgogICAgICAgICAgICBy
YWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMCwgZGV0YWlsPSJBcXVlc3QgdGlxdWV0
IGphIGhhIGVzdGF0IGVzY2FuZWphdCBhbnRlcmlvcm1lbnQuIikKICAgICAgICAKICAgICAgICAj
IENvbXByb3ZhciBzaSBsJ2VzdGFibGltZW50IGVzdMOgIGFzc29jaWF0IC0gUFJJT1JJVEFUOiBO
SUYKICAgICAgICBlc3RhYmxpc2htZW50X25hbWUgPSB0aWNrZXRfZGF0YS5nZXQoImVzdGFibGlz
aG1lbnQiLCAiIikKICAgICAgICBlc3RhYmxpc2htZW50X25pZiA9IHRpY2tldF9kYXRhLmdldCgi
bmlmIiwgIiIpCiAgICAgICAgCiAgICAgICAgcHJpbnQoZiLwn5SNIEJVU0NBTlQgRVNUQUJMSU1F
TlQ6IikKICAgICAgICBwcmludChmIiAgIE5vbSBkZXRlY3RhdDogJ3tlc3RhYmxpc2htZW50X25h
bWV9JyIpCiAgICAgICAgcHJpbnQoZiIgICBOSUYgZGV0ZWN0YXQ6ICd7ZXN0YWJsaXNobWVudF9u
aWZ9JyIpCiAgICAgICAgCiAgICAgICAgZXN0YWJsaXNobWVudCA9IE5vbmUKICAgICAgICAKICAg
ICAgICAjIFBSSU9SSVRBVCAxOiBCdXNjYXIgcGVyIE5JRiAobcOpcyBmaWFibGUgcXVlIGVsIG5v
bSBjb21lcmNpYWwpCiAgICAgICAgaWYgZXN0YWJsaXNobWVudF9uaWY6CiAgICAgICAgICAgIHBy
aW50KGYiICAg8J+UkSBDZXJjYW50IHBlciBOSUY6ICd7ZXN0YWJsaXNobWVudF9uaWZ9JyIpCiAg
ICAgICAgICAgIGVzdGFibGlzaG1lbnQgPSBhd2FpdCBkYi5lc3RhYmxpc2htZW50cy5maW5kX29u
ZSh7Im5pZiI6IGVzdGFibGlzaG1lbnRfbmlmfSkKICAgICAgICAgICAgaWYgZXN0YWJsaXNobWVu
dDoKICAgICAgICAgICAgICAgIHByaW50KGYiICAg4pyFIFRyb2JhdCBwZXIgTklGISBOb20gYSBC
RDogJ3tlc3RhYmxpc2htZW50WyduYW1lJ119JyIpCiAgICAgICAgCiAgICAgICAgIyBQUklPUklU
QVQgMjogU2kgbm8gdMOpIE5JRiBvIG5vIGVsIHRyb2JhLCBidXNjYXIgcGVyIG5vbQogICAgICAg
IGlmIG5vdCBlc3RhYmxpc2htZW50IGFuZCBlc3RhYmxpc2htZW50X25hbWU6CiAgICAgICAgICAg
IHByaW50KGYiICAg8J+TnSBDZXJjYW50IHBlciBub206ICd7ZXN0YWJsaXNobWVudF9uYW1lfSci
KQogICAgICAgICAgICBxdWVyeSA9IHsibmFtZSI6IHsiJHJlZ2V4IjogZXN0YWJsaXNobWVudF9u
YW1lLCAiJG9wdGlvbnMiOiAiaSJ9fQogICAgICAgICAgICBlc3RhYmxpc2htZW50ID0gYXdhaXQg
ZGIuZXN0YWJsaXNobWVudHMuZmluZF9vbmUocXVlcnkpCiAgICAgICAgICAgIGlmIGVzdGFibGlz
aG1lbnQ6CiAgICAgICAgICAgICAgICBwcmludChmIiAgIOKchSBUcm9iYXQgcGVyIG5vbSEgSUQ6
IHtlc3RhYmxpc2htZW50WydfaWQnXX0iKQogICAgICAgIAogICAgICAgIGlmIG5vdCBlc3RhYmxp
c2htZW50OgogICAgICAgICAgICBwcmludChmIiAgIOKdjCBOTyBUUk9CQVQgYSBsYSBiYXNlIGRl
IGRhZGVzIikKICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbigKICAgICAgICAgICAgICAg
IHN0YXR1c19jb2RlPTQwMCwgCiAgICAgICAgICAgICAgICBkZXRhaWw9ZiJMJ2VzdGFibGltZW50
ICd7ZXN0YWJsaXNobWVudF9uYW1lfScgKE5JRjoge2VzdGFibGlzaG1lbnRfbmlmIG9yICdubyBk
ZXRlY3RhdCd9KSBubyBlc3TDoCBhbCBkaXJlY3RvcmkgZGUgRWwgVG9tYi4gTm9tw6lzIGVscyBl
c3RhYmxpbWVudHMgc29jaXMgcG9kZW4gZ2VuZXJhciBwYXJ0aWNpcGFjaW9ucy4iCiAgICAgICAg
ICAgICkKICAgICAgICAKICAgICAgICAjIENhbGN1bGFyIHBhcnRpY2lwYWNpb25zICgxIHBlciBj
YWRhIDEw4oKsKQogICAgICAgIGFtb3VudCA9IGZsb2F0KHRpY2tldF9kYXRhWyJhbW91bnQiXSkK
ICAgICAgICBwYXJ0aWNpcGF0aW9ucyA9IGludChhbW91bnQgLy8gMTApCiAgICAgICAgCiAgICAg
ICAgaWYgcGFydGljaXBhdGlvbnMgPT0gMDoKICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlv
bihzdGF0dXNfY29kZT00MDAsIGRldGFpbD0iTCdpbXBvcnQgbcOtbmltIHBlciBnZW5lcmFyIHBh
cnRpY2lwYWNpb25zIMOpcyAxMOKCrC4gQXF1ZXN0IHRpcXVldCB0w6kgdW4gaW1wb3J0IGluZmVy
aW9yLiIpCiAgICAgICAgCiAgICAgICAgIyBHdWFyZGFyIHRpcXVldAogICAgICAgIHRpY2tldF9k
YXRlID0gTm9uZQogICAgICAgIGlmIHRpY2tldF9kYXRhLmdldCgiZGF0ZSIpOgogICAgICAgICAg
ICB0cnk6CiAgICAgICAgICAgICAgICB0aWNrZXRfZGF0ZSA9IGRhdGV0aW1lLnN0cnB0aW1lKHRp
Y2tldF9kYXRhWyJkYXRlIl0sICIlZC8lbS8lWSIpCiAgICAgICAgICAgIGV4Y2VwdCAoVmFsdWVF
cnJvciwgVHlwZUVycm9yKToKICAgICAgICAgICAgICAgIHRpY2tldF9kYXRlID0gZGF0ZXRpbWUu
dXRjbm93KCkKICAgICAgICBlbHNlOgogICAgICAgICAgICB0aWNrZXRfZGF0ZSA9IGRhdGV0aW1l
LnV0Y25vdygpCiAgICAgICAgCiAgICAgICAgdGlja2V0X2RvYyA9IHsKICAgICAgICAgICAgInRp
Y2tldF9udW1iZXIiOiB0aWNrZXRfZGF0YVsidGlja2V0X251bWJlciJdLAogICAgICAgICAgICAi
ZXN0YWJsaXNobWVudF9uYW1lIjogZXN0YWJsaXNobWVudF9uYW1lLAogICAgICAgICAgICAiZXN0
YWJsaXNobWVudF9pZCI6IHN0cihlc3RhYmxpc2htZW50WyJfaWQiXSksCiAgICAgICAgICAgICJh
bW91bnQiOiBhbW91bnQsCiAgICAgICAgICAgICJ0aWNrZXRfZGF0ZSI6IHRpY2tldF9kYXRlLAog
ICAgICAgICAgICAiaW1hZ2UiOiByZXF1ZXN0LnRpY2tldF9pbWFnZSwKICAgICAgICAgICAgInVz
ZXJfaWQiOiBzdHIodXNlclsiX2lkIl0pLAogICAgICAgICAgICAicGFydGljaXBhdGlvbnNfZ2Vu
ZXJhdGVkIjogcGFydGljaXBhdGlvbnMsCiAgICAgICAgICAgICJ2YWxpZGF0ZWQiOiBUcnVlLCAg
IyBBdXRvLXZhbGlkYXQgc2kgbCdlc3RhYmxpbWVudCBlc3TDoCBhIGxhIEJECiAgICAgICAgICAg
ICJjcmVhdGVkX2F0IjogZGF0ZXRpbWUudXRjbm93KCkKICAgICAgICB9CiAgICAgICAgCiAgICAg
ICAgYXdhaXQgZGIudGlja2V0cy5pbnNlcnRfb25lKHRpY2tldF9kb2MpCiAgICAgICAgCiAgICAg
ICAgIyBUcmFja2luZyBkZSBwYXJ0aWNpcGFjacOzIHBlciBtYXJjYWRvciAoc2kgbGEgY2FtcGFu
eWEgdMOpIHRhZykKICAgICAgICBhY3RpdmVfY2FtcGFpZ24gPSBhd2FpdCBkYi50aWNrZXRfY2Ft
cGFpZ25zLmZpbmRfb25lKHsiaXNfYWN0aXZlIjogVHJ1ZX0pCiAgICAgICAgaWYgYWN0aXZlX2Nh
bXBhaWduIGFuZCBhY3RpdmVfY2FtcGFpZ24uZ2V0KCJ0YWciKToKICAgICAgICAgICAgYXdhaXQg
dHJhY2tfcGFydGljaXBhdGlvbigKICAgICAgICAgICAgICAgIHVzZXJfaWQ9c3RyKHVzZXJbIl9p
ZCJdKSwKICAgICAgICAgICAgICAgIHRhZz1hY3RpdmVfY2FtcGFpZ25bInRhZyJdLAogICAgICAg
ICAgICAgICAgYWN0aXZpdHlfdHlwZT0idGlja2V0X3NjYW4iLAogICAgICAgICAgICAgICAgYWN0
aXZpdHlfaWQ9c3RyKGFjdGl2ZV9jYW1wYWlnbi5nZXQoIl9pZCIsICIiKSksCiAgICAgICAgICAg
ICAgICBhY3Rpdml0eV90aXRsZT1hY3RpdmVfY2FtcGFpZ24uZ2V0KCJ0aXRsZSIsICJFc2NhbmVq
YSBUaXF1ZXRzIiksCiAgICAgICAgICAgICAgICBtZXRhZGF0YT17CiAgICAgICAgICAgICAgICAg
ICAgImVzdGFibGlzaG1lbnRfbmFtZSI6IGVzdGFibGlzaG1lbnRfbmFtZSwKICAgICAgICAgICAg
ICAgICAgICAiYW1vdW50IjogYW1vdW50LAogICAgICAgICAgICAgICAgICAgICJwYXJ0aWNpcGF0
aW9ucyI6IHBhcnRpY2lwYXRpb25zCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAg
ICAgICAKICAgICAgICAjIEFjdHVhbGl0emFyIHBhcnRpY2lwYWNpb25zIGRlIGwndXN1YXJpCiAg
ICAgICAgdXNlcl9wYXJ0aWNpcGF0aW9uID0gYXdhaXQgZGIuZHJhd19wYXJ0aWNpcGF0aW9ucy5m
aW5kX29uZSh7InVzZXJfaWQiOiBzdHIodXNlclsiX2lkIl0pfSkKICAgICAgICAKICAgICAgICBp
ZiB1c2VyX3BhcnRpY2lwYXRpb246CiAgICAgICAgICAgIGF3YWl0IGRiLmRyYXdfcGFydGljaXBh
dGlvbnMudXBkYXRlX29uZSgKICAgICAgICAgICAgICAgIHsidXNlcl9pZCI6IHN0cih1c2VyWyJf
aWQiXSl9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICIkaW5jIjogewog
ICAgICAgICAgICAgICAgICAgICAgICAicGFydGljaXBhdGlvbnMiOiBwYXJ0aWNpcGF0aW9ucywK
ICAgICAgICAgICAgICAgICAgICAgICAgInRpY2tldHNfY291bnQiOiAxCiAgICAgICAgICAgICAg
ICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiJHNldCI6IHsKICAgICAgICAgICAgICAgICAg
ICAgICAgImxhc3RfdGlja2V0X2RhdGUiOiBkYXRldGltZS51dGNub3coKQogICAgICAgICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAg
ICAgICAgICAgIGF3YWl0IGRiLmRyYXdfcGFydGljaXBhdGlvbnMuaW5zZXJ0X29uZSh7CiAgICAg
ICAgICAgICAgICAidXNlcl9pZCI6IHN0cih1c2VyWyJfaWQiXSksCiAgICAgICAgICAgICAgICAi
cGFydGljaXBhdGlvbnMiOiBwYXJ0aWNpcGF0aW9ucywKICAgICAgICAgICAgICAgICJ0aWNrZXRz
X2NvdW50IjogMSwKICAgICAgICAgICAgICAgICJsYXN0X3RpY2tldF9kYXRlIjogZGF0ZXRpbWUu
dXRjbm93KCkKICAgICAgICAgICAgfSkKICAgICAgICAKICAgICAgICByZXR1cm4gewogICAgICAg
ICAgICAic3VjY2VzcyI6IFRydWUsCiAgICAgICAgICAgICJ0aWNrZXRfbnVtYmVyIjogdGlja2V0
X2RhdGFbInRpY2tldF9udW1iZXIiXSwKICAgICAgICAgICAgImVzdGFibGlzaG1lbnQiOiBlc3Rh
Ymxpc2htZW50X25hbWUsCiAgICAgICAgICAgICJhbW91bnQiOiBhbW91bnQsCiAgICAgICAgICAg
ICJwYXJ0aWNpcGF0aW9ucyI6IHBhcnRpY2lwYXRpb25zLAogICAgICAgICAgICAibWVzc2FnZSI6
IGYi4pyFIFRpcXVldCB2YWxpZGF0ISBIYXMgZ2VuZXJhdCB7cGFydGljaXBhdGlvbnN9IHBhcnRp
Y2lwYWNpw7N7J25zJyBpZiBwYXJ0aWNpcGF0aW9ucyA+IDEgZWxzZSAnJ30iCiAgICAgICAgfQog
ICAgICAgIAogICAgZXhjZXB0IEhUVFBFeGNlcHRpb246CiAgICAgICAgcmFpc2UKICAgIGV4Y2Vw
dCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIkVycm9yIHByb2Nlc3NhbnQgdGlxdWV0
OiB7c3RyKGUpfSIpCiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT01MDAs
IGRldGFpbD1mIkVycm9yIHByb2Nlc3NhbnQgdGlxdWV0OiB7c3RyKGUpfSIpCgpAYXBpX3JvdXRl
ci5nZXQoIi90aWNrZXRzL215LXBhcnRpY2lwYXRpb25zIikKYXN5bmMgZGVmIGdldF9teV9wYXJ0
aWNpcGF0aW9ucyhhdXRob3JpemF0aW9uOiBzdHIgPSBIZWFkZXIoTm9uZSkpOgogICAgIiIiT2J0
ZW5pciBwYXJ0aWNpcGFjaW9ucyBkZSBsJ3VzdWFyaSBhY3R1YWwiIiIKICAgIHVzZXIgPSBhd2Fp
dCBnZXRfdXNlcl9mcm9tX3Rva2VuKGF1dGhvcml6YXRpb24pCiAgICBpZiBub3QgdXNlcjoKICAg
ICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMSwgZGV0YWlsPSJVbmF1dGhv
cml6ZWQiKQogICAgCiAgICB0cnk6CiAgICAgICAgcGFydGljaXBhdGlvbiA9IGF3YWl0IGRiLmRy
YXdfcGFydGljaXBhdGlvbnMuZmluZF9vbmUoeyJ1c2VyX2lkIjogc3RyKHVzZXJbIl9pZCJdKX0p
CiAgICAgICAgCiAgICAgICAgaWYgbm90IHBhcnRpY2lwYXRpb246CiAgICAgICAgICAgIHJldHVy
biB7CiAgICAgICAgICAgICAgICAicGFydGljaXBhdGlvbnMiOiAwLAogICAgICAgICAgICAgICAg
InRpY2tldHNfY291bnQiOiAwLAogICAgICAgICAgICAgICAgImxhc3RfdGlja2V0X2RhdGUiOiBO
b25lCiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICBwYXJ0aWNpcGF0aW9uWydfaWQnXSA9
IHN0cihwYXJ0aWNpcGF0aW9uWydfaWQnXSkKICAgICAgICByZXR1cm4gcGFydGljaXBhdGlvbgog
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3Rh
dHVzX2NvZGU9NTAwLCBkZXRhaWw9c3RyKGUpKQoKQGFwaV9yb3V0ZXIuZ2V0KCIvdGlja2V0cy9t
eS10aWNrZXRzIikKYXN5bmMgZGVmIGdldF9teV90aWNrZXRzKGF1dGhvcml6YXRpb246IHN0ciA9
IEhlYWRlcihOb25lKSk6CiAgICAiIiJPYnRlbmlyIGhpc3RvcmlhbCBkZSB0aXF1ZXRzIGRlIGwn
dXN1YXJpIiIiCiAgICB1c2VyID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihhdXRob3JpemF0
aW9uKQogICAgaWYgbm90IHVzZXI6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNf
Y29kZT00MDEsIGRldGFpbD0iVW5hdXRob3JpemVkIikKICAgIAogICAgdHJ5OgogICAgICAgIHRp
Y2tldHMgPSBhd2FpdCBkYi50aWNrZXRzLmZpbmQoeyJ1c2VyX2lkIjogc3RyKHVzZXJbIl9pZCJd
KX0pLnNvcnQoImNyZWF0ZWRfYXQiLCAtMSkudG9fbGlzdCgxMDApCiAgICAgICAgZm9yIHRpY2tl
dCBpbiB0aWNrZXRzOgogICAgICAgICAgICB0aWNrZXRbJ19pZCddID0gc3RyKHRpY2tldFsnX2lk
J10pCiAgICAgICAgICAgIHRpY2tldFsnaWQnXSA9IHN0cih0aWNrZXRbJ19pZCddKQogICAgICAg
IHJldHVybiB0aWNrZXRzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcmFpc2Ug
SFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT01MDAsIGRldGFpbD1zdHIoZSkpCgojID09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0KIyBHRVNUScOTIERFIENBTVBBTllFUyBERSBUSVFVRVRTIChBRE1JTikKIyA9
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09CgpAYXBpX3JvdXRlci5nZXQoIi90aWNrZXRzL2NhbXBhaWduIikK
YXN5bmMgZGVmIGdldF9hY3RpdmVfY2FtcGFpZ24oKToKICAgICIiIk9idGVuaXIgY2FtcGFueWEg
YWN0aXZhIGRlIHRpcXVldHMgKHDDumJsaWMpIiIiCiAgICB0cnk6CiAgICAgICAgIyBCdXNjYXIg
Y2FtcGFueWEgYWN0aXZhIGRpbnMgZGVsIHBlcsOtb2RlCiAgICAgICAgY2FtcGFpZ24gPSBhd2Fp
dCBkYi50aWNrZXRfY2FtcGFpZ25zLmZpbmRfb25lKHsKICAgICAgICAgICAgImlzX2FjdGl2ZSI6
IFRydWUsCiAgICAgICAgICAgICJzdGFydF9kYXRlIjogeyIkbHRlIjogZGF0ZXRpbWUudXRjbm93
KCl9LAogICAgICAgICAgICAiZW5kX2RhdGUiOiB7IiRndGUiOiBkYXRldGltZS51dGNub3coKX0K
ICAgICAgICB9KQogICAgICAgIAogICAgICAgIGlmIGNhbXBhaWduOgogICAgICAgICAgICBjYW1w
YWlnblsnX2lkJ10gPSBzdHIoY2FtcGFpZ25bJ19pZCddKQogICAgICAgICAgICBjYW1wYWlnblsn
aWQnXSA9IHN0cihjYW1wYWlnblsnX2lkJ10pCiAgICAgICAgcmV0dXJuIGNhbXBhaWduCiAgICBl
eGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNf
Y29kZT01MDAsIGRldGFpbD1zdHIoZSkpCgpAYXBpX3JvdXRlci5nZXQoIi9hZG1pbi90aWNrZXRz
L2NhbXBhaWducyIpCmFzeW5jIGRlZiBnZXRfYWxsX2NhbXBhaWducyhhdXRob3JpemF0aW9uOiBz
dHIgPSBIZWFkZXIoTm9uZSkpOgogICAgIiIiT2J0ZW5pciB0b3RlcyBsZXMgY2FtcGFueWVzIChh
ZG1pbikiIiIKICAgIHVzZXIgPSBhd2FpdCBnZXRfdXNlcl9mcm9tX3Rva2VuKGF1dGhvcml6YXRp
b24pCiAgICBpZiBub3QgdXNlciBvciB1c2VyLmdldCgicm9sZSIpICE9ICJhZG1pbiI6CiAgICAg
ICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDMsIGRldGFpbD0iQWNjZXNzIGRl
bmllZCIpCiAgICAKICAgIHRyeToKICAgICAgICBjYW1wYWlnbnMgPSBhd2FpdCBkYi50aWNrZXRf
Y2FtcGFpZ25zLmZpbmQoKS5zb3J0KCJjcmVhdGVkX2F0IiwgLTEpLnRvX2xpc3QoNTApCiAgICAg
ICAgZm9yIGNhbXBhaWduIGluIGNhbXBhaWduczoKICAgICAgICAgICAgY2FtcGFpZ25bJ19pZCdd
ID0gc3RyKGNhbXBhaWduWydfaWQnXSkKICAgICAgICAgICAgY2FtcGFpZ25bJ2lkJ10gPSBzdHIo
Y2FtcGFpZ25bJ19pZCddKQogICAgICAgIHJldHVybiBjYW1wYWlnbnMKICAgIGV4Y2VwdCBFeGNl
cHRpb24gYXMgZToKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwMCwg
ZGV0YWlsPXN0cihlKSkKCkBhcGlfcm91dGVyLnBvc3QoIi9hZG1pbi90aWNrZXRzL2NhbXBhaWdu
IikKYXN5bmMgZGVmIGNyZWF0ZV9jYW1wYWlnbihjYW1wYWlnbl9kYXRhOiBUaWNrZXRDYW1wYWln
biwgYXV0aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpKToKICAgICIiIkNyZWFyIGNhbXBh
bnlhIGRlIHRpcXVldHMgKGFkbWluKSIiIgogICAgdXNlciA9IGF3YWl0IGdldF91c2VyX2Zyb21f
dG9rZW4oYXV0aG9yaXphdGlvbikKICAgIGlmIG5vdCB1c2VyIG9yIHVzZXIuZ2V0KCJyb2xlIikg
IT0gImFkbWluIjoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMywg
ZGV0YWlsPSJBY2Nlc3MgZGVuaWVkIikKICAgIAogICAgdHJ5OgogICAgICAgIGNhbXBhaWduX2Rp
Y3QgPSBjYW1wYWlnbl9kYXRhLmRpY3QoKQogICAgICAgIHJlc3VsdCA9IGF3YWl0IGRiLnRpY2tl
dF9jYW1wYWlnbnMuaW5zZXJ0X29uZShjYW1wYWlnbl9kaWN0KQogICAgICAgIGNhbXBhaWduX2Rp
Y3RbJ19pZCddID0gc3RyKHJlc3VsdC5pbnNlcnRlZF9pZCkKICAgICAgICBjYW1wYWlnbl9kaWN0
WydpZCddID0gc3RyKHJlc3VsdC5pbnNlcnRlZF9pZCkKICAgICAgICByZXR1cm4gY2FtcGFpZ25f
ZGljdAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRp
b24oc3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9c3RyKGUpKQoKQGFwaV9yb3V0ZXIucHV0KCIvYWRt
aW4vdGlja2V0cy9jYW1wYWlnbi97Y2FtcGFpZ25faWR9IikKYXN5bmMgZGVmIHVwZGF0ZV9jYW1w
YWlnbihjYW1wYWlnbl9pZDogc3RyLCBjYW1wYWlnbl9kYXRhOiBUaWNrZXRDYW1wYWlnbiwgYXV0
aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpKToKICAgICIiIkFjdHVhbGl0emFyIGNhbXBh
bnlhIChhZG1pbikiIiIKICAgIHVzZXIgPSBhd2FpdCBnZXRfdXNlcl9mcm9tX3Rva2VuKGF1dGhv
cml6YXRpb24pCiAgICBpZiBub3QgdXNlciBvciB1c2VyLmdldCgicm9sZSIpICE9ICJhZG1pbiI6
CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDMsIGRldGFpbD0iQWNj
ZXNzIGRlbmllZCIpCiAgICAKICAgIHRyeToKICAgICAgICBjYW1wYWlnbl9kaWN0ID0gY2FtcGFp
Z25fZGF0YS5kaWN0KGV4Y2x1ZGVfdW5zZXQ9VHJ1ZSkKICAgICAgICByZXN1bHQgPSBhd2FpdCBk
Yi50aWNrZXRfY2FtcGFpZ25zLnVwZGF0ZV9vbmUoCiAgICAgICAgICAgIHsiX2lkIjogT2JqZWN0
SWQoY2FtcGFpZ25faWQpfSwKICAgICAgICAgICAgeyIkc2V0IjogY2FtcGFpZ25fZGljdH0KICAg
ICAgICApCiAgICAgICAgaWYgcmVzdWx0Lm1hdGNoZWRfY291bnQgPT0gMDoKICAgICAgICAgICAg
cmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iQ2FtcGFpZ24gbm90
IGZvdW5kIikKICAgICAgICAKICAgICAgICB1cGRhdGVkID0gYXdhaXQgZGIudGlja2V0X2NhbXBh
aWducy5maW5kX29uZSh7Il9pZCI6IE9iamVjdElkKGNhbXBhaWduX2lkKX0pCiAgICAgICAgdXBk
YXRlZFsnX2lkJ10gPSBzdHIodXBkYXRlZFsnX2lkJ10pCiAgICAgICAgdXBkYXRlZFsnaWQnXSA9
IHN0cih1cGRhdGVkWydfaWQnXSkKICAgICAgICByZXR1cm4gdXBkYXRlZAogICAgZXhjZXB0IEV4
Y2VwdGlvbiBhcyBlOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAw
LCBkZXRhaWw9c3RyKGUpKQoKQGFwaV9yb3V0ZXIucG9zdCgiL2FkbWluL3RpY2tldHMvZHJhdyIp
CmFzeW5jIGRlZiBjb25kdWN0X2RyYXcoCiAgICBjYW1wYWlnbl9pZDogc3RyLAogICAgbnVtX3dp
bm5lcnM6IGludCA9IDEsCiAgICBhdXRob3JpemF0aW9uOiBzdHIgPSBIZWFkZXIoTm9uZSkKKToK
ICAgICIiIlJlYWxpdHphciBzb3J0ZWlnIGkgbm90aWZpY2FyIGd1YW55YWRvcnMgKGFkbWluKSIi
IgogICAgdXNlciA9IGF3YWl0IGdldF91c2VyX2Zyb21fdG9rZW4oYXV0aG9yaXphdGlvbikKICAg
IGlmIG5vdCB1c2VyIG9yIHVzZXIuZ2V0KCJyb2xlIikgIT0gImFkbWluIjoKICAgICAgICByYWlz
ZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMywgZGV0YWlsPSJBY2Nlc3MgZGVuaWVkIikK
ICAgIAogICAgdHJ5OgogICAgICAgICMgT2J0ZW5pciBjYW1wYW55YQogICAgICAgIGNhbXBhaWdu
ID0gYXdhaXQgZGIudGlja2V0X2NhbXBhaWducy5maW5kX29uZSh7Il9pZCI6IE9iamVjdElkKGNh
bXBhaWduX2lkKX0pCiAgICAgICAgaWYgbm90IGNhbXBhaWduOgogICAgICAgICAgICByYWlzZSBI
VFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJDYW1wYWlnbiBub3QgZm91bmQi
KQogICAgICAgIAogICAgICAgICMgT2J0ZW5pciB0b3RzIGVscyBwYXJ0aWNpcGFudHMgYW1iIHBh
cnRpY2lwYWNpb25zCiAgICAgICAgcGFydGljaXBhbnRzID0gYXdhaXQgZGIuZHJhd19wYXJ0aWNp
cGF0aW9ucy5maW5kKAogICAgICAgICAgICB7InBhcnRpY2lwYXRpb25zIjogeyIkZ3QiOiAwfX0K
ICAgICAgICApLnRvX2xpc3QoMTAwMCkKICAgICAgICAKICAgICAgICBpZiBsZW4ocGFydGljaXBh
bnRzKSA9PSAwOgogICAgICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQw
MCwgZGV0YWlsPSJObyBoaSBoYSBwYXJ0aWNpcGFudHMgYWwgc29ydGVpZyIpCiAgICAgICAgCiAg
ICAgICAgIyBDcmVhciBwb29sIGRlIHBhcnRpY2lwYWNpb25zIChjYWRhIHBhcnRpY2lwYWNpw7Mg
PSAxIGJpdGxsZXQpCiAgICAgICAgdGlja2V0c19wb29sID0gW10KICAgICAgICBmb3IgcGFydGlj
aXBhbnQgaW4gcGFydGljaXBhbnRzOgogICAgICAgICAgICB1c2VyX2lkID0gcGFydGljaXBhbnRb
InVzZXJfaWQiXQogICAgICAgICAgICBwYXJ0aWNpcGF0aW9ucyA9IHBhcnRpY2lwYW50WyJwYXJ0
aWNpcGF0aW9ucyJdCiAgICAgICAgICAgICMgQWZlZ2lyIHRhbnRzIGJpdGxsZXRzIGNvbSBwYXJ0
aWNpcGFjaW9ucyB0aW5ndWkKICAgICAgICAgICAgdGlja2V0c19wb29sLmV4dGVuZChbdXNlcl9p
ZF0gKiBwYXJ0aWNpcGF0aW9ucykKICAgICAgICAKICAgICAgICAjIFNlbGVjY2lvbmFyIGd1YW55
YWRvcnMgYWxlYXTDsnJpYW1lbnQKICAgICAgICB3aW5uZXJzID0gW10KICAgICAgICBzZWxlY3Rl
ZF9pZHMgPSBzZXQoKQogICAgICAgIAogICAgICAgIGZvciBfIGluIHJhbmdlKG1pbihudW1fd2lu
bmVycywgbGVuKHNldCh0aWNrZXRzX3Bvb2wpKSkpOiAgIyBObyBtw6lzIGd1YW55YWRvcnMgcXVl
IHBhcnRpY2lwYW50cyDDum5pY3MKICAgICAgICAgICAgd2lubmVyX2lkID0gcmFuZG9tLmNob2lj
ZShbdWlkIGZvciB1aWQgaW4gdGlja2V0c19wb29sIGlmIHVpZCBub3QgaW4gc2VsZWN0ZWRfaWRz
XSkKICAgICAgICAgICAgc2VsZWN0ZWRfaWRzLmFkZCh3aW5uZXJfaWQpCiAgICAgICAgICAgIAog
ICAgICAgICAgICAjIE9idGVuaXIgaW5mbyBkZWwgZ3VhbnlhZG9yCiAgICAgICAgICAgIHdpbm5l
cl91c2VyID0gYXdhaXQgZGIudXNlcnMuZmluZF9vbmUoeyJfaWQiOiBPYmplY3RJZCh3aW5uZXJf
aWQpfSkKICAgICAgICAgICAgaWYgd2lubmVyX3VzZXI6CiAgICAgICAgICAgICAgICB3aW5uZXJz
LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAgICAgInVzZXJfaWQiOiB3aW5uZXJfaWQsCiAgICAg
ICAgICAgICAgICAgICAgIm5hbWUiOiB3aW5uZXJfdXNlci5nZXQoIm5hbWUiLCAiU2Vuc2Ugbm9t
IiksCiAgICAgICAgICAgICAgICAgICAgImVtYWlsIjogd2lubmVyX3VzZXIuZ2V0KCJlbWFpbCIs
ICIiKSwKICAgICAgICAgICAgICAgICAgICAicGFydGljaXBhdGlvbnMiOiBuZXh0KHBbInBhcnRp
Y2lwYXRpb25zIl0gZm9yIHAgaW4gcGFydGljaXBhbnRzIGlmIHBbInVzZXJfaWQiXSA9PSB3aW5u
ZXJfaWQpCiAgICAgICAgICAgICAgICB9KQogICAgICAgIAogICAgICAgICMgR3VhcmRhciBzb3J0
ZWlnIGEgbGEgQkQKICAgICAgICBkcmF3X2RvYyA9IHsKICAgICAgICAgICAgImNhbXBhaWduX2lk
IjogY2FtcGFpZ25faWQsCiAgICAgICAgICAgICJkcmF3X2RhdGUiOiBkYXRldGltZS51dGNub3co
KSwKICAgICAgICAgICAgIndpbm5lcnMiOiB3aW5uZXJzLAogICAgICAgICAgICAicHJpemVfZGVz
Y3JpcHRpb24iOiBjYW1wYWlnbi5nZXQoInByaXplX2Rlc2NyaXB0aW9uIiwgIiIpLAogICAgICAg
ICAgICAidG90YWxfcGFydGljaXBhbnRzIjogbGVuKHNldChwWyJ1c2VyX2lkIl0gZm9yIHAgaW4g
cGFydGljaXBhbnRzKSksCiAgICAgICAgICAgICJ0b3RhbF9wYXJ0aWNpcGF0aW9ucyI6IHN1bShw
WyJwYXJ0aWNpcGF0aW9ucyJdIGZvciBwIGluIHBhcnRpY2lwYW50cyksCiAgICAgICAgICAgICJz
dGF0dXMiOiAiY29tcGxldGVkIiwKICAgICAgICAgICAgImNyZWF0ZWRfYXQiOiBkYXRldGltZS51
dGNub3coKQogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXN1bHQgPSBhd2FpdCBkYi5kcmF3
cy5pbnNlcnRfb25lKGRyYXdfZG9jKQogICAgICAgIAogICAgICAgICMgTm90aWZpY2FyIGd1YW55
YWRvcnMKICAgICAgICBmb3Igd2lubmVyIGluIHdpbm5lcnM6CiAgICAgICAgICAgICMgT2J0ZW5p
ciB1c2VyIHBlciBwdXNoIHRva2VuCiAgICAgICAgICAgIHdpbm5lcl91c2VyID0gYXdhaXQgZGIu
dXNlcnMuZmluZF9vbmUoeyJfaWQiOiBPYmplY3RJZCh3aW5uZXJbInVzZXJfaWQiXSl9KQogICAg
ICAgICAgICBpZiB3aW5uZXJfdXNlciBhbmQgd2lubmVyX3VzZXIuZ2V0KCJwdXNoX3Rva2VuIik6
CiAgICAgICAgICAgICAgICBhd2FpdCBzZW5kX25vdGlmaWNhdGlvbl90b191c2VyKAogICAgICAg
ICAgICAgICAgICAgIHdpbm5lcl91c2VyWyJwdXNoX3Rva2VuIl0sCiAgICAgICAgICAgICAgICAg
ICAgIvCfjokgSGFzIEd1YW55YXQhIiwKICAgICAgICAgICAgICAgICAgICBmIkZlbGljaXRhdHMh
IEhhcyBndWFueWF0IGFsIHNvcnRlaWcgbWVuc3VhbCBkZSBFbCBUb21iLiBQcmVtaToge2NhbXBh
aWduLmdldCgncHJpemVfZGVzY3JpcHRpb24nLCAnUHJlbWkgc29ycHJlc2EnKX0iCiAgICAgICAg
ICAgICAgICApCiAgICAgICAgCiAgICAgICAgIyBSZXNldCBwYXJ0aWNpcGFjaW9ucyBkZSB0b3Rz
IGVscyB1c3VhcmlzCiAgICAgICAgYXdhaXQgZGIuZHJhd19wYXJ0aWNpcGF0aW9ucy51cGRhdGVf
bWFueSgKICAgICAgICAgICAge30sCiAgICAgICAgICAgIHsiJHNldCI6IHsicGFydGljaXBhdGlv
bnMiOiAwLCAidGlja2V0c19jb3VudCI6IDB9fQogICAgICAgICkKICAgICAgICAKICAgICAgICBy
ZXR1cm4gewogICAgICAgICAgICAic3VjY2VzcyI6IFRydWUsCiAgICAgICAgICAgICJkcmF3X2lk
Ijogc3RyKHJlc3VsdC5pbnNlcnRlZF9pZCksCiAgICAgICAgICAgICJ3aW5uZXJzIjogd2lubmVy
cywKICAgICAgICAgICAgInRvdGFsX3BhcnRpY2lwYW50cyI6IGRyYXdfZG9jWyJ0b3RhbF9wYXJ0
aWNpcGFudHMiXSwKICAgICAgICAgICAgInRvdGFsX3BhcnRpY2lwYXRpb25zIjogZHJhd19kb2Nb
InRvdGFsX3BhcnRpY2lwYXRpb25zIl0sCiAgICAgICAgICAgICJtZXNzYWdlIjogZiJTb3J0ZWln
IHJlYWxpdHphdCBhbWIgw6h4aXQuIHtsZW4od2lubmVycyl9IGd1YW55YWRvcihzKSBub3RpZmlj
YXQocykgaSBwYXJ0aWNpcGFjaW9ucyByZXNldGVqYWRlcy4iCiAgICAgICAgfQogICAgICAgIAog
ICAgZXhjZXB0IEhUVFBFeGNlcHRpb246CiAgICAgICAgcmFpc2UKICAgIGV4Y2VwdCBFeGNlcHRp
b24gYXMgZToKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwMCwgZGV0
YWlsPXN0cihlKSkKCkBhcGlfcm91dGVyLmdldCgiL2FkbWluL3RpY2tldHMvZHJhd3MiKQphc3lu
YyBkZWYgZ2V0X2FsbF9kcmF3cyhhdXRob3JpemF0aW9uOiBzdHIgPSBIZWFkZXIoTm9uZSkpOgog
ICAgIiIiT2J0ZW5pciBoaXN0b3JpYWwgZGUgc29ydGVqb3MgKGFkbWluKSIiIgogICAgdXNlciA9
IGF3YWl0IGdldF91c2VyX2Zyb21fdG9rZW4oYXV0aG9yaXphdGlvbikKICAgIGlmIG5vdCB1c2Vy
IG9yIHVzZXIuZ2V0KCJyb2xlIikgIT0gImFkbWluIjoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0
aW9uKHN0YXR1c19jb2RlPTQwMywgZGV0YWlsPSJBY2Nlc3MgZGVuaWVkIikKICAgIAogICAgdHJ5
OgogICAgICAgIGRyYXdzID0gYXdhaXQgZGIuZHJhd3MuZmluZCgpLnNvcnQoImRyYXdfZGF0ZSIs
IC0xKS50b19saXN0KDUwKQogICAgICAgIGZvciBkcmF3IGluIGRyYXdzOgogICAgICAgICAgICBk
cmF3WydfaWQnXSA9IHN0cihkcmF3WydfaWQnXSkKICAgICAgICAgICAgZHJhd1snaWQnXSA9IHN0
cihkcmF3WydfaWQnXSkKICAgICAgICByZXR1cm4gZHJhd3MKICAgIGV4Y2VwdCBFeGNlcHRpb24g
YXMgZToKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwMCwgZGV0YWls
PXN0cihlKSkKCkBhcGlfcm91dGVyLmdldCgiL2FkbWluL3RpY2tldHMvcGFydGljaXBhbnRzIikK
YXN5bmMgZGVmIGdldF9hbGxfcGFydGljaXBhbnRzKGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRl
cihOb25lKSk6CiAgICAiIiJPYnRlbmlyIGxsaXN0YSBkZSB0b3RzIGVscyBwYXJ0aWNpcGFudHMg
YWN0dWFscyAoYWRtaW4pIiIiCiAgICB1c2VyID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihh
dXRob3JpemF0aW9uKQogICAgaWYgbm90IHVzZXIgb3IgdXNlci5nZXQoInJvbGUiKSAhPSAiYWRt
aW4iOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAzLCBkZXRhaWw9
IkFjY2VzcyBkZW5pZWQiKQogICAgCiAgICB0cnk6CiAgICAgICAgcGFydGljaXBhbnRzID0gYXdh
aXQgZGIuZHJhd19wYXJ0aWNpcGF0aW9ucy5maW5kKAogICAgICAgICAgICB7InBhcnRpY2lwYXRp
b25zIjogeyIkZ3QiOiAwfX0KICAgICAgICApLnNvcnQoInBhcnRpY2lwYXRpb25zIiwgLTEpLnRv
X2xpc3QoMTAwMCkKICAgICAgICAKICAgICAgICAjIEVucmlxdWlyIGFtYiBpbmZvIGQndXN1YXJp
CiAgICAgICAgZW5yaWNoZWQgPSBbXQogICAgICAgIGZvciBwIGluIHBhcnRpY2lwYW50czoKICAg
ICAgICAgICAgdXNlcl9kYXRhID0gYXdhaXQgZGIudXNlcnMuZmluZF9vbmUoeyJfaWQiOiBPYmpl
Y3RJZChwWyJ1c2VyX2lkIl0pfSkKICAgICAgICAgICAgaWYgdXNlcl9kYXRhOgogICAgICAgICAg
ICAgICAgZW5yaWNoZWQuYXBwZW5kKHsKICAgICAgICAgICAgICAgICAgICAidXNlcl9pZCI6IHBb
InVzZXJfaWQiXSwKICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHVzZXJfZGF0YS5nZXQoIm5h
bWUiLCAiU2Vuc2Ugbm9tIiksCiAgICAgICAgICAgICAgICAgICAgImVtYWlsIjogdXNlcl9kYXRh
LmdldCgiZW1haWwiLCAiIiksCiAgICAgICAgICAgICAgICAgICAgInBhcnRpY2lwYXRpb25zIjog
cFsicGFydGljaXBhdGlvbnMiXSwKICAgICAgICAgICAgICAgICAgICAidGlja2V0c19jb3VudCI6
IHBbInRpY2tldHNfY291bnQiXSwKICAgICAgICAgICAgICAgICAgICAibGFzdF90aWNrZXRfZGF0
ZSI6IHAuZ2V0KCJsYXN0X3RpY2tldF9kYXRlIikKICAgICAgICAgICAgICAgIH0pCiAgICAgICAg
CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgInRvdGFsX3BhcnRpY2lwYW50cyI6IGxlbihl
bnJpY2hlZCksCiAgICAgICAgICAgICJ0b3RhbF9wYXJ0aWNpcGF0aW9ucyI6IHN1bShwWyJwYXJ0
aWNpcGF0aW9ucyJdIGZvciBwIGluIGVucmljaGVkKSwKICAgICAgICAgICAgInBhcnRpY2lwYW50
cyI6IGVucmljaGVkCiAgICAgICAgfQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAg
IHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9c3RyKGUpKQoKQGFw
aV9yb3V0ZXIuZGVsZXRlKCIvYWRtaW4vdGlja2V0cy9jYW1wYWlnbi97Y2FtcGFpZ25faWR9IikK
YXN5bmMgZGVmIGRlbGV0ZV9jYW1wYWlnbihjYW1wYWlnbl9pZDogc3RyLCBhdXRob3JpemF0aW9u
OiBzdHIgPSBIZWFkZXIoTm9uZSkpOgogICAgIiIiRWxpbWluYXIgY2FtcGFueWEgKGFkbWluKSIi
IgogICAgdXNlciA9IGF3YWl0IGdldF91c2VyX2Zyb21fdG9rZW4oYXV0aG9yaXphdGlvbikKICAg
IGlmIG5vdCB1c2VyIG9yIHVzZXIuZ2V0KCJyb2xlIikgIT0gImFkbWluIjoKICAgICAgICByYWlz
ZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMywgZGV0YWlsPSJBY2Nlc3MgZGVuaWVkIikK
ICAgIAogICAgdHJ5OgogICAgICAgIHJlc3VsdCA9IGF3YWl0IGRiLnRpY2tldF9jYW1wYWlnbnMu
ZGVsZXRlX29uZSh7Il9pZCI6IE9iamVjdElkKGNhbXBhaWduX2lkKX0pCiAgICAgICAgaWYgcmVz
dWx0LmRlbGV0ZWRfY291bnQgPT0gMDoKICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihz
dGF0dXNfY29kZT00MDQsIGRldGFpbD0iQ2FtcGFpZ24gbm90IGZvdW5kIikKICAgICAgICByZXR1
cm4geyJtZXNzYWdlIjogIkNhbXBhaWduIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5In0KICAgIGV4Y2Vw
dCBFeGNlcHRpb24gYXMgZToKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2Rl
PTUwMCwgZGV0YWlsPXN0cihlKSkKCkBhcGlfcm91dGVyLnBvc3QoIi9wcm9tb3Rpb25zIikKYXN5
bmMgZGVmIGNyZWF0ZV9wcm9tb3Rpb24oCiAgICBwcm9tb3Rpb246IFByb21vdGlvbkNyZWF0ZSwK
ICAgIGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRlcihOb25lKQopOgogICAgIiIiQ3JlYXIgdW5h
IG5vdmEgcHJvbW9jacOzIiIiCiAgICB1c2VyID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihh
dXRob3JpemF0aW9uKQogICAgaWYgbm90IHVzZXI6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlv
bihzdGF0dXNfY29kZT00MDEsIGRldGFpbD0iTm8gYXV0b3JpdHphdCIpCiAgICAKICAgIHVzZXJf
aWQgPSBzdHIodXNlclsnX2lkJ10pCiAgICAKICAgICMgVmVyaWZpY2FyIHBlcm1pc29zCiAgICBp
ZiB1c2VyLmdldCgncm9sZScpIG5vdCBpbiBbJ2FkbWluJywgJ2xvY2FsX2Fzc29jaWF0JywgJ2Vu
dGl0YXRfY29sYWJvcmFkb3JhJywgJ21lbWJyZV9jb25zZWxsJ106CiAgICAgICAgcmFpc2UgSFRU
UEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDMsIGRldGFpbD0iTm8gdGVucyBwZXJtw61zIHBlciBj
cmVhciBwcm9tb2Npb25zIikKICAgIAogICAgcHJvbW9fZGljdCA9IHByb21vdGlvbi5kaWN0KCkK
ICAgIHByb21vX2RpY3RbJ2NyZWF0ZWRfYnknXSA9IHVzZXJfaWQKICAgIHByb21vX2RpY3RbJ2Ny
ZWF0ZWRfYXQnXSA9IGRhdGV0aW1lLnV0Y25vdygpCiAgICBwcm9tb19kaWN0Wyd1cGRhdGVkX2F0
J10gPSBkYXRldGltZS51dGNub3coKQogICAgCiAgICAjIENvbnZlcnRpciBzdHJpbmdzIElTTyBh
IGRhdGV0aW1lCiAgICBmcm9tIGRhdGV1dGlsIGltcG9ydCBwYXJzZXIKICAgIGlmIGlzaW5zdGFu
Y2UocHJvbW9fZGljdC5nZXQoJ3ZhbGlkX2Zyb20nKSwgc3RyKToKICAgICAgICBwcm9tb19kaWN0
Wyd2YWxpZF9mcm9tJ10gPSBwYXJzZXIuaXNvcGFyc2UocHJvbW9fZGljdFsndmFsaWRfZnJvbSdd
KQogICAgaWYgaXNpbnN0YW5jZShwcm9tb19kaWN0LmdldCgndmFsaWRfdW50aWwnKSwgc3RyKToK
ICAgICAgICBwcm9tb19kaWN0Wyd2YWxpZF91bnRpbCddID0gcGFyc2VyLmlzb3BhcnNlKHByb21v
X2RpY3RbJ3ZhbGlkX3VudGlsJ10pCiAgICAKICAgICMgU2kgw6lzIGFkbWluLCBhcHJvdmFkYSBh
dXRvbcOgdGljYW1lbnQ7IHNpIG5vLCBwZW5kaW5nCiAgICBpZiB1c2VyLmdldCgncm9sZScpID09
ICdhZG1pbic6CiAgICAgICAgcHJvbW9fZGljdFsnc3RhdHVzJ10gPSAnYXBwcm92ZWQnCiAgICAg
ICAgcHJvbW9fZGljdFsncmV2aWV3ZWRfYnknXSA9IHVzZXJfaWQKICAgICAgICBwcm9tb19kaWN0
WydyZXZpZXdlZF9hdCddID0gZGF0ZXRpbWUudXRjbm93KCkKICAgIGVsc2U6CiAgICAgICAgcHJv
bW9fZGljdFsnc3RhdHVzJ10gPSAncGVuZGluZycKICAgIAogICAgcmVzdWx0ID0gYXdhaXQgZGIu
cHJvbW90aW9ucy5pbnNlcnRfb25lKHByb21vX2RpY3QpCiAgICBwcm9tb19kaWN0WydfaWQnXSA9
IHN0cihyZXN1bHQuaW5zZXJ0ZWRfaWQpCiAgICAKICAgICMgU2kgbm8gw6lzIGFkbWluLCBlbnZp
YXIgbm90aWZpY2FjacOzIHB1c2ggYWxzIGFkbWluaXN0cmFkb3JzCiAgICBpZiB1c2VyLmdldCgn
cm9sZScpICE9ICdhZG1pbic6CiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIE9idGVuaXIgdG90
cyBlbHMgdG9rZW5zIHB1c2ggZGVscyBhZG1pbnMKICAgICAgICAgICAgYWRtaW5zID0gYXdhaXQg
ZGIudXNlcnMuZmluZCh7InJvbGUiOiAiYWRtaW4ifSkudG9fbGlzdCgxMDApCiAgICAgICAgICAg
IHB1c2hfdG9rZW5zID0gW10KICAgICAgICAgICAgZm9yIGFkbWluIGluIGFkbWluczoKICAgICAg
ICAgICAgICAgIGlmIGFkbWluLmdldCgncHVzaF90b2tlbicpOgogICAgICAgICAgICAgICAgICAg
IHB1c2hfdG9rZW5zLmFwcGVuZChhZG1pblsncHVzaF90b2tlbiddKQogICAgICAgICAgICAKICAg
ICAgICAgICAgaWYgcHVzaF90b2tlbnM6CiAgICAgICAgICAgICAgICBpbXBvcnQgaHR0cHgKICAg
ICAgICAgICAgICAgICMgRW52aWFyIG5vdGlmaWNhY2nDsyBwdXNoIHZpYSBFeHBvIFB1c2ggTm90
aWZpY2F0aW9ucwogICAgICAgICAgICAgICAgbWVzc2FnZXMgPSBbXQogICAgICAgICAgICAgICAg
Zm9yIHRva2VuIGluIHB1c2hfdG9rZW5zOgogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLmFw
cGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0byI6IHRva2VuLAogICAgICAgICAgICAg
ICAgICAgICAgICAic291bmQiOiAiZGVmYXVsdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ0
aXRsZSI6ICJOb3ZhIHByb21vY2nDsyBwZW5kZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAg
ImJvZHkiOiBmIvCfk6Ige3Byb21vdGlvbi50aXRsZX0gLSBQZW5kZW50IGQnYXByb3ZhY2nDsyIs
CiAgICAgICAgICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgInR5cGUiOiAibmV3X3Byb21vdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAicHJvbW90aW9uX2lkIjogc3RyKHJlc3VsdC5pbnNlcnRlZF9pZCksCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAicm91dGUiOiAiL2FkbWluL29mZmVycyIKICAgICAgICAgICAgICAgICAg
ICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAKICAgICAgICAg
ICAgICAgIGFzeW5jIHdpdGggaHR0cHguQXN5bmNDbGllbnQoKSBhcyBjbGllbnQ6CiAgICAgICAg
ICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQucG9zdCgKICAgICAgICAgICAgICAg
ICAgICAgICAgImh0dHBzOi8vZXhwLmhvc3QvLS0vYXBpL3YyL3B1c2gvc2VuZCIsCiAgICAgICAg
ICAgICAgICAgICAgICAgIGpzb249bWVzc2FnZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIGhl
YWRlcnM9eyJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiIsICJDb250ZW50LVR5cGUiOiAiYXBw
bGljYXRpb24vanNvbiJ9CiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAg
IHByaW50KGYi4pyFIE5vdGlmaWNhY2lvbnMgcHVzaCBlbnZpYWRlcyBhbHMgYWRtaW5pc3RyYWRv
cnM6IHtyZXNwb25zZS5zdGF0dXNfY29kZX0iKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMg
ZToKICAgICAgICAgICAgcHJpbnQoZiLinYwgRXJyb3IgZW52aWFudCBub3RpZmljYWNpb25zIHB1
c2g6IHtlfSIpCiAgICAKICAgIHJldHVybiBwcm9tb19kaWN0CgpAYXBpX3JvdXRlci5wdXQoIi9w
cm9tb3Rpb25zL3twcm9tb3Rpb25faWR9IikKYXN5bmMgZGVmIHVwZGF0ZV9wcm9tb3Rpb24oCiAg
ICBwcm9tb3Rpb25faWQ6IHN0ciwKICAgIHByb21vdGlvbjogUHJvbW90aW9uQ3JlYXRlLAogICAg
YXV0aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpCik6CiAgICAiIiJBY3R1YWxpdHphciB1
bmEgcHJvbW9jacOzIiIiCiAgICB1c2VyID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihhdXRo
b3JpemF0aW9uKQogICAgaWYgbm90IHVzZXI6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihz
dGF0dXNfY29kZT00MDEsIGRldGFpbD0iTm8gYXV0b3JpdHphdCIpCiAgICAKICAgIHVzZXJfaWQg
PSBzdHIodXNlclsnX2lkJ10pCiAgICAKICAgIGV4aXN0aW5nID0gYXdhaXQgZGIucHJvbW90aW9u
cy5maW5kX29uZSh7Il9pZCI6IE9iamVjdElkKHByb21vdGlvbl9pZCl9KQogICAgaWYgbm90IGV4
aXN0aW5nOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDA0LCBkZXRh
aWw9IlByb21vY2nDsyBubyB0cm9iYWRhIikKICAgIAogICAgIyBOb23DqXMgZWwgY3JlYWRvciBv
IGFkbWluIHBvdCBlZGl0YXIKICAgIGlmIHN0cihleGlzdGluZ1snY3JlYXRlZF9ieSddKSAhPSB1
c2VyX2lkIGFuZCB1c2VyLmdldCgncm9sZScpICE9ICdhZG1pbic6CiAgICAgICAgcmFpc2UgSFRU
UEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDMsIGRldGFpbD0iTm8gdGVucyBwZXJtw61zIHBlciBl
ZGl0YXIgYXF1ZXN0YSBwcm9tb2Npw7MiKQogICAgCiAgICB1cGRhdGVfZGF0YSA9IHByb21vdGlv
bi5kaWN0KCkKICAgIHVwZGF0ZV9kYXRhWyd1cGRhdGVkX2F0J10gPSBkYXRldGltZS51dGNub3co
KQogICAgCiAgICAjIENvbnZlcnRpciBzdHJpbmdzIElTTyBhIGRhdGV0aW1lCiAgICBmcm9tIGRh
dGV1dGlsIGltcG9ydCBwYXJzZXIKICAgIGlmIGlzaW5zdGFuY2UodXBkYXRlX2RhdGEuZ2V0KCd2
YWxpZF9mcm9tJyksIHN0cik6CiAgICAgICAgdXBkYXRlX2RhdGFbJ3ZhbGlkX2Zyb20nXSA9IHBh
cnNlci5pc29wYXJzZSh1cGRhdGVfZGF0YVsndmFsaWRfZnJvbSddKQogICAgaWYgaXNpbnN0YW5j
ZSh1cGRhdGVfZGF0YS5nZXQoJ3ZhbGlkX3VudGlsJyksIHN0cik6CiAgICAgICAgdXBkYXRlX2Rh
dGFbJ3ZhbGlkX3VudGlsJ10gPSBwYXJzZXIuaXNvcGFyc2UodXBkYXRlX2RhdGFbJ3ZhbGlkX3Vu
dGlsJ10pCiAgICAKICAgICMgU2kgZWRpdGEgdW4gYXNzb2NpYXQsIHRvcm5hIGEgcGVuZGluZwog
ICAgaWYgdXNlci5nZXQoJ3JvbGUnKSAhPSAnYWRtaW4nIGFuZCBleGlzdGluZy5nZXQoJ3N0YXR1
cycpID09ICdhcHByb3ZlZCc6CiAgICAgICAgdXBkYXRlX2RhdGFbJ3N0YXR1cyddID0gJ3BlbmRp
bmcnCiAgICAgICAgdXBkYXRlX2RhdGFbJ3Jldmlld2VkX2J5J10gPSBOb25lCiAgICAgICAgdXBk
YXRlX2RhdGFbJ3Jldmlld2VkX2F0J10gPSBOb25lCiAgICAKICAgIGF3YWl0IGRiLnByb21vdGlv
bnMudXBkYXRlX29uZSgKICAgICAgICB7Il9pZCI6IE9iamVjdElkKHByb21vdGlvbl9pZCl9LAog
ICAgICAgIHsiJHNldCI6IHVwZGF0ZV9kYXRhfQogICAgKQogICAgCiAgICB1cGRhdGVkID0gYXdh
aXQgZGIucHJvbW90aW9ucy5maW5kX29uZSh7Il9pZCI6IE9iamVjdElkKHByb21vdGlvbl9pZCl9
KQogICAgdXBkYXRlZFsnX2lkJ10gPSBzdHIodXBkYXRlZFsnX2lkJ10pCiAgICAKICAgIHJldHVy
biB1cGRhdGVkCgpAYXBpX3JvdXRlci5kZWxldGUoIi9wcm9tb3Rpb25zL3twcm9tb3Rpb25faWR9
IikKYXN5bmMgZGVmIGRlbGV0ZV9wcm9tb3Rpb24oCiAgICBwcm9tb3Rpb25faWQ6IHN0ciwKICAg
IGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRlcihOb25lKQopOgogICAgIiIiRWxpbWluYXIgdW5h
IHByb21vY2nDsyIiIgogICAgdXNlciA9IGF3YWl0IGdldF91c2VyX2Zyb21fdG9rZW4oYXV0aG9y
aXphdGlvbikKICAgIGlmIG5vdCB1c2VyOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3Rh
dHVzX2NvZGU9NDAxLCBkZXRhaWw9Ik5vIGF1dG9yaXR6YXQiKQogICAgCiAgICB1c2VyX2lkID0g
c3RyKHVzZXJbJ19pZCddKQogICAgCiAgICBleGlzdGluZyA9IGF3YWl0IGRiLnByb21vdGlvbnMu
ZmluZF9vbmUoeyJfaWQiOiBPYmplY3RJZChwcm9tb3Rpb25faWQpfSkKICAgIGlmIG5vdCBleGlz
dGluZzoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWls
PSJQcm9tb2Npw7Mgbm8gdHJvYmFkYSIpCiAgICAKICAgICMgTm9tw6lzIGVsIGNyZWFkb3IgbyBh
ZG1pbiBwb3QgZWxpbWluYXIKICAgIGlmIHN0cihleGlzdGluZ1snY3JlYXRlZF9ieSddKSAhPSB1
c2VyX2lkIGFuZCB1c2VyLmdldCgncm9sZScpICE9ICdhZG1pbic6CiAgICAgICAgcmFpc2UgSFRU
UEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDMsIGRldGFpbD0iTm8gdGVucyBwZXJtw61zIHBlciBl
bGltaW5hciBhcXVlc3RhIHByb21vY2nDsyIpCiAgICAKICAgIGF3YWl0IGRiLnByb21vdGlvbnMu
ZGVsZXRlX29uZSh7Il9pZCI6IE9iamVjdElkKHByb21vdGlvbl9pZCl9KQogICAgCiAgICByZXR1
cm4geyJzdWNjZXNzIjogVHJ1ZSwgIm1lc3NhZ2UiOiAiUHJvbW9jacOzIGVsaW1pbmFkYSJ9CgpA
YXBpX3JvdXRlci5wb3N0KCIvcHJvbW90aW9ucy97cHJvbW90aW9uX2lkfS9hcHByb3ZlIikKYXN5
bmMgZGVmIGFwcHJvdmVfcHJvbW90aW9uKAogICAgcHJvbW90aW9uX2lkOiBzdHIsCiAgICBhdXRo
b3JpemF0aW9uOiBzdHIgPSBIZWFkZXIoTm9uZSkKKToKICAgICIiIkFwcm92YXIgdW5hIHByb21v
Y2nDsyAobm9tw6lzIGFkbWlucykiIiIKICAgIHVzZXIgPSBhd2FpdCBnZXRfdXNlcl9mcm9tX3Rv
a2VuKGF1dGhvcml6YXRpb24pCiAgICBpZiBub3QgdXNlciBvciB1c2VyLmdldCgncm9sZScpICE9
ICdhZG1pbic6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDMsIGRl
dGFpbD0iTm9tw6lzIGFkbWluaXN0cmFkb3JzIHBvZGVuIGFwcm92YXIgcHJvbW9jaW9ucyIpCiAg
ICAKICAgIHVzZXJfaWQgPSBzdHIodXNlclsnX2lkJ10pCiAgICAKICAgICMgT2J0ZW5pciBsYSBw
cm9tb2Npw7MgYWJhbnMgZCdhY3R1YWxpdHphcgogICAgcHJvbW90aW9uID0gYXdhaXQgZGIucHJv
bW90aW9ucy5maW5kX29uZSh7Il9pZCI6IE9iamVjdElkKHByb21vdGlvbl9pZCl9KQogICAgaWYg
bm90IHByb21vdGlvbjoKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQw
NCwgZGV0YWlsPSJQcm9tb2Npw7Mgbm8gdHJvYmFkYSIpCiAgICAKICAgIHJlc3VsdCA9IGF3YWl0
IGRiLnByb21vdGlvbnMudXBkYXRlX29uZSgKICAgICAgICB7Il9pZCI6IE9iamVjdElkKHByb21v
dGlvbl9pZCl9LAogICAgICAgIHsKICAgICAgICAgICAgIiRzZXQiOiB7CiAgICAgICAgICAgICAg
ICAic3RhdHVzIjogImFwcHJvdmVkIiwKICAgICAgICAgICAgICAgICJyZXZpZXdlZF9ieSI6IHVz
ZXJfaWQsCiAgICAgICAgICAgICAgICAicmV2aWV3ZWRfYXQiOiBkYXRldGltZS51dGNub3coKSwK
ICAgICAgICAgICAgICAgICJyZWplY3Rpb25fcmVhc29uIjogTm9uZQogICAgICAgICAgICB9CiAg
ICAgICAgfQogICAgKQogICAgCiAgICBpZiByZXN1bHQubWF0Y2hlZF9jb3VudCA9PSAwOgogICAg
ICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDA0LCBkZXRhaWw9IlByb21vY2nD
syBubyB0cm9iYWRhIikKICAgIAogICAgIyBFbnZpYXIgbm90aWZpY2FjacOzIHB1c2ggYWwgY3Jl
YWRvcgogICAgdHJ5OgogICAgICAgIGNyZWF0b3IgPSBhd2FpdCBkYi51c2Vycy5maW5kX29uZSh7
Il9pZCI6IE9iamVjdElkKHByb21vdGlvblsiY3JlYXRlZF9ieSJdKX0pCiAgICAgICAgaWYgY3Jl
YXRvciBhbmQgY3JlYXRvci5nZXQoInB1c2hfdG9rZW4iKToKICAgICAgICAgICAgc2VuZF9ub3Rp
ZmljYXRpb25fdG9fdXNlcigKICAgICAgICAgICAgICAgIGNyZWF0b3JbInB1c2hfdG9rZW4iXSwK
ICAgICAgICAgICAgICAgICLinIUgUHJvbW9jacOzIEFwcm92YWRhIiwKICAgICAgICAgICAgICAg
IGYiTGEgdGV2YSBwcm9tb2Npw7MgJ3twcm9tb3Rpb24uZ2V0KCd0aXRsZScsICcnKX0nIGhhIGVz
dGF0IGFwcm92YWRhIGkgamEgw6lzIHZpc2libGUgcGVyIGEgdG90cyBlbHMgdXN1YXJpcyEiCiAg
ICAgICAgICAgICkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIkVy
cm9yIGVudmlhbnQgbm90aWZpY2FjacOzIGQnYXByb3ZhY2nDszoge3N0cihlKX0iKQogICAgCiAg
ICByZXR1cm4geyJzdWNjZXNzIjogVHJ1ZSwgIm1lc3NhZ2UiOiAiUHJvbW9jacOzIGFwcm92YWRh
In0KCkBhcGlfcm91dGVyLnBvc3QoIi9wcm9tb3Rpb25zL3twcm9tb3Rpb25faWR9L3JlamVjdCIp
CmFzeW5jIGRlZiByZWplY3RfcHJvbW90aW9uKAogICAgcHJvbW90aW9uX2lkOiBzdHIsCiAgICBy
ZWFzb246IHN0ciwKICAgIGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRlcihOb25lKQopOgogICAg
IiIiUmVidXRqYXIgdW5hIHByb21vY2nDsyAobm9tw6lzIGFkbWlucykiIiIKICAgIHVzZXIgPSBh
d2FpdCBnZXRfdXNlcl9mcm9tX3Rva2VuKGF1dGhvcml6YXRpb24pCiAgICBpZiBub3QgdXNlciBv
ciB1c2VyLmdldCgncm9sZScpICE9ICdhZG1pbic6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlv
bihzdGF0dXNfY29kZT00MDMsIGRldGFpbD0iTm9tw6lzIGFkbWluaXN0cmFkb3JzIHBvZGVuIHJl
YnV0amFyIHByb21vY2lvbnMiKQogICAgCiAgICB1c2VyX2lkID0gc3RyKHVzZXJbJ19pZCddKQog
ICAgCiAgICAjIE9idGVuaXIgbGEgcHJvbW9jacOzIGFiYW5zIGQnYWN0dWFsaXR6YXIKICAgIHBy
b21vdGlvbiA9IGF3YWl0IGRiLnByb21vdGlvbnMuZmluZF9vbmUoeyJfaWQiOiBPYmplY3RJZChw
cm9tb3Rpb25faWQpfSkKICAgIGlmIG5vdCBwcm9tb3Rpb246CiAgICAgICAgcmFpc2UgSFRUUEV4
Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iUHJvbW9jacOzIG5vIHRyb2JhZGEiKQog
ICAgCiAgICByZXN1bHQgPSBhd2FpdCBkYi5wcm9tb3Rpb25zLnVwZGF0ZV9vbmUoCiAgICAgICAg
eyJfaWQiOiBPYmplY3RJZChwcm9tb3Rpb25faWQpfSwKICAgICAgICB7CiAgICAgICAgICAgICIk
c2V0IjogewogICAgICAgICAgICAgICAgInN0YXR1cyI6ICJyZWplY3RlZCIsCiAgICAgICAgICAg
ICAgICAicmV2aWV3ZWRfYnkiOiB1c2VyX2lkLAogICAgICAgICAgICAgICAgInJldmlld2VkX2F0
IjogZGF0ZXRpbWUudXRjbm93KCksCiAgICAgICAgICAgICAgICAicmVqZWN0aW9uX3JlYXNvbiI6
IHJlYXNvbgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgKQogICAgCiAgICBpZiByZXN1bHQu
bWF0Y2hlZF9jb3VudCA9PSAwOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2Nv
ZGU9NDA0LCBkZXRhaWw9IlByb21vY2nDsyBubyB0cm9iYWRhIikKICAgIAogICAgIyBFbnZpYXIg
bm90aWZpY2FjacOzIHB1c2ggYWwgY3JlYWRvcgogICAgdHJ5OgogICAgICAgIGNyZWF0b3IgPSBh
d2FpdCBkYi51c2Vycy5maW5kX29uZSh7Il9pZCI6IE9iamVjdElkKHByb21vdGlvblsiY3JlYXRl
ZF9ieSJdKX0pCiAgICAgICAgaWYgY3JlYXRvciBhbmQgY3JlYXRvci5nZXQoInB1c2hfdG9rZW4i
KToKICAgICAgICAgICAgc2VuZF9ub3RpZmljYXRpb25fdG9fdXNlcigKICAgICAgICAgICAgICAg
IGNyZWF0b3JbInB1c2hfdG9rZW4iXSwKICAgICAgICAgICAgICAgICLinYwgUHJvbW9jacOzIFJl
YnV0amFkYSIsCiAgICAgICAgICAgICAgICBmIkxhIHRldmEgcHJvbW9jacOzICd7cHJvbW90aW9u
LmdldCgndGl0bGUnLCAnJyl9JyBoYSBlc3RhdCByZWJ1dGphZGEuIE1vdGl1OiB7cmVhc29ufSIK
ICAgICAgICAgICAgKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYi
RXJyb3IgZW52aWFudCBub3RpZmljYWNpw7MgZGUgcmVidWlnOiB7c3RyKGUpfSIpCiAgICAKICAg
IHJldHVybiB7InN1Y2Nlc3MiOiBUcnVlLCAibWVzc2FnZSI6ICJQcm9tb2Npw7MgcmVidXRqYWRh
In0KCiMgTmV3cyBlbmRwb2ludHMgbW92ZWQgdG8gZWFybGllciBzZWN0aW9uCgojIEdpZnQgQ2Fy
ZHMgZW5kcG9pbnRzCkBhcGlfcm91dGVyLnBvc3QoIi9naWZ0LWNhcmRzL2NyZWF0ZSIpCmFzeW5j
IGRlZiBjcmVhdGVfZ2lmdF9jYXJkKGdpZnRfY2FyZF9kYXRhOiBHaWZ0Q2FyZENyZWF0ZSk6CiAg
ICBpbXBvcnQgcmFuZG9tCiAgICBpbXBvcnQgc3RyaW5nCiAgICAKICAgICMgR2VuZXJhdGUgdW5p
cXVlIGNvZGUKICAgIGNvZGUgPSAnJy5qb2luKHJhbmRvbS5jaG9pY2VzKHN0cmluZy5hc2NpaV91
cHBlcmNhc2UgKyBzdHJpbmcuZGlnaXRzLCBrPTEyKSkKICAgIAogICAgZ2lmdF9jYXJkX2RpY3Qg
PSB7CiAgICAgICAgKipnaWZ0X2NhcmRfZGF0YS5kaWN0KCksCiAgICAgICAgImNvZGUiOiBjb2Rl
LAogICAgICAgICJiYWxhbmNlIjogZ2lmdF9jYXJkX2RhdGEuYW1vdW50LAogICAgICAgICJzdGF0
dXMiOiAiYWN0aXZlIiwKICAgICAgICAiY3JlYXRlZF9hdCI6IGRhdGV0aW1lLnV0Y25vdygpCiAg
ICB9CiAgICAKICAgIHJlc3VsdCA9IGF3YWl0IGRiLmdpZnRfY2FyZHMuaW5zZXJ0X29uZShnaWZ0
X2NhcmRfZGljdCkKICAgIGdpZnRfY2FyZF9kaWN0WydfaWQnXSA9IHN0cihyZXN1bHQuaW5zZXJ0
ZWRfaWQpCiAgICAKICAgIHJldHVybiBnaWZ0X2NhcmRfZGljdAoKQGFwaV9yb3V0ZXIuZ2V0KCIv
Z2lmdC1jYXJkcy91c2VyL3t1c2VyX2lkfSIpCmFzeW5jIGRlZiBnZXRfdXNlcl9naWZ0X2NhcmRz
KHVzZXJfaWQ6IHN0cik6CiAgICBnaWZ0X2NhcmRzID0gYXdhaXQgZGIuZ2lmdF9jYXJkcy5maW5k
KHsidXNlcl9pZCI6IHVzZXJfaWR9KS50b19saXN0KDEwMCkKICAgIGZvciBnYyBpbiBnaWZ0X2Nh
cmRzOgogICAgICAgIGdjWydfaWQnXSA9IHN0cihnY1snX2lkJ10pCiAgICByZXR1cm4gZ2lmdF9j
YXJkcwoKQGFwaV9yb3V0ZXIuZ2V0KCIvZ2lmdC1jYXJkcy97Y29kZX0iKQphc3luYyBkZWYgZ2V0
X2dpZnRfY2FyZF9ieV9jb2RlKGNvZGU6IHN0cik6CiAgICBnaWZ0X2NhcmQgPSBhd2FpdCBkYi5n
aWZ0X2NhcmRzLmZpbmRfb25lKHsiY29kZSI6IGNvZGV9KQogICAgaWYgbm90IGdpZnRfY2FyZDoK
ICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJHaWZ0
IGNhcmQgbm90IGZvdW5kIikKICAgIGdpZnRfY2FyZFsnX2lkJ10gPSBzdHIoZ2lmdF9jYXJkWydf
aWQnXSkKICAgIHJldHVybiBnaWZ0X2NhcmQKCiMgUGF5UGFsIFBheW1lbnQgZW5kcG9pbnRzCkBh
cGlfcm91dGVyLnBvc3QoIi9wYXltZW50cy9wYXlwYWwvY3JlYXRlIikKYXN5bmMgZGVmIGNyZWF0
ZV9wYXlwYWxfcGF5bWVudChvcmRlcl9kYXRhOiBQYXltZW50T3JkZXJDcmVhdGUpOgogICAgdHJ5
OgogICAgICAgIHBheW1lbnQgPSBwYXlwYWxyZXN0c2RrLlBheW1lbnQoewogICAgICAgICAgICAi
aW50ZW50IjogInNhbGUiLAogICAgICAgICAgICAicGF5ZXIiOiB7CiAgICAgICAgICAgICAgICAi
cGF5bWVudF9tZXRob2QiOiAicGF5cGFsIgogICAgICAgICAgICB9LAogICAgICAgICAgICAicmVk
aXJlY3RfdXJscyI6IHsKICAgICAgICAgICAgICAgICJyZXR1cm5fdXJsIjogb3JkZXJfZGF0YS5y
ZXR1cm5fdXJsLAogICAgICAgICAgICAgICAgImNhbmNlbF91cmwiOiBvcmRlcl9kYXRhLmNhbmNl
bF91cmwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgInRyYW5zYWN0aW9ucyI6IFt7CiAgICAg
ICAgICAgICAgICAiYW1vdW50IjogewogICAgICAgICAgICAgICAgICAgICJ0b3RhbCI6IHN0cihv
cmRlcl9kYXRhLmFtb3VudCksCiAgICAgICAgICAgICAgICAgICAgImN1cnJlbmN5Ijogb3JkZXJf
ZGF0YS5jdXJyZW5jeQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJkZXNjcmlw
dGlvbiI6ICJFbCBUb21iIGRlIFJldXMgLSBUYXJqZXRhIFJlZ2FsbyIKICAgICAgICAgICAgfV0K
ICAgICAgICB9KQogICAgICAgIAogICAgICAgIGlmIHBheW1lbnQuY3JlYXRlKCk6CiAgICAgICAg
ICAgICMgU3RvcmUgcGF5bWVudCBpbmZvIGluIERCCiAgICAgICAgICAgIGF3YWl0IGRiLnBheW1l
bnRzLmluc2VydF9vbmUoewogICAgICAgICAgICAgICAgInBheW1lbnRfaWQiOiBwYXltZW50Lmlk
LAogICAgICAgICAgICAgICAgInN0YXR1cyI6ICJjcmVhdGVkIiwKICAgICAgICAgICAgICAgICJh
bW91bnQiOiBvcmRlcl9kYXRhLmFtb3VudCwKICAgICAgICAgICAgICAgICJjdXJyZW5jeSI6IG9y
ZGVyX2RhdGEuY3VycmVuY3ksCiAgICAgICAgICAgICAgICAiY3JlYXRlZF9hdCI6IGRhdGV0aW1l
LnV0Y25vdygpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEdldCBh
cHByb3ZhbCBVUkwKICAgICAgICAgICAgZm9yIGxpbmsgaW4gcGF5bWVudC5saW5rczoKICAgICAg
ICAgICAgICAgIGlmIGxpbmsucmVsID09ICJhcHByb3ZhbF91cmwiOgogICAgICAgICAgICAgICAg
ICAgIHJldHVybiB7ImFwcHJvdmFsX3VybCI6IGxpbmsuaHJlZiwgInBheW1lbnRfaWQiOiBwYXlt
ZW50LmlkfQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3Rh
dHVzX2NvZGU9NDAwLCBkZXRhaWw9cGF5bWVudC5lcnJvcikKICAgIGV4Y2VwdCBFeGNlcHRpb24g
YXMgZToKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwMCwgZGV0YWls
PXN0cihlKSkKCkBhcGlfcm91dGVyLnBvc3QoIi9wYXltZW50cy9wYXlwYWwvZXhlY3V0ZSIpCmFz
eW5jIGRlZiBleGVjdXRlX3BheXBhbF9wYXltZW50KHBheW1lbnRfaWQ6IHN0ciwgcGF5ZXJfaWQ6
IHN0ciwgdXNlcl9pZDogc3RyLCBhbW91bnQ6IGZsb2F0KToKICAgIHRyeToKICAgICAgICBwYXlt
ZW50ID0gcGF5cGFscmVzdHNkay5QYXltZW50LmZpbmQocGF5bWVudF9pZCkKICAgICAgICAKICAg
ICAgICBpZiBwYXltZW50LmV4ZWN1dGUoeyJwYXllcl9pZCI6IHBheWVyX2lkfSk6CiAgICAgICAg
ICAgICMgVXBkYXRlIHBheW1lbnQgc3RhdHVzCiAgICAgICAgICAgIGF3YWl0IGRiLnBheW1lbnRz
LnVwZGF0ZV9vbmUoCiAgICAgICAgICAgICAgICB7InBheW1lbnRfaWQiOiBwYXltZW50X2lkfSwK
ICAgICAgICAgICAgICAgIHsiJHNldCI6IHsic3RhdHVzIjogImNvbXBsZXRlZCIsICJwYXllcl9p
ZCI6IHBheWVyX2lkLCAiY29tcGxldGVkX2F0IjogZGF0ZXRpbWUudXRjbm93KCl9fQogICAgICAg
ICAgICApCiAgICAgICAgICAgIAogICAgICAgICAgICAjIENyZWF0ZSBnaWZ0IGNhcmQKICAgICAg
ICAgICAgZ2lmdF9jYXJkID0gYXdhaXQgY3JlYXRlX2dpZnRfY2FyZChHaWZ0Q2FyZENyZWF0ZShh
bW91bnQ9YW1vdW50LCB1c2VyX2lkPXVzZXJfaWQpKQogICAgICAgICAgICAKICAgICAgICAgICAg
cmV0dXJuIHsic3VjY2VzcyI6IFRydWUsICJnaWZ0X2NhcmQiOiBnaWZ0X2NhcmR9CiAgICAgICAg
ZWxzZToKICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDAsIGRl
dGFpbD1wYXltZW50LmVycm9yKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJh
aXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9c3RyKGUpKQoKIyBCaXp1
bSBQYXltZW50IEVuZHBvaW50cyAoTU9DS1VQIC0gUmVhZHkgZm9yIGludGVncmF0aW9uKQpAYXBp
X3JvdXRlci5wb3N0KCIvcGF5bWVudHMvYml6dW0vY3JlYXRlIikKYXN5bmMgZGVmIGNyZWF0ZV9i
aXp1bV9wYXltZW50KGFtb3VudDogZmxvYXQsIHVzZXJfaWQ6IHN0ciwgcGhvbmU6IHN0ciA9IE5v
bmUpOgogICAgIiIiCiAgICBNT0NLVVA6IENyZWF0ZSBCaXp1bSBwYXltZW50CiAgICAKICAgIFRP
RE86IEludGVncmF0ZSB3aXRoIHJlYWwgQml6dW0gQVBJIHdoZW4gY3JlZGVudGlhbHMgYXJlIGF2
YWlsYWJsZQogICAgCiAgICBTdGVwcyB0byBhY3RpdmF0ZToKICAgIDEuIE9idGFpbiBCaXp1bSBB
UEkgY3JlZGVudGlhbHMgZnJvbSB5b3VyIGJhbmsvcGF5bWVudCBwcm92aWRlcgogICAgMi4gSW5z
dGFsbCByZXF1aXJlZCBTREs6IHBpcCBpbnN0YWxsIGJpenVtLXNkayAoaWYgYXZhaWxhYmxlKQog
ICAgMy4gUmVwbGFjZSB0aGlzIG1vY2sgd2l0aCByZWFsIEJpenVtIEFQSSBpbnRlZ3JhdGlvbgog
ICAgNC4gQ29uZmlndXJlIHdlYmhvb2sgZm9yIHBheW1lbnQgY29uZmlybWF0aW9uCiAgICAKICAg
IEV4cGVjdGVkIGZsb3c6CiAgICAtIEdlbmVyYXRlIEJpenVtIHBheW1lbnQgcmVxdWVzdAogICAg
LSBSZXR1cm4gcGF5bWVudCByZWZlcmVuY2UvY29kZSBmb3IgdXNlcgogICAgLSBVc2VyIGNvbXBs
ZXRlcyBwYXltZW50IGluIHRoZWlyIGJhbmsgYXBwCiAgICAtIFJlY2VpdmUgd2ViaG9vayBjb25m
aXJtYXRpb24KICAgIC0gQ3JlYXRlIGdpZnQgY2FyZCB1cG9uIHN1Y2Nlc3NmdWwgcGF5bWVudAog
ICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBNT0NLOiBHZW5lcmF0ZSBhIGZha2UgcGF5bWVudCBy
ZWZlcmVuY2UKICAgICAgICBwYXltZW50X3JlZmVyZW5jZSA9IGYiQklaVU0te2RhdGV0aW1lLnV0
Y25vdygpLnN0cmZ0aW1lKCclWSVtJWQlSCVNJVMnKX0iCiAgICAgICAgCiAgICAgICAgIyBNT0NL
OiBTYXZlIHBheW1lbnQgaW50ZW50IHRvIGRhdGFiYXNlCiAgICAgICAgcGF5bWVudF9kb2MgPSB7
CiAgICAgICAgICAgICJwYXltZW50X2lkIjogcGF5bWVudF9yZWZlcmVuY2UsCiAgICAgICAgICAg
ICJtZXRob2QiOiAiYml6dW0iLAogICAgICAgICAgICAiYW1vdW50IjogYW1vdW50LAogICAgICAg
ICAgICAidXNlcl9pZCI6IHVzZXJfaWQsCiAgICAgICAgICAgICJwaG9uZSI6IHBob25lLAogICAg
ICAgICAgICAic3RhdHVzIjogInBlbmRpbmciLAogICAgICAgICAgICAiY3JlYXRlZF9hdCI6IGRh
dGV0aW1lLnV0Y25vdygpCiAgICAgICAgfQogICAgICAgIGF3YWl0IGRiLnBheW1lbnRzLmluc2Vy
dF9vbmUocGF5bWVudF9kb2MpCiAgICAgICAgCiAgICAgICAgIyBUT0RPOiBSZXBsYWNlIHdpdGgg
cmVhbCBCaXp1bSBBUEkgY2FsbAogICAgICAgICMgcmVzcG9uc2UgPSBiaXp1bV9hcGkuY3JlYXRl
X3BheW1lbnQoewogICAgICAgICMgICAgICJhbW91bnQiOiBhbW91bnQsCiAgICAgICAgIyAgICAg
ImN1cnJlbmN5IjogIkVVUiIsCiAgICAgICAgIyAgICAgInBob25lIjogcGhvbmUsCiAgICAgICAg
IyAgICAgImNvbmNlcHQiOiBmIkdpZnQgQ2FyZCB7YW1vdW50feKCrCAtIEVsIFRvbWIgZGUgUmV1
cyIsCiAgICAgICAgIyAgICAgImNhbGxiYWNrX3VybCI6ICJodHRwczovL3lvdXJkb21haW4uY29t
L2FwaS9wYXltZW50cy9iaXp1bS93ZWJob29rIgogICAgICAgICMgfSkKICAgICAgICAKICAgICAg
ICByZXR1cm4gewogICAgICAgICAgICAic3VjY2VzcyI6IFRydWUsCiAgICAgICAgICAgICJwYXlt
ZW50X3JlZmVyZW5jZSI6IHBheW1lbnRfcmVmZXJlbmNlLAogICAgICAgICAgICAiYW1vdW50Ijog
YW1vdW50LAogICAgICAgICAgICAic3RhdHVzIjogInBlbmRpbmciLAogICAgICAgICAgICAibWVz
c2FnZSI6ICJNT0NLVVA6IEluIHByb2R1Y3Rpb24sIHVzZXIgd291bGQgcmVjZWl2ZSBwYXltZW50
IHJlcXVlc3QgaW4gQml6dW0gYXBwIiwKICAgICAgICAgICAgImluc3RydWN0aW9ucyI6ICJPcGVu
IHlvdXIgYmFuayBhcHAgYW5kIGFwcHJvdmUgdGhlIEJpenVtIHBheW1lbnQiCiAgICAgICAgfQog
ICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ2dlci5lcnJvcihmIkVycm9yIGNy
ZWF0aW5nIEJpenVtIHBheW1lbnQ6IHtzdHIoZSl9IikKICAgICAgICByYWlzZSBIVFRQRXhjZXB0
aW9uKHN0YXR1c19jb2RlPTUwMCwgZGV0YWlsPXN0cihlKSkKCkBhcGlfcm91dGVyLnBvc3QoIi9w
YXltZW50cy9iaXp1bS93ZWJob29rIikKYXN5bmMgZGVmIGJpenVtX3BheW1lbnRfd2ViaG9vayhy
ZXF1ZXN0OiBSZXF1ZXN0KToKICAgICIiIgogICAgTU9DS1VQOiBXZWJob29rIHRvIHJlY2VpdmUg
Qml6dW0gcGF5bWVudCBjb25maXJtYXRpb25zCiAgICAKICAgIFRPRE86IEltcGxlbWVudCB3ZWJo
b29rIGhhbmRsZXIgd2hlbiBCaXp1bSBBUEkgaXMgaW50ZWdyYXRlZAogICAgCiAgICBUaGlzIGVu
ZHBvaW50IHNob3VsZDoKICAgIDEuIFZlcmlmeSB3ZWJob29rIHNpZ25hdHVyZSBmcm9tIEJpenVt
CiAgICAyLiBFeHRyYWN0IHBheW1lbnQgc3RhdHVzIGFuZCByZWZlcmVuY2UKICAgIDMuIFVwZGF0
ZSBwYXltZW50IGluIGRhdGFiYXNlCiAgICA0LiBDcmVhdGUgZ2lmdCBjYXJkIGlmIHBheW1lbnQg
c3VjY2Vzc2Z1bAogICAgNS4gU2VuZCBub3RpZmljYXRpb24gdG8gdXNlcgogICAgIiIiCiAgICB0
cnk6CiAgICAgICAgZGF0YSA9IGF3YWl0IHJlcXVlc3QuanNvbigpCiAgICAgICAgCiAgICAgICAg
IyBUT0RPOiBWZXJpZnkgQml6dW0gd2ViaG9vayBzaWduYXR1cmUKICAgICAgICAjIGlmIG5vdCB2
ZXJpZnlfYml6dW1fc2lnbmF0dXJlKGRhdGEsIHJlcXVlc3QuaGVhZGVycyk6CiAgICAgICAgIyAg
ICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDEsIGRldGFpbD0iSW52YWxpZCBz
aWduYXR1cmUiKQogICAgICAgIAogICAgICAgIHBheW1lbnRfcmVmZXJlbmNlID0gZGF0YS5nZXQo
InBheW1lbnRfcmVmZXJlbmNlIikKICAgICAgICBzdGF0dXMgPSBkYXRhLmdldCgic3RhdHVzIikg
ICMgImNvbXBsZXRlZCIsICJmYWlsZWQiLCAiY2FuY2VsbGVkIgogICAgICAgIAogICAgICAgICMg
VXBkYXRlIHBheW1lbnQgc3RhdHVzCiAgICAgICAgcGF5bWVudCA9IGF3YWl0IGRiLnBheW1lbnRz
LmZpbmRfb25lKHsicGF5bWVudF9pZCI6IHBheW1lbnRfcmVmZXJlbmNlfSkKICAgICAgICBpZiBu
b3QgcGF5bWVudDoKICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00
MDQsIGRldGFpbD0iUGF5bWVudCBub3QgZm91bmQiKQogICAgICAgIAogICAgICAgIGF3YWl0IGRi
LnBheW1lbnRzLnVwZGF0ZV9vbmUoCiAgICAgICAgICAgIHsicGF5bWVudF9pZCI6IHBheW1lbnRf
cmVmZXJlbmNlfSwKICAgICAgICAgICAgeyIkc2V0IjogeyJzdGF0dXMiOiBzdGF0dXMsICJjb21w
bGV0ZWRfYXQiOiBkYXRldGltZS51dGNub3coKX19CiAgICAgICAgKQogICAgICAgIAogICAgICAg
ICMgSWYgc3VjY2Vzc2Z1bCwgY3JlYXRlIGdpZnQgY2FyZAogICAgICAgIGlmIHN0YXR1cyA9PSAi
Y29tcGxldGVkIjoKICAgICAgICAgICAgZ2lmdF9jYXJkID0gYXdhaXQgY3JlYXRlX2dpZnRfY2Fy
ZCgKICAgICAgICAgICAgICAgIEdpZnRDYXJkQ3JlYXRlKAogICAgICAgICAgICAgICAgICAgIGFt
b3VudD1wYXltZW50WyJhbW91bnQiXSwKICAgICAgICAgICAgICAgICAgICB1c2VyX2lkPXBheW1l
bnRbInVzZXJfaWQiXQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICAg
IAogICAgICAgICAgICAjIFRPRE86IFNlbmQgbm90aWZpY2F0aW9uIHRvIHVzZXIKICAgICAgICAg
ICAgIyBhd2FpdCBzZW5kX25vdGlmaWNhdGlvbihwYXltZW50WyJ1c2VyX2lkIl0sICJHaWZ0IGNh
cmQgY3JlYXRlZCEiKQogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIHsic3VjY2VzcyI6
IFRydWUsICJnaWZ0X2NhcmRfaWQiOiBnaWZ0X2NhcmRbImlkIl19CiAgICAgICAgCiAgICAgICAg
cmV0dXJuIHsic3VjY2VzcyI6IFRydWUsICJzdGF0dXMiOiBzdGF0dXN9CiAgICBleGNlcHQgRXhj
ZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nZ2VyLmVycm9yKGYiRXJyb3IgcHJvY2Vzc2luZyBCaXp1
bSB3ZWJob29rOiB7c3RyKGUpfSIpCiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNf
Y29kZT01MDAsIGRldGFpbD1zdHIoZSkpCgojIERhdGEgUHJvdGVjdGlvbiAmIENvbnNlbnQgZW5k
cG9pbnRzCkBhcGlfcm91dGVyLmdldCgiL3ByaXZhY3ktcG9saWN5IikKYXN5bmMgZGVmIGdldF9w
cml2YWN5X3BvbGljeSgpOgogICAgIiIiT2J0ZW5pciBlbCB0ZXh0IGRlIGxhIHBvbMOtdGljYSBk
ZSBwcm90ZWNjacOzIGRlIGRhZGVzIiIiCiAgICByZXR1cm4gewogICAgICAgICJ0ZXh0IjogZ2V0
X3ByaXZhY3lfcG9saWN5X3RleHQoKSwKICAgICAgICAibGFzdF91cGRhdGVkIjogIjIwMjUtMTAt
MDEiCiAgICB9CgpAYXBpX3JvdXRlci5nZXQoIi9jb25zZW50LWhpc3Rvcnkve3VzZXJfaWR9IikK
YXN5bmMgZGVmIGdldF9jb25zZW50X2hpc3RvcnkodXNlcl9pZDogc3RyLCBhdXRob3JpemF0aW9u
OiBzdHIgPSBIZWFkZXIoTm9uZSkpOgogICAgIiIiT2J0ZW5pciBsJ2hpc3RvcmlhbCBkZSBjb25z
ZW50aW1lbnRzIGQndW4gdXN1YXJpIChyZXF1ZXJlaXggYXV0ZW50aWNhY2nDsykiIiIKICAgIGlm
IG5vdCBhdXRob3JpemF0aW9uIG9yIG5vdCBhdXRob3JpemF0aW9uLnN0YXJ0c3dpdGgoInRva2Vu
XyIpOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAxLCBkZXRhaWw9
Ik5vIGF1dG9yaXR6YXQiKQogICAgCiAgICB0b2tlbl91c2VyX2lkID0gYXV0aG9yaXphdGlvbi5y
ZXBsYWNlKCJ0b2tlbl8iLCAiIikKICAgIAogICAgIyBWZXJpZmljYXIgcXVlIGwndXN1YXJpIGVz
dMOgIGNvbnN1bHRhbnQgZWxzIHNldXMgcHJvcGlzIGNvbnNlbnRpbWVudHMgbyDDqXMgYWRtaW4K
ICAgIHVzZXIgPSBhd2FpdCBkYi51c2Vycy5maW5kX29uZSh7Il9pZCI6IE9iamVjdElkKHRva2Vu
X3VzZXJfaWQpfSkKICAgIGlmIG5vdCB1c2VyOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24o
c3RhdHVzX2NvZGU9NDAxLCBkZXRhaWw9IlVzdWFyaSBubyB0cm9iYXQiKQogICAgCiAgICBpZiB0
b2tlbl91c2VyX2lkICE9IHVzZXJfaWQgYW5kIHVzZXIuZ2V0KCdyb2xlJykgIT0gJ2FkbWluJzoK
ICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMywgZGV0YWlsPSJObyB0
ZW5zIHBlcm3DrXMgcGVyIHZldXJlIGFxdWVzdCBoaXN0b3JpYWwiKQogICAgCiAgICAjIE9idGVu
aXIgaGlzdG9yaWFsCiAgICBoaXN0b3J5ID0gYXdhaXQgZGIuY29uc2VudF9oaXN0b3J5LmZpbmQo
eyJ1c2VyX2lkIjogdXNlcl9pZH0pLnNvcnQoImNyZWF0ZWRfYXQiLCAtMSkudG9fbGlzdCgxMDAp
CiAgICBmb3IgaXRlbSBpbiBoaXN0b3J5OgogICAgICAgIGl0ZW1bJ19pZCddID0gc3RyKGl0ZW1b
J19pZCddKQogICAgCiAgICByZXR1cm4gaGlzdG9yeQoKQGFwaV9yb3V0ZXIucG9zdCgiL3VwZGF0
ZS1jb25zZW50IikKYXN5bmMgZGVmIHVwZGF0ZV9jb25zZW50KAogICAgdXNlcl9pZDogc3RyLAog
ICAgY29uc2VudF9naXZlbjogYm9vbCwKICAgIGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRlcihO
b25lKQopOgogICAgIiIiQWN0dWFsaXR6YXIgZWwgY29uc2VudGltZW50IGQndW4gdXN1YXJpIiIi
CiAgICBpZiBub3QgYXV0aG9yaXphdGlvbiBvciBub3QgYXV0aG9yaXphdGlvbi5zdGFydHN3aXRo
KCJ0b2tlbl8iKToKICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwMSwg
ZGV0YWlsPSJObyBhdXRvcml0emF0IikKICAgIAogICAgdG9rZW5fdXNlcl9pZCA9IGF1dGhvcml6
YXRpb24ucmVwbGFjZSgidG9rZW5fIiwgIiIpCiAgICAKICAgICMgVmVyaWZpY2FyIHF1ZSBsJ3Vz
dWFyaSBlc3TDoCBhY3R1YWxpdHphbnQgZWwgc2V1IHByb3BpIGNvbnNlbnRpbWVudAogICAgaWYg
dG9rZW5fdXNlcl9pZCAhPSB1c2VyX2lkOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3Rh
dHVzX2NvZGU9NDAzLCBkZXRhaWw9Ik5vIHRlbnMgcGVybcOtcyBwZXIgbW9kaWZpY2FyIGFxdWVz
dCBjb25zZW50aW1lbnQiKQogICAgCiAgICAjIEFjdHVhbGl0emFyIGNvbnNlbnRpbWVudCBhIGwn
dXN1YXJpCiAgICBhd2FpdCBkYi51c2Vycy51cGRhdGVfb25lKAogICAgICAgIHsiX2lkIjogT2Jq
ZWN0SWQodXNlcl9pZCl9LAogICAgICAgIHsKICAgICAgICAgICAgIiRzZXQiOiB7CiAgICAgICAg
ICAgICAgICAiZGF0YV9jb25zZW50IjogY29uc2VudF9naXZlbiwKICAgICAgICAgICAgICAgICJk
YXRhX2NvbnNlbnRfZGF0ZSI6IGRhdGV0aW1lLnV0Y25vdygpCiAgICAgICAgICAgIH0KICAgICAg
ICB9CiAgICApCiAgICAKICAgICMgR3VhcmRhciBlbiBoaXN0b3JpYWwKICAgIGNvbnNlbnRfaGlz
dG9yeSA9IHsKICAgICAgICAidXNlcl9pZCI6IHVzZXJfaWQsCiAgICAgICAgImNvbnNlbnRfdHlw
ZSI6ICJkYXRhX3Byb3RlY3Rpb24iLAogICAgICAgICJjb25zZW50X2dpdmVuIjogY29uc2VudF9n
aXZlbiwKICAgICAgICAiY29uc2VudF90ZXh0IjogZ2V0X3ByaXZhY3lfcG9saWN5X3RleHQoKSwK
ICAgICAgICAiY3JlYXRlZF9hdCI6IGRhdGV0aW1lLnV0Y25vdygpCiAgICB9CiAgICBhd2FpdCBk
Yi5jb25zZW50X2hpc3RvcnkuaW5zZXJ0X29uZShjb25zZW50X2hpc3RvcnkpCiAgICAKICAgIHJl
dHVybiB7InN1Y2Nlc3MiOiBUcnVlLCAibWVzc2FnZSI6ICJDb25zZW50aW1lbnQgYWN0dWFsaXR6
YXQgY29ycmVjdGFtZW50In0KCiMgVGlja2V0IFNjYW5uaW5nIGVuZHBvaW50cwpAYXBpX3JvdXRl
ci5wb3N0KCIvdGlja2V0cy9zY2FuIikKYXN5bmMgZGVmIHNjYW5fdGlja2V0KHRpY2tldF9kYXRh
OiBUaWNrZXRTY2FuQmFzZSk6CiAgICAjIFZhbGlkYXRlIHRpY2tldCBjb2RlCiAgICAjIEluIHBy
b2R1Y3Rpb24sIHZhbGlkYXRlIGFnYWluc3QgTmV1cm9tb2JpbGUgb3IgaW50ZXJuYWwgc3lzdGVt
CiAgICAKICAgIHRpY2tldF9kaWN0ID0gewogICAgICAgICoqdGlja2V0X2RhdGEuZGljdCgpLAog
ICAgICAgICJzY2FubmVkX2F0IjogZGF0ZXRpbWUudXRjbm93KCkKICAgIH0KICAgIAogICAgcmVz
dWx0ID0gYXdhaXQgZGIudGlja2V0X3NjYW5zLmluc2VydF9vbmUodGlja2V0X2RpY3QpCiAgICB0
aWNrZXRfZGljdFsnX2lkJ10gPSBzdHIocmVzdWx0Lmluc2VydGVkX2lkKQogICAgCiAgICByZXR1
cm4geyJzdWNjZXNzIjogVHJ1ZSwgInRpY2tldCI6IHRpY2tldF9kaWN0LCAibWVzc2FnZSI6ICJU
aWNrZXQgZXNjYW5lYWRvIGNvcnJlY3RhbWVudGUifQoKQGFwaV9yb3V0ZXIuZ2V0KCIvdGlja2V0
cy91c2VyL3t1c2VyX2lkfSIpCmFzeW5jIGRlZiBnZXRfdXNlcl90aWNrZXRzKHVzZXJfaWQ6IHN0
cik6CiAgICB0aWNrZXRzID0gYXdhaXQgZGIudGlja2V0X3NjYW5zLmZpbmQoeyJ1c2VyX2lkIjog
dXNlcl9pZH0pLnRvX2xpc3QoMTAwKQogICAgZm9yIHRpY2tldCBpbiB0aWNrZXRzOgogICAgICAg
IHRpY2tldFsnX2lkJ10gPSBzdHIodGlja2V0WydfaWQnXSkKICAgIHJldHVybiB0aWNrZXRzCgoj
IFRhZ3MgbWFuYWdlbWVudCBlbmRwb2ludHMKQGFwaV9yb3V0ZXIuZ2V0KCIvYWRtaW4vdGFncyIp
CmFzeW5jIGRlZiBnZXRfdGFnc19zdGF0cyhhdXRob3JpemF0aW9uOiBzdHIgPSBIZWFkZXIoTm9u
ZSkpOgogICAgIiIiCiAgICBSZXRvcm5hIGVzdGFkw61zdGlxdWVzIGRlIHRvdHMgZWxzIHRhZ3Mg
dXRpbGl0emF0cyBlbiBwcm9tb2Npb25zLCBlc2RldmVuaW1lbnRzIGkgb2ZlcnRlcwogICAgIiIi
CiAgICB1c2VyID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihhdXRob3JpemF0aW9uKQogICAg
aWYgdXNlclsncm9sZSddICE9ICdhZG1pbic6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihz
dGF0dXNfY29kZT00MDMsIGRldGFpbD0iT25seSBhZG1pbnMgY2FuIHZpZXcgdGFncyIpCiAgICAK
ICAgIHRyeToKICAgICAgICAjIEFncmVnYXIgdG90cyBlbHMgdGFncyBkZSBwcm9tb2Npb25zLCBl
c2RldmVuaW1lbnRzIGkgb2ZlcnRlcwogICAgICAgIHBpcGVsaW5lID0gWwogICAgICAgICAgICB7
CiAgICAgICAgICAgICAgICAiJGZhY2V0IjogewogICAgICAgICAgICAgICAgICAgICJwcm9tb3Rp
b25zIjogWwogICAgICAgICAgICAgICAgICAgICAgICB7IiRtYXRjaCI6IHsidGFnIjogeyIkZXhp
c3RzIjogVHJ1ZSwgIiRuZSI6IE5vbmUsICIkbmUiOiAiIn19fSwKICAgICAgICAgICAgICAgICAg
ICAgICAgeyIkdW53aW5kIjogeyJwYXRoIjogIiR0YWciLCAicHJlc2VydmVOdWxsQW5kRW1wdHlB
cnJheXMiOiBGYWxzZX19LAogICAgICAgICAgICAgICAgICAgICAgICB7IiRncm91cCI6IHsKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICJfaWQiOiAiJHRhZyIsCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAiY291bnQiOiB7IiRzdW0iOiAxfSwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICJzb3VyY2UiOiB7IiRhZGRUb1NldCI6ICJwcm9tb3Rpb24ifQogICAgICAgICAgICAgICAg
ICAgICAgICB9fQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgImV2
ZW50cyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgeyIkbWF0Y2giOiB7InRhZ3MiOiB7IiRl
eGlzdHMiOiBUcnVlLCAiJG5vdCI6IHsiJHNpemUiOiAwfX19fSwKICAgICAgICAgICAgICAgICAg
ICAgICAgeyIkdW53aW5kIjogeyJwYXRoIjogIiR0YWdzIiwgInByZXNlcnZlTnVsbEFuZEVtcHR5
QXJyYXlzIjogRmFsc2V9fSwKICAgICAgICAgICAgICAgICAgICAgICAgeyIkZ3JvdXAiOiB7CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAiX2lkIjogIiR0YWdzIiwKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICJjb3VudCI6IHsiJHN1bSI6IDF9LAogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgInNvdXJjZSI6IHsiJGFkZFRvU2V0IjogImV2ZW50In0KICAgICAgICAgICAgICAgICAg
ICAgICAgfX0KICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICJvZmZl
cnMiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsiJG1hdGNoIjogeyJ0YWdzIjogeyIkZXhp
c3RzIjogVHJ1ZSwgIiRub3QiOiB7IiRzaXplIjogMH19fX0sCiAgICAgICAgICAgICAgICAgICAg
ICAgIHsiJHVud2luZCI6IHsicGF0aCI6ICIkdGFncyIsICJwcmVzZXJ2ZU51bGxBbmRFbXB0eUFy
cmF5cyI6IEZhbHNlfX0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsiJGdyb3VwIjogewogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIl9pZCI6ICIkdGFncyIsCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAiY291bnQiOiB7IiRzdW0iOiAxfSwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICJzb3VyY2UiOiB7IiRhZGRUb1NldCI6ICJvZmZlciJ9CiAgICAgICAgICAgICAgICAgICAg
ICAgIH19CiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAg
ICB9CiAgICAgICAgXQogICAgICAgIAogICAgICAgICMgRXhlY3V0YXIgbCdhZ2dyZWdhY2nDsyBh
IGxhIGNvbMK3bGVjY2nDsyBkZSBwcm9tb2Npb25zCiAgICAgICAgcmVzdWx0cyA9IGF3YWl0IGRi
LnByb21vdGlvbnMuYWdncmVnYXRlKHBpcGVsaW5lKS50b19saXN0KE5vbmUpCiAgICAgICAgCiAg
ICAgICAgaWYgbm90IHJlc3VsdHM6CiAgICAgICAgICAgIHJldHVybiB7InRhZ3MiOiBbXX0KICAg
ICAgICAKICAgICAgICAjIENvbWJpbmFyIHJlc3VsdGF0cwogICAgICAgIGFsbF90YWdzID0ge30K
ICAgICAgICBmb3Igc291cmNlIGluIFsicHJvbW90aW9ucyIsICJldmVudHMiLCAib2ZmZXJzIl06
CiAgICAgICAgICAgIGZvciBpdGVtIGluIHJlc3VsdHNbMF0uZ2V0KHNvdXJjZSwgW10pOgogICAg
ICAgICAgICAgICAgdGFnID0gaXRlbVsiX2lkIl0KICAgICAgICAgICAgICAgIGlmIHRhZyBub3Qg
aW4gYWxsX3RhZ3M6CiAgICAgICAgICAgICAgICAgICAgYWxsX3RhZ3NbdGFnXSA9IHsKICAgICAg
ICAgICAgICAgICAgICAgICAgInRhZyI6IHRhZywKICAgICAgICAgICAgICAgICAgICAgICAgInRv
dGFsX3VzZXMiOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAic291cmNlcyI6IFtdCiAgICAg
ICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYWxsX3RhZ3NbdGFnXVsidG90YWxfdXNl
cyJdICs9IGl0ZW1bImNvdW50Il0KICAgICAgICAgICAgICAgIGFsbF90YWdzW3RhZ11bInNvdXJj
ZXMiXS5leHRlbmQoaXRlbVsic291cmNlIl0pCiAgICAgICAgCiAgICAgICAgIyBDb252ZXJ0aXIg
YSBsbGlzdGEgaSBvcmRlbmFyCiAgICAgICAgdGFnc19saXN0ID0gc29ydGVkKGFsbF90YWdzLnZh
bHVlcygpLCBrZXk9bGFtYmRhIHg6IHhbInRvdGFsX3VzZXMiXSwgcmV2ZXJzZT1UcnVlKQogICAg
ICAgIAogICAgICAgIHJldHVybiB7InRhZ3MiOiB0YWdzX2xpc3R9CiAgICAgICAgCiAgICBleGNl
cHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJFcnJvciBnZXR0aW5nIHRhZ3M6IHtl
fSIpCiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT01MDAsIGRldGFpbD1z
dHIoZSkpCgpAYXBpX3JvdXRlci5nZXQoIi90YWdzL2F2YWlsYWJsZSIpCmFzeW5jIGRlZiBnZXRf
YXZhaWxhYmxlX3RhZ3MoKToKICAgICIiIgogICAgUmV0b3JuYSB0b3RzIGVscyB0YWdzIGRpc3Bv
bmlibGVzIHBlciBzZWxlY2Npb25hciAocMO6YmxpYykKICAgICIiIgogICAgdHJ5OgogICAgICAg
ICMgT2J0ZW5pciB0YWdzIMO6bmljcyBkZSBwcm9tb2Npb25zLCBlc2RldmVuaW1lbnRzIGkgb2Zl
cnRlcwogICAgICAgIHByb21vdGlvbl90YWdzID0gYXdhaXQgZGIucHJvbW90aW9ucy5kaXN0aW5j
dCgidGFnIiwgeyJ0YWciOiB7IiRuZSI6IE5vbmUsICIkbmUiOiAiIn19KQogICAgICAgIGV2ZW50
X3RhZ3MgPSBhd2FpdCBkYi5ldmVudHMuZGlzdGluY3QoInRhZ3MiKQogICAgICAgIG9mZmVyX3Rh
Z3MgPSBhd2FpdCBkYi5vZmZlcnMuZGlzdGluY3QoInRhZ3MiKQogICAgICAgIAogICAgICAgICMg
Q29tYmluYXIgaSBlbGltaW5hciBkdXBsaWNhdHMKICAgICAgICBhbGxfdGFncyA9IGxpc3Qoc2V0
KHByb21vdGlvbl90YWdzICsgZXZlbnRfdGFncyArIG9mZmVyX3RhZ3MpKQogICAgICAgIGFsbF90
YWdzID0gW3RhZyBmb3IgdGFnIGluIGFsbF90YWdzIGlmIHRhZ10gICMgRWxpbWluYXIgdmFsb3Jz
IGJ1aXRzCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHsidGFncyI6IHNvcnRlZChhbGxfdGFncyl9
CiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJFcnJv
ciBnZXR0aW5nIGF2YWlsYWJsZSB0YWdzOiB7ZX0iKQogICAgICAgIHJldHVybiB7InRhZ3MiOiBb
XX0KCkBhcGlfcm91dGVyLnB1dCgiL3VzZXJzL3RhZ3MiKQphc3luYyBkZWYgdXBkYXRlX3VzZXJf
dGFncygKICAgIHRhZ3M6IExpc3Rbc3RyXSwKICAgIGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRl
cihOb25lKQopOgogICAgIiIiCiAgICBBY3R1YWxpdHphIGVscyB0YWdzIGQnaW50ZXLDqHMgZGUg
bCd1c3VhcmkKICAgICIiIgogICAgdXNlciA9IGF3YWl0IGdldF91c2VyX2Zyb21fdG9rZW4oYXV0
aG9yaXphdGlvbikKICAgIHRyeToKICAgICAgICByZXN1bHQgPSBhd2FpdCBkYi51c2Vycy51cGRh
dGVfb25lKAogICAgICAgICAgICB7Il9pZCI6IE9iamVjdElkKHVzZXJbJ19pZCddKX0sCiAgICAg
ICAgICAgIHsiJHNldCI6IHsidGFncyI6IHRhZ3N9fQogICAgICAgICkKICAgICAgICAKICAgICAg
ICBpZiByZXN1bHQubW9kaWZpZWRfY291bnQgPT0gMDoKICAgICAgICAgICAgcmFpc2UgSFRUUEV4
Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iVXNlciBub3QgZm91bmQiKQogICAgICAg
IAogICAgICAgIHJldHVybiB7Im1lc3NhZ2UiOiAiVGFncyB1cGRhdGVkIHN1Y2Nlc3NmdWxseSIs
ICJ0YWdzIjogdGFnc30KICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAg
ICBwcmludChmIkVycm9yIHVwZGF0aW5nIHVzZXIgdGFnczoge2V9IikKICAgICAgICByYWlzZSBI
VFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwMCwgZGV0YWlsPXN0cihlKSkKCiMgPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQojIE5PVElGSUNBQ0lPTlMKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpAYXBpX3Jv
dXRlci5nZXQoIi9ub3RpZmljYXRpb25zIikKYXN5bmMgZGVmIGdldF91c2VyX25vdGlmaWNhdGlv
bnMoYXV0aG9yaXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpKToKICAgICIiIgogICAgT2J0ZW5p
ciB0b3RlcyBsZXMgbm90aWZpY2FjaW9ucyBkZSBsJ3VzdWFyaQogICAgIiIiCiAgICB1c2VyID0g
YXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihhdXRob3JpemF0aW9uKQogICAgaWYgbm90IHVzZXI6
CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDEsIGRldGFpbD0iVW5h
dXRob3JpemVkIikKICAgIAogICAgdHJ5OgogICAgICAgIG5vdGlmaWNhdGlvbnMgPSBhd2FpdCBk
Yi5ub3RpZmljYXRpb25zLmZpbmQoCiAgICAgICAgICAgIHsidXNlcl9pZCI6IHN0cih1c2VyWyJf
aWQiXSl9CiAgICAgICAgKS5zb3J0KCJjcmVhdGVkX2F0IiwgLTEpLnRvX2xpc3QoMTAwKQogICAg
ICAgIAogICAgICAgIGZvciBub3RpZmljYXRpb24gaW4gbm90aWZpY2F0aW9uczoKICAgICAgICAg
ICAgbm90aWZpY2F0aW9uWydfaWQnXSA9IHN0cihub3RpZmljYXRpb25bJ19pZCddKQogICAgICAg
ICAgICBub3RpZmljYXRpb25bJ2lkJ10gPSBzdHIobm90aWZpY2F0aW9uWydfaWQnXSkKICAgICAg
ICAKICAgICAgICByZXR1cm4gbm90aWZpY2F0aW9ucwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBl
OgogICAgICAgIHByaW50KGYiRXJyb3IgZ2V0dGluZyBub3RpZmljYXRpb25zOiB7ZX0iKQogICAg
ICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9c3RyKGUpKQoK
QGFwaV9yb3V0ZXIucHV0KCIvbm90aWZpY2F0aW9ucy97bm90aWZpY2F0aW9uX2lkfS9yZWFkIikK
YXN5bmMgZGVmIG1hcmtfbm90aWZpY2F0aW9uX2FzX3JlYWQoCiAgICBub3RpZmljYXRpb25faWQ6
IHN0ciwKICAgIGF1dGhvcml6YXRpb246IHN0ciA9IEhlYWRlcihOb25lKQopOgogICAgIiIiCiAg
ICBNYXJjYXIgbm90aWZpY2FjacOzIGNvbSBhIGxsZWdpZGEKICAgICIiIgogICAgdXNlciA9IGF3
YWl0IGdldF91c2VyX2Zyb21fdG9rZW4oYXV0aG9yaXphdGlvbikKICAgIGlmIG5vdCB1c2VyOgog
ICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NDAxLCBkZXRhaWw9IlVuYXV0
aG9yaXplZCIpCiAgICAKICAgIHRyeToKICAgICAgICByZXN1bHQgPSBhd2FpdCBkYi5ub3RpZmlj
YXRpb25zLnVwZGF0ZV9vbmUoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJfaWQiOiBP
YmplY3RJZChub3RpZmljYXRpb25faWQpLAogICAgICAgICAgICAgICAgInVzZXJfaWQiOiBzdHIo
dXNlclsiX2lkIl0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsiJHNldCI6IHsicmVhZCI6
IFRydWUsICJyZWFkX2F0IjogZGF0ZXRpbWUudXRjbm93KCl9fQogICAgICAgICkKICAgICAgICAK
ICAgICAgICBpZiByZXN1bHQubW9kaWZpZWRfY291bnQgPT0gMDoKICAgICAgICAgICAgcmFpc2Ug
SFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iTm90aWZpY2F0aW9uIG5vdCBm
b3VuZCIpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHsibWVzc2FnZSI6ICJOb3RpZmljYXRpb24g
bWFya2VkIGFzIHJlYWQifQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50
KGYiRXJyb3IgbWFya2luZyBub3RpZmljYXRpb24gYXMgcmVhZDoge2V9IikKICAgICAgICByYWlz
ZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwMCwgZGV0YWlsPXN0cihlKSkKCkBhcGlfcm91
dGVyLmRlbGV0ZSgiL25vdGlmaWNhdGlvbnMve25vdGlmaWNhdGlvbl9pZH0iKQphc3luYyBkZWYg
ZGVsZXRlX25vdGlmaWNhdGlvbigKICAgIG5vdGlmaWNhdGlvbl9pZDogc3RyLAogICAgYXV0aG9y
aXphdGlvbjogc3RyID0gSGVhZGVyKE5vbmUpCik6CiAgICAiIiIKICAgIEVsaW1pbmFyIG5vdGlm
aWNhY2nDswogICAgIiIiCiAgICB1c2VyID0gYXdhaXQgZ2V0X3VzZXJfZnJvbV90b2tlbihhdXRo
b3JpemF0aW9uKQogICAgaWYgbm90IHVzZXI6CiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihz
dGF0dXNfY29kZT00MDEsIGRldGFpbD0iVW5hdXRob3JpemVkIikKICAgIAogICAgdHJ5OgogICAg
ICAgIHJlc3VsdCA9IGF3YWl0IGRiLm5vdGlmaWNhdGlvbnMuZGVsZXRlX29uZSh7CiAgICAgICAg
ICAgICJfaWQiOiBPYmplY3RJZChub3RpZmljYXRpb25faWQpLAogICAgICAgICAgICAidXNlcl9p
ZCI6IHN0cih1c2VyWyJfaWQiXSkKICAgICAgICB9KQogICAgICAgIAogICAgICAgIGlmIHJlc3Vs
dC5kZWxldGVkX2NvdW50ID09IDA6CiAgICAgICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3Rh
dHVzX2NvZGU9NDA0LCBkZXRhaWw9Ik5vdGlmaWNhdGlvbiBub3QgZm91bmQiKQogICAgICAgIAog
ICAgICAgIHJldHVybiB7Im1lc3NhZ2UiOiAiTm90aWZpY2F0aW9uIGRlbGV0ZWQifQogICAgZXhj
ZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiRXJyb3IgZGVsZXRpbmcgbm90aWZp
Y2F0aW9uOiB7ZX0iKQogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAw
LCBkZXRhaWw9c3RyKGUpKQoKIyBIZWFsdGggY2hlY2sKQGFwaV9yb3V0ZXIuZ2V0KCIvIikKYXN5
bmMgZGVmIHJvb3QoKToKICAgIHJldHVybiB7Im1lc3NhZ2UiOiAiRWwgVG9tYiBkZSBSZXVzIEFQ
SSIsICJ2ZXJzaW9uIjogIjEuMC4wIn0KCiMgSW5jbHVkZSB0aGUgcm91dGVyIGluIHRoZSBtYWlu
IGFwcAphcHAuaW5jbHVkZV9yb3V0ZXIoYXBpX3JvdXRlcikKIyBJbmNsdWRlIGFkbWluIHJvdXRl
cwphcHAuaW5jbHVkZV9yb3V0ZXIoYWRtaW5fcm91dGVyLCBwcmVmaXg9Ii9hcGkiKQoKYXBwLmFk
ZF9taWRkbGV3YXJlKAogICAgQ09SU01pZGRsZXdhcmUsCiAgICBhbGxvd19jcmVkZW50aWFscz1U
cnVlLAogICAgYWxsb3dfb3JpZ2lucz1bIioiXSwKICAgIGFsbG93X21ldGhvZHM9WyIqIl0sCiAg
ICBhbGxvd19oZWFkZXJzPVsiKiJdLAopCgojIE1vdW50IHN0YXRpYyBmaWxlcyBmb3IgbGFuZGlu
ZyBwYWdlCmxhbmRpbmdfcGF0aCA9IFBhdGgoX19maWxlX18pLnBhcmVudCAvICJzdGF0aWMiCmlm
IGxhbmRpbmdfcGF0aC5leGlzdHMoKToKICAgICMgU2VydmUgc3RhdGljIGFzc2V0cyAoQ1NTLCBK
UywgaW1hZ2VzKQogICAgaWYgKGxhbmRpbmdfcGF0aCAvICJhc3NldHMiKS5leGlzdHMoKToKICAg
ICAgICBhcHAubW91bnQoIi9sYW5kaW5nL2Fzc2V0cyIsIFN0YXRpY0ZpbGVzKGRpcmVjdG9yeT1z
dHIobGFuZGluZ19wYXRoIC8gImFzc2V0cyIpKSwgbmFtZT0ibGFuZGluZy1hc3NldHMiKQogICAg
CiAgICAjIFNlcnZlIG1haW4gZmlsZXMKICAgIEBhcHAuZ2V0KCIvbGFuZGluZy97ZmlsZV9uYW1l
fSIpCiAgICBhc3luYyBkZWYgc2VydmVfbGFuZGluZ19maWxlKGZpbGVfbmFtZTogc3RyKToKICAg
ICAgICAiIiJTZXJ2aXIgZml0eGVycyBkZSBsYSBsYW5kaW5nIHBhZ2UiIiIKICAgICAgICBmaWxl
X3BhdGggPSBsYW5kaW5nX3BhdGggLyBmaWxlX25hbWUKICAgICAgICBpZiBmaWxlX3BhdGguZXhp
c3RzKCkgYW5kIGZpbGVfcGF0aC5pc19maWxlKCk6CiAgICAgICAgICAgIHJldHVybiBGaWxlUmVz
cG9uc2UoZmlsZV9wYXRoKQogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9
NDA0LCBkZXRhaWw9IkZpbGUgbm90IGZvdW5kIikKICAgIAogICAgIyBTZXJ2ZSBsYW5kaW5nIHBh
Z2UgYXQgcm9vdCAvbGFuZGluZwogICAgQGFwcC5nZXQoIi9sYW5kaW5nIikKICAgIGFzeW5jIGRl
ZiBzZXJ2ZV9sYW5kaW5nKCk6CiAgICAgICAgIiIiU2VydmlyIGxhIGxhbmRpbmcgcGFnZSBwcmlu
Y2lwYWwiIiIKICAgICAgICBpbmRleF9wYXRoID0gbGFuZGluZ19wYXRoIC8gImluZGV4Lmh0bWwi
CiAgICAgICAgaWYgaW5kZXhfcGF0aC5leGlzdHMoKToKICAgICAgICAgICAgcmV0dXJuIEZpbGVS
ZXNwb25zZShpbmRleF9wYXRoKQogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2Nv
ZGU9NDA0LCBkZXRhaWw9IkxhbmRpbmcgcGFnZSBub3QgZm91bmQiKQogICAgCiAgICAjIFNlcnZl
IHRvbWItcGFnaW5lcyBmaWxlcwogICAgQGFwcC5nZXQoIi9sYW5kaW5nL3RvbWItcGFnaW5lcy97
ZmlsZV9uYW1lfSIpCiAgICBhc3luYyBkZWYgc2VydmVfdG9tYl9wYWdpbmEoZmlsZV9uYW1lOiBz
dHIpOgogICAgICAgICIiIlNlcnZpciBmaXR4ZXJzIGRlIGxlcyBww6BnaW5lcyBpbmRpdmlkdWFs
cyIiIgogICAgICAgIGZpbGVfcGF0aCA9IGxhbmRpbmdfcGF0aCAvICJ0b21iLXBhZ2luZXMiIC8g
ZmlsZV9uYW1lCiAgICAgICAgaWYgZmlsZV9wYXRoLmV4aXN0cygpIGFuZCBmaWxlX3BhdGguaXNf
ZmlsZSgpOgogICAgICAgICAgICByZXR1cm4gRmlsZVJlc3BvbnNlKGZpbGVfcGF0aCkKICAgICAg
ICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJQYWdlIG5vdCBm
b3VuZCIpCiAgICAKICAgICMgU2VydmUgdG9tYi1wYWdpbmVzIGZpbGVzIHVuZGVyIC9hcGkvIHJv
dXRlIGZvciBwcm94eSBjb21wYXRpYmlsaXR5CiAgICBAYXBwLmdldCgiL2FwaS9sYW5kaW5nL3Rv
bWItcGFnaW5lcy97ZmlsZV9uYW1lfSIpCiAgICBhc3luYyBkZWYgc2VydmVfdG9tYl9wYWdpbmFf
YXBpKGZpbGVfbmFtZTogc3RyKToKICAgICAgICAiIiJTZXJ2aXIgZml0eGVycyBkZSBsZXMgcMOg
Z2luZXMgaW5kaXZpZHVhbHMgKHZpYSAvYXBpLykiIiIKICAgICAgICBmaWxlX3BhdGggPSBsYW5k
aW5nX3BhdGggLyAidG9tYi1wYWdpbmVzIiAvIGZpbGVfbmFtZQogICAgICAgIGlmIGZpbGVfcGF0
aC5leGlzdHMoKSBhbmQgZmlsZV9wYXRoLmlzX2ZpbGUoKToKICAgICAgICAgICAgcmVzcG9uc2Ug
PSBGaWxlUmVzcG9uc2UoZmlsZV9wYXRoKQogICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzWyJD
YWNoZS1Db250cm9sIl0gPSAibm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUsIG1h
eC1hZ2U9MCIKICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVyc1siUHJhZ21hIl0gPSAibm8tY2Fj
aGUiCiAgICAgICAgICAgIHJlc3BvbnNlLmhlYWRlcnNbIkV4cGlyZXMiXSA9ICIwIgogICAgICAg
ICAgICByZXNwb25zZS5oZWFkZXJzWyJYLUNvbnRlbnQtVHlwZS1PcHRpb25zIl0gPSAibm9zbmlm
ZiIKICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVyc1siTGFzdC1Nb2RpZmllZCJdID0gZGF0ZXRp
bWUubm93KCkuc3RyZnRpbWUoIiVhLCAlZCAlYiAlWSAlSDolTTolUyBHTVQiKQogICAgICAgICAg
ICByZXNwb25zZS5oZWFkZXJzWyJFVGFnIl0gPSBmJyJ7ZGF0ZXRpbWUubm93KCkudGltZXN0YW1w
KCl9IicKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlCiAgICAgICAgcmFpc2UgSFRUUEV4Y2Vw
dGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iUGFnZSBub3QgZm91bmQiKQogICAgCiAgICAj
IFNlcnZlIGFzc2V0cyB1bmRlciAvYXBpLyByb3V0ZSBmb3IgcHJveHkgY29tcGF0aWJpbGl0eQog
ICAgQGFwcC5nZXQoIi9hcGkvbGFuZGluZy9hc3NldHMve2ZpbGVfbmFtZX0iKQogICAgYXN5bmMg
ZGVmIHNlcnZlX2xhbmRpbmdfYXNzZXRzX2FwaShmaWxlX25hbWU6IHN0cik6CiAgICAgICAgIiIi
U2VydmlyIGFzc2V0cyBkZSBsYSBsYW5kaW5nIChsb2dvcywgaW1hdGdlcywgZXRjLikiIiIKICAg
ICAgICBmaWxlX3BhdGggPSBsYW5kaW5nX3BhdGggLyAiYXNzZXRzIiAvIGZpbGVfbmFtZQogICAg
ICAgIGlmIGZpbGVfcGF0aC5leGlzdHMoKSBhbmQgZmlsZV9wYXRoLmlzX2ZpbGUoKToKICAgICAg
ICAgICAgcmV0dXJuIEZpbGVSZXNwb25zZShmaWxlX3BhdGgpCiAgICAgICAgcmFpc2UgSFRUUEV4
Y2VwdGlvbihzdGF0dXNfY29kZT00MDQsIGRldGFpbD0iQXNzZXQgbm90IGZvdW5kIikKCiMgU2Vy
dmUgbWFwIEhUTUwgZmlsZXMgZnJvbSBmcm9udGVuZC9wdWJsaWMKZnJvbnRlbmRfcHVibGljX3Bh
dGggPSBQYXRoKF9fZmlsZV9fKS5wYXJlbnQucGFyZW50IC8gImZyb250ZW5kIiAvICJwdWJsaWMi
CmlmIGZyb250ZW5kX3B1YmxpY19wYXRoLmV4aXN0cygpOgogICAgQGFwcC5nZXQoIi9tYXAuaHRt
bCIpCiAgICBhc3luYyBkZWYgc2VydmVfbWFwKCk6CiAgICAgICAgIiIiU2VydmlyIGVsIG1hcGEg
Z2VuZXJhbCIiIgogICAgICAgIG1hcF9wYXRoID0gZnJvbnRlbmRfcHVibGljX3BhdGggLyAibWFw
Lmh0bWwiCiAgICAgICAgaWYgbWFwX3BhdGguZXhpc3RzKCk6CiAgICAgICAgICAgIHJldHVybiBG
aWxlUmVzcG9uc2UobWFwX3BhdGgpCiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNf
Y29kZT00MDQsIGRldGFpbD0iTWFwIGZpbGUgbm90IGZvdW5kIikKICAgIAogICAgQGFwcC5nZXQo
Ii9ldmVudC1tYXAuaHRtbCIpCiAgICBhc3luYyBkZWYgc2VydmVfZXZlbnRfbWFwKCk6CiAgICAg
ICAgIiIiU2VydmlyIGVsIG1hcGEgZCdlc2RldmVuaW1lbnRzIiIiCiAgICAgICAgbWFwX3BhdGgg
PSBmcm9udGVuZF9wdWJsaWNfcGF0aCAvICJldmVudC1tYXAuaHRtbCIKICAgICAgICBpZiBtYXBf
cGF0aC5leGlzdHMoKToKICAgICAgICAgICAgcmV0dXJuIEZpbGVSZXNwb25zZShtYXBfcGF0aCkK
ICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJFdmVu
dCBtYXAgZmlsZSBub3QgZm91bmQiKQoKIyBFbmRwb2ludCBwZXIgbmV0ZWphciBsZXMgZGVzY3Jp
cGNpb25zIGRlbHMgZXN0YWJsaW1lbnRzIChlbGltaW5hciBIVE1MIHRhZ3MpCkBhcHAucG9zdCgi
L2FwaS9hZG1pbi9jbGVhbi1kZXNjcmlwdGlvbnMiKQphc3luYyBkZWYgY2xlYW5fZXN0YWJsaXNo
bWVudF9kZXNjcmlwdGlvbnMoKToKICAgICIiIk5ldGVqYXIgbGVzIGRlc2NyaXBjaW9ucyBkZWxz
IGVzdGFibGltZW50cyBlbGltaW5hbnQgSFRNTCB0YWdzIiIiCiAgICBpbXBvcnQgcmUKICAgIAog
ICAgZGVmIGNsZWFuX2Rlc2NyaXB0aW9uKGRlc2MpOgogICAgICAgIGlmIG5vdCBkZXNjOgogICAg
ICAgICAgICByZXR1cm4gZGVzYwogICAgICAgIGNsZWFuZWQgPSByZS5zdWIocic8Lz9wW14+XSo+
JywgJycsIGRlc2MpCiAgICAgICAgY2xlYW5lZCA9IHJlLnN1YihyJzwvP2JyW14+XSo+JywgJyAn
LCBjbGVhbmVkKQogICAgICAgIGNsZWFuZWQgPSByZS5zdWIocic8Lz9bYS16XStbXj5dKj4nLCAn
JywgY2xlYW5lZCkKICAgICAgICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKCcmbmJzcDsnLCAn
ICcpCiAgICAgICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgnJmFtcDsnLCAnJicpCiAgICAg
ICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgnJmx0OycsICc8JykKICAgICAgICBjbGVhbmVk
ID0gY2xlYW5lZC5yZXBsYWNlKCcmZ3Q7JywgJz4nKQogICAgICAgIGNsZWFuZWQgPSBjbGVhbmVk
LnJlcGxhY2UoJyZxdW90OycsICciJykKICAgICAgICBjbGVhbmVkID0gcmUuc3ViKHInXHMrJywg
JyAnLCBjbGVhbmVkKQogICAgICAgIGNsZWFuZWQgPSBjbGVhbmVkLnN0cmlwKCkKICAgICAgICBy
ZXR1cm4gY2xlYW5lZAogICAgCiAgICB0cnk6CiAgICAgICAgdXBkYXRlZF9jb3VudCA9IDAKICAg
ICAgICBjdXJzb3IgPSBkYi5lc3RhYmxpc2htZW50cy5maW5kKCkKICAgICAgICBhc3luYyBmb3Ig
ZXN0IGluIGN1cnNvcjoKICAgICAgICAgICAgZGVzYyA9IGVzdC5nZXQoJ2Rlc2NyaXB0aW9uJywg
JycpCiAgICAgICAgICAgIGlmIGRlc2M6CiAgICAgICAgICAgICAgICBjbGVhbmVkID0gY2xlYW5f
ZGVzY3JpcHRpb24oZGVzYykKICAgICAgICAgICAgICAgIGlmIGNsZWFuZWQgIT0gZGVzYzoKICAg
ICAgICAgICAgICAgICAgICBhd2FpdCBkYi5lc3RhYmxpc2htZW50cy51cGRhdGVfb25lKAogICAg
ICAgICAgICAgICAgICAgICAgICB7J19pZCc6IGVzdFsnX2lkJ119LAogICAgICAgICAgICAgICAg
ICAgICAgICB7JyRzZXQnOiB7J2Rlc2NyaXB0aW9uJzogY2xlYW5lZH19CiAgICAgICAgICAgICAg
ICAgICAgKQogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfY291bnQgKz0gMQogICAgICAgIAog
ICAgICAgIHJldHVybiB7InN1Y2Nlc3MiOiBUcnVlLCAidXBkYXRlZCI6IHVwZGF0ZWRfY291bnQs
ICJtZXNzYWdlIjogZiJTJ2hhbiBuZXRlamF0IHt1cGRhdGVkX2NvdW50fSBkZXNjcmlwY2lvbnMi
fQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24o
c3RhdHVzX2NvZGU9NTAwLCBkZXRhaWw9c3RyKGUpKQoKIyBSdXRlcyBhbWlnYWJsZXMgcGVyIGEg
bGVzIHDDoGdpbmVzIHdlYiBlc3TDoHRpcXVlcyAoYW1iIHByZWZpeCAvYXBpLyBwZXIgcGFzc2Fy
IHBlbCBwcm94eSkKQGFwcC5nZXQoIi9hcGkvcXVlLWVzLWVsLXRvbWIvIikKQGFwcC5nZXQoIi9h
cGkvcXVlLWVzLWVsLXRvbWIiKQphc3luYyBkZWYgc2VydmVfc29icmVfbm9zYWx0cmVzKCk6CiAg
ICAiIiJTZXJ2aXIgbGEgcMOgZ2luYSAnUXXDqCDDqXMgRWwgVG9tYj8nIiIiCiAgICBmaWxlX3Bh
dGggPSBsYW5kaW5nX3BhdGggLyAidG9tYi1wYWdpbmVzIiAvICJ0b21iLXNvYnJlLmh0bWwiCiAg
ICBpZiBmaWxlX3BhdGguZXhpc3RzKCk6CiAgICAgICAgcmV0dXJuIEZpbGVSZXNwb25zZShmaWxl
X3BhdGgsIG1lZGlhX3R5cGU9InRleHQvaHRtbCIpCiAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0
YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJQYWdlIG5vdCBmb3VuZCIpCgpAYXBwLmdldCgiL2FwaS9t
YXBhLXdlYi8iKQpAYXBwLmdldCgiL2FwaS9tYXBhLXdlYiIpCmFzeW5jIGRlZiBzZXJ2ZV9tYXBh
X3BhZ2UoKToKICAgICIiIlNlcnZpciBsYSBww6BnaW5hIGRlbCBtYXBhIiIiCiAgICBmaWxlX3Bh
dGggPSBsYW5kaW5nX3BhdGggLyAidG9tYi1wYWdpbmVzIiAvICJ0b21iLW1hcGEuaHRtbCIKICAg
IGlmIGZpbGVfcGF0aC5leGlzdHMoKToKICAgICAgICByZXR1cm4gRmlsZVJlc3BvbnNlKGZpbGVf
cGF0aCwgbWVkaWFfdHlwZT0idGV4dC9odG1sIikKICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3Rh
dHVzX2NvZGU9NDA0LCBkZXRhaWw9IlBhZ2Ugbm90IGZvdW5kIikKCkBhcHAuZ2V0KCIvYXBpL2Vz
dGFibGltZW50cy13ZWIvIikKQGFwcC5nZXQoIi9hcGkvZXN0YWJsaW1lbnRzLXdlYiIpCmFzeW5j
IGRlZiBzZXJ2ZV9lc3RhYmxpbWVudHNfcGFnZSgpOgogICAgIiIiU2VydmlyIGxhIHDDoGdpbmEg
ZCdlc3RhYmxpbWVudHMiIiIKICAgIGZpbGVfcGF0aCA9IGxhbmRpbmdfcGF0aCAvICJ0b21iLXBh
Z2luZXMiIC8gInRvbWItZXN0YWJsaW1lbnRzLmh0bWwiCiAgICBpZiBmaWxlX3BhdGguZXhpc3Rz
KCk6CiAgICAgICAgcmV0dXJuIEZpbGVSZXNwb25zZShmaWxlX3BhdGgsIG1lZGlhX3R5cGU9InRl
eHQvaHRtbCIpCiAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWls
PSJQYWdlIG5vdCBmb3VuZCIpCgpAYXBwLmdldCgiL2FwaS9vZmVydGVzLXdlYi8iKQpAYXBwLmdl
dCgiL2FwaS9vZmVydGVzLXdlYiIpCmFzeW5jIGRlZiBzZXJ2ZV9vZmVydGVzX3BhZ2UoKToKICAg
ICIiIlNlcnZpciBsYSBww6BnaW5hIGQnb2ZlcnRlcyIiIgogICAgZmlsZV9wYXRoID0gbGFuZGlu
Z19wYXRoIC8gInRvbWItcGFnaW5lcyIgLyAidG9tYi1vZmVydGVzLmh0bWwiCiAgICBpZiBmaWxl
X3BhdGguZXhpc3RzKCk6CiAgICAgICAgcmV0dXJuIEZpbGVSZXNwb25zZShmaWxlX3BhdGgsIG1l
ZGlhX3R5cGU9InRleHQvaHRtbCIpCiAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2Rl
PTQwNCwgZGV0YWlsPSJQYWdlIG5vdCBmb3VuZCIpCgpAYXBwLmdldCgiL2FwaS9lc2RldmVuaW1l
bnRzLXdlYi8iKQpAYXBwLmdldCgiL2FwaS9lc2RldmVuaW1lbnRzLXdlYiIpCmFzeW5jIGRlZiBz
ZXJ2ZV9lc2RldmVuaW1lbnRzX3BhZ2UoKToKICAgICIiIlNlcnZpciBsYSBww6BnaW5hIGQnZXNk
ZXZlbmltZW50cyIiIgogICAgZmlsZV9wYXRoID0gbGFuZGluZ19wYXRoIC8gInRvbWItcGFnaW5l
cyIgLyAidG9tYi1lc2RldmVuaW1lbnRzLmh0bWwiCiAgICBpZiBmaWxlX3BhdGguZXhpc3RzKCk6
CiAgICAgICAgcmV0dXJuIEZpbGVSZXNwb25zZShmaWxlX3BhdGgsIG1lZGlhX3R5cGU9InRleHQv
aHRtbCIpCiAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJQ
YWdlIG5vdCBmb3VuZCIpCgpAYXBwLmdldCgiL2FwaS9ub3RpY2llcy13ZWIvIikKQGFwcC5nZXQo
Ii9hcGkvbm90aWNpZXMtd2ViIikKYXN5bmMgZGVmIHNlcnZlX25vdGljaWVzX3BhZ2UoKToKICAg
ICIiIlNlcnZpciBsYSBww6BnaW5hIGRlIG5vdMOtY2llcyIiIgogICAgZmlsZV9wYXRoID0gbGFu
ZGluZ19wYXRoIC8gInRvbWItcGFnaW5lcyIgLyAidG9tYi1ub3RpY2llcy5odG1sIgogICAgaWYg
ZmlsZV9wYXRoLmV4aXN0cygpOgogICAgICAgIHJldHVybiBGaWxlUmVzcG9uc2UoZmlsZV9wYXRo
LCBtZWRpYV90eXBlPSJ0ZXh0L2h0bWwiKQogICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNf
Y29kZT00MDQsIGRldGFpbD0iUGFnZSBub3QgZm91bmQiKQoKIyBNb3VudCBFeHBvIHdlYiBhcHAg
KGFmdGVyIGFsbCBBUEkgcm91dGVzKQpkaXN0X3BhdGggPSBQYXRoKF9fZmlsZV9fKS5wYXJlbnQg
LyAiZGlzdCIKaW5kZXhfcGF0aCA9IGRpc3RfcGF0aCAvICJpbmRleC5odG1sIgoKIyBWZXJpZmlj
YXIgc2kgdGVuaW0gdW4gZnJvbnRlbmQgdsOgbGlkIChhbWIgaW5kZXguaHRtbCkKaGFzX3ZhbGlk
X2Zyb250ZW5kID0gZGlzdF9wYXRoLmV4aXN0cygpIGFuZCBpbmRleF9wYXRoLmV4aXN0cygpCgpp
ZiBoYXNfdmFsaWRfZnJvbnRlbmQ6CiAgICBsb2dnZXIuaW5mbyhmIk1vdW50aW5nIEV4cG8gd2Vi
IGFwcCBmcm9tIHtkaXN0X3BhdGh9IikKICAgIAogICAgIyBNdW50YXIgYXNzZXRzIG5vbcOpcyBz
aSBleGlzdGVpeAogICAgYXNzZXRzX3BhdGggPSBkaXN0X3BhdGggLyAiYXNzZXRzIgogICAgaWYg
YXNzZXRzX3BhdGguZXhpc3RzKCk6CiAgICAgICAgYXBwLm1vdW50KCIvYXNzZXRzIiwgU3RhdGlj
RmlsZXMoZGlyZWN0b3J5PXN0cihhc3NldHNfcGF0aCkpLCBuYW1lPSJhcHAtYXNzZXRzIikKICAg
ICAgICBsb2dnZXIuaW5mbyhmIk1vdW50ZWQgL2Fzc2V0cyBmcm9tIHthc3NldHNfcGF0aH0iKQog
ICAgZWxzZToKICAgICAgICBsb2dnZXIud2FybmluZyhmIkFzc2V0cyBkaXJlY3Rvcnkgbm90IGZv
dW5kIGF0IHthc3NldHNfcGF0aH0iKQogICAgCiAgICBpZiAoZGlzdF9wYXRoIC8gIl9leHBvIiku
ZXhpc3RzKCk6CiAgICAgICAgYXBwLm1vdW50KCIvX2V4cG8iLCBTdGF0aWNGaWxlcyhkaXJlY3Rv
cnk9c3RyKGRpc3RfcGF0aCAvICJfZXhwbyIpKSwgbmFtZT0iZXhwby1hc3NldHMiKQogICAgCiAg
ICAjIE1pZGRsZXdhcmUgcGVyIHNlcnZpciBTUEEgLSBjYXB0dXJhIHRvdGVzIGxlcyBydXRlcyBx
dWUgbm8gc8OzbiBBUEkKICAgIGZyb20gc3RhcmxldHRlLm1pZGRsZXdhcmUuYmFzZSBpbXBvcnQg
QmFzZUhUVFBNaWRkbGV3YXJlCiAgICBmcm9tIGZhc3RhcGkucmVzcG9uc2VzIGltcG9ydCBGaWxl
UmVzcG9uc2UKICAgIAogICAgY2xhc3MgU1BBTWlkZGxld2FyZShCYXNlSFRUUE1pZGRsZXdhcmUp
OgogICAgICAgIGFzeW5jIGRlZiBkaXNwYXRjaChzZWxmLCByZXF1ZXN0LCBjYWxsX25leHQpOgog
ICAgICAgICAgICAjIFNpIMOpcyB1bmEgcnV0YSBBUEkgbyBsYW5kaW5nLCBkZWl4YXIgcGFzc2Fy
CiAgICAgICAgICAgIGlmIHJlcXVlc3QudXJsLnBhdGguc3RhcnRzd2l0aCgiL2FwaS8iKSBvciBy
ZXF1ZXN0LnVybC5wYXRoLnN0YXJ0c3dpdGgoIi9sYW5kaW5nLyIpOgogICAgICAgICAgICAgICAg
cmV0dXJuIGF3YWl0IGNhbGxfbmV4dChyZXF1ZXN0KQogICAgICAgICAgICAKICAgICAgICAgICAg
IyBTaSDDqXMgdW4gZml0eGVyIGVzdMOgdGljIHF1ZSBleGlzdGVpeCwgc2VydmlyLWxvCiAgICAg
ICAgICAgIGZpbGVfcGF0aCA9IGRpc3RfcGF0aCAvIHJlcXVlc3QudXJsLnBhdGgubHN0cmlwKCIv
IikKICAgICAgICAgICAgaWYgZmlsZV9wYXRoLmlzX2ZpbGUoKToKICAgICAgICAgICAgICAgIHJl
c3BvbnNlID0gRmlsZVJlc3BvbnNlKGZpbGVfcGF0aCkKICAgICAgICAgICAgICAgICMgTm8gY2Fj
aGUgcGVyIGZpdHhlcnMgSlMvSFRNTCBwZXIgZXZpdGFyIHByb2JsZW1lcyBkZSBjYWNoZQogICAg
ICAgICAgICAgICAgaWYgZmlsZV9wYXRoLnN1ZmZpeCBpbiBbJy5qcycsICcuaHRtbCddOgogICAg
ICAgICAgICAgICAgICAgIHJlc3BvbnNlLmhlYWRlcnNbIkNhY2hlLUNvbnRyb2wiXSA9ICJuby1j
YWNoZSwgbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZSIKICAgICAgICAgICAgICAgICAgICByZXNw
b25zZS5oZWFkZXJzWyJQcmFnbWEiXSA9ICJuby1jYWNoZSIKICAgICAgICAgICAgICAgICAgICBy
ZXNwb25zZS5oZWFkZXJzWyJFeHBpcmVzIl0gPSAiMCIKICAgICAgICAgICAgICAgIHJldHVybiBy
ZXNwb25zZQogICAgICAgICAgICAKICAgICAgICAgICAgIyBQZXIgdG90ZXMgbGVzIGFsdHJlcyBy
dXRlcywgc2VydmlyIGluZGV4Lmh0bWwgKFNQQSByb3V0aW5nKQogICAgICAgICAgICBpZiBpbmRl
eF9wYXRoLmV4aXN0cygpOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBGaWxlUmVzcG9uc2Uo
aW5kZXhfcGF0aCkKICAgICAgICAgICAgICAgICMgTm8gY2FjaGUgcGVyIGluZGV4Lmh0bWwKICAg
ICAgICAgICAgICAgIHJlc3BvbnNlLmhlYWRlcnNbIkNhY2hlLUNvbnRyb2wiXSA9ICJuby1jYWNo
ZSwgbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZSIKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmhl
YWRlcnNbIlByYWdtYSJdID0gIm5vLWNhY2hlIgogICAgICAgICAgICAgICAgcmVzcG9uc2UuaGVh
ZGVyc1siRXhwaXJlcyJdID0gIjAiCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UKICAg
ICAgICAgICAgCiAgICAgICAgICAgICMgU2kgaW5kZXguaHRtbCBubyBleGlzdGVpeCwgc2VndWly
IGFtYiBlbCBwcm9jZXNzYW1lbnQgbm9ybWFsCiAgICAgICAgICAgIHJldHVybiBhd2FpdCBjYWxs
X25leHQocmVxdWVzdCkKICAgIAogICAgYXBwLmFkZF9taWRkbGV3YXJlKFNQQU1pZGRsZXdhcmUp
CiAgICBsb2dnZXIuaW5mbygiU1BBIG1pZGRsZXdhcmUgYWRkZWQiKQplbHNlOgogICAgbG9nZ2Vy
Lndhcm5pbmcoZiJkaXN0IGRpcmVjdG9yeSBvciBpbmRleC5odG1sIG5vdCBmb3VuZCBhdCB7ZGlz
dF9wYXRofSIpCgojIFNFTVBSRSBkZWZpbmlyIHVuYSBydXRhIGRlIGZhbGxiYWNrIHBlciBhIC8g
KHBlciBzaSBlbCBmcm9udGVuZCBubyBleGlzdGVpeCBvIGZhbGxhKQpmcm9tIGZhc3RhcGkucmVz
cG9uc2VzIGltcG9ydCBIVE1MUmVzcG9uc2UKCkBhcHAuZ2V0KCIvIiwgcmVzcG9uc2VfY2xhc3M9
SFRNTFJlc3BvbnNlKQphc3luYyBkZWYgcm9vdF9wYWdlKCk6CiAgICAjIFNpIHRlbmltIGZyb250
ZW5kIHbDoGxpZCwgcmVkaXJpZ2lyIGEgaW5kZXguaHRtbAogICAgaWYgaGFzX3ZhbGlkX2Zyb250
ZW5kOgogICAgICAgIHJldHVybiBGaWxlUmVzcG9uc2UoaW5kZXhfcGF0aCkKICAgICMgU2luw7Ms
IG1vc3RyYXIgcMOgZ2luYSBkZSBtYW50ZW5pbWVudAogICAgcmV0dXJuIEhUTUxSZXNwb25zZShm
IiIiCiAgICA8IURPQ1RZUEUgaHRtbD4KICAgIDxodG1sPgogICAgPGhlYWQ+CiAgICAgICAgPHRp
dGxlPlJldXNBcHA8L3RpdGxlPgogICAgICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgICAg
ICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0
aWFsLXNjYWxlPTEuMCI+CiAgICAgICAgPHN0eWxlPgogICAgICAgICAgICBib2R5IHt7IGZvbnQt
ZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiA1
MHB4OyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMmQ1MDE2IDAlLCAjNGE3
YzIzIDEwMCUpOyBjb2xvcjogd2hpdGU7IG1pbi1oZWlnaHQ6IDEwMHZoOyBtYXJnaW46IDA7IH19
CiAgICAgICAgICAgIGgxIHt7IGZvbnQtc2l6ZTogMi41ZW07IG1hcmdpbi1ib3R0b206IDIwcHg7
IH19CiAgICAgICAgICAgIHAge3sgZm9udC1zaXplOiAxLjJlbTsgbWFyZ2luOiAxMHB4IDA7IH19
CiAgICAgICAgICAgIGEge3sgY29sb3I6ICNmZmQ3MDA7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsg
fX0KICAgICAgICAgICAgYTpob3ZlciB7eyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgfX0K
ICAgICAgICAgICAgLmNvbnRhaW5lciB7eyBtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0
bzsgfX0KICAgICAgICAgICAgLmxvZ28ge3sgZm9udC1zaXplOiA0ZW07IG1hcmdpbi1ib3R0b206
IDIwcHg7IH19CiAgICAgICAgPC9zdHlsZT4KICAgIDwvaGVhZD4KICAgIDxib2R5PgogICAgICAg
IDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxvZ28iPvCf
jbc8L2Rpdj4KICAgICAgICAgICAgPGgxPkVsIFRvbWIgZGUgUmV1czwvaDE+CiAgICAgICAgICAg
IDxwPkwnYXBsaWNhY2nDsyBlc3TDoCBlbiBtb2RlIEFQSS48L3A+CiAgICAgICAgICAgIDxwPlBl
ciBhY2NlZGlyIGEgbCdhcHAgbcOyYmlsLCBkZXNjYXJyZWdhLWxhIGRlcyBkZSBsZXMgYm90aWd1
ZXMgZCdhcGxpY2FjaW9ucy48L3A+CiAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW4tdG9wOiAz
MHB4OyI+PGEgaHJlZj0iL2FwaS9oZWFsdGgiPuKckyBWZXJpZmljYXIgZXN0YXQgZGUgbCdBUEk8
L2E+PC9wPgogICAgICAgICAgICA8cD48YSBocmVmPSIvYXBpL2VzdGFibGlzaG1lbnRzIj7wn5ON
IFZldXJlIGVzdGFibGltZW50czwvYT48L3A+CiAgICAgICAgICAgIDxwPjxhIGhyZWY9Ii9hcGkv
ZXZlbnRzIj7wn5OFIFZldXJlIGVzZGV2ZW5pbWVudHM8L2E+PC9wPgogICAgICAgIDwvZGl2Pgog
ICAgPC9ib2R5PgogICAgPC9odG1sPgogICAgIiIiKQoKIyBDb25maWd1cmUgbG9nZ2luZwpsb2dn
aW5nLmJhc2ljQ29uZmlnKAogICAgbGV2ZWw9bG9nZ2luZy5JTkZPLAogICAgZm9ybWF0PSclKGFz
Y3RpbWUpcyAtICUobmFtZSlzIC0gJShsZXZlbG5hbWUpcyAtICUobWVzc2FnZSlzJwopCgpAYXBw
Lm9uX2V2ZW50KCJzdGFydHVwIikKYXN5bmMgZGVmIHN0YXJ0dXBfZXZlbnQoKToKICAgICIiIklu
aWNpYWxpdHphciBlbCBzY2hlZHVsZXIgZGUgbm90w61jaWVzIGF1dG9tw6B0aXF1ZXMiIiIKICAg
IGxvZ2dlci5pbmZvKCJJbmljaWFudCBzY2hlZHVsZXIgZGUgbm90w61jaWVzLi4uIikKICAgIHN0
YXJ0X25ld3Nfc2NoZWR1bGVyKCkKICAgIGxvZ2dlci5pbmZvKCJTY2hlZHVsZXIgZGUgbm90w61j
aWVzIGluaWNpYXQgY29ycmVjdGFtZW50IikKICAgIAogICAgIyBBZmVnaXIgQ09UVE9OSSBzaSBu
byBleGlzdGVpeAogICAgdHJ5OgogICAgICAgIGV4aXN0aW5nX2NvdHRvbmkgPSBhd2FpdCBkYi5l
c3RhYmxpc2htZW50cy5maW5kX29uZSh7Im5hbWUiOiAiQ09UVE9OSSBUb25pIENhbm8ifSkKICAg
ICAgICBpZiBub3QgZXhpc3RpbmdfY290dG9uaToKICAgICAgICAgICAgY290dG9uaV9kYXRhID0g
ewogICAgICAgICAgICAgICAgIm5hbWUiOiAiQ09UVE9OSSBUb25pIENhbm8iLAogICAgICAgICAg
ICAgICAgImFkZHJlc3MiOiAiQ2FycmVyIGRlIGxhIEdhbGVyYSwgMTkiLAogICAgICAgICAgICAg
ICAgImxhdGl0dWRlIjogNDEuMTU0ODMsCiAgICAgICAgICAgICAgICAibG9uZ2l0dWRlIjogMS4x
MDc5MCwKICAgICAgICAgICAgICAgICJzdGF0dXMiOiAiQSBTb2NpIiwKICAgICAgICAgICAgICAg
ICJjYXRlZ29yeSI6ICJNb2RhIiwKICAgICAgICAgICAgICAgICJhbHRyZXNfY2F0ZWdvcmllcyI6
ICJyb2JhIGhvbWUiLAogICAgICAgICAgICAgICAgInBob25lIjogIiIsCiAgICAgICAgICAgICAg
ICAiZW1haWwiOiAiIiwKICAgICAgICAgICAgICAgICJ2aXNpYmxlX2luX3B1YmxpY19saXN0Ijog
VHJ1ZSwKICAgICAgICAgICAgICAgICJlc3RhYmxpc2htZW50X3R5cGUiOiAibG9jYWxfYXNzb2Np
YXQiLAogICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjogIkJvdGlnYSBkZSByb2JhIHBlciBo
b21lIiwKICAgICAgICAgICAgICAgICJjcmVhdGVkX2F0IjogZGF0ZXRpbWUudXRjbm93KCksCiAg
ICAgICAgICAgICAgICAidXBkYXRlZF9hdCI6IGRhdGV0aW1lLnV0Y25vdygpCiAgICAgICAgICAg
IH0KICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgZGIuZXN0YWJsaXNobWVudHMuaW5zZXJ0X29u
ZShjb3R0b25pX2RhdGEpCiAgICAgICAgICAgIHByaW50KGYi4pyFIENPVFRPTkkgVG9uaSBDYW5v
IGFmZWdpdCBhdXRvbcOgdGljYW1lbnQgYW1iIElEOiB7cmVzdWx0Lmluc2VydGVkX2lkfSIpCiAg
ICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoIuKchSBDT1RUT05JIFRvbmkgQ2FubyBqYSBl
eGlzdGVpeCIpCiAgICAgICAgCiAgICAgICAgIyBFbGltaW5hciBDT1RUT05JIGR1cGxpY2F0cyBh
bWIgY29vcmRlbmFkZXMgaW5jb3JyZWN0ZXMKICAgICAgICBhd2FpdCBkYi5lc3RhYmxpc2htZW50
cy5kZWxldGVfbWFueSh7CiAgICAgICAgICAgICJuYW1lIjogIkNPVFRPTkkiLAogICAgICAgICAg
ICAiJG9yIjogWwogICAgICAgICAgICAgICAgeyJsYXRpdHVkZSI6IDQxLjE1NDY4NzJ9LAogICAg
ICAgICAgICAgICAgeyJsYXRpdHVkZSI6IHsiJG5lIjogNDEuMTU0ODN9fQogICAgICAgICAgICBd
CiAgICAgICAgfSkKICAgICAgICBwcmludCgi4pyFIER1cGxpY2F0cyBkZSBDT1RUT05JIGVsaW1p
bmF0cyIpCiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQo
ZiLimqDvuI8gRXJyb3IgcHJvY2Vzc2FudCBDT1RUT05JOiB7ZX0iKQoKQGFwcC5nZXQoIi9hcGkv
ZG93bmxvYWQvaG9zdGVsZXJpYS1wZGYiKQphc3luYyBkZWYgZG93bmxvYWRfaG9zdGVsZXJpYV9w
ZGYoKToKICAgICIiIkRlc2NhcnJlZ2FyIFBERiBhbWIgdG90cyBlbHMgbG9jYWxzIGQnaG9zdGVs
ZXJpYSIiIgogICAgIyBJbnRlbnRhciBwcmltZXIgZGVzIGRlIC9hcHAKICAgIHBkZl9wYXRoID0g
UGF0aCgiL2FwcC9sb2NhbHNfaG9zdGVsZXJpYS5wZGYiKQogICAgCiAgICAjIFNpIG5vIGV4aXN0
ZWl4LCBpbnRlbnRhciBkZXMgZGUgc3RhdGljCiAgICBpZiBub3QgcGRmX3BhdGguZXhpc3RzKCk6
CiAgICAgICAgcGRmX3BhdGggPSBQYXRoKF9fZmlsZV9fKS5wYXJlbnQgLyAic3RhdGljIiAvICJs
b2NhbHNfaG9zdGVsZXJpYS5wZGYiCiAgICAKICAgIGlmIG5vdCBwZGZfcGF0aC5leGlzdHMoKToK
ICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTQwNCwgZGV0YWlsPSJQREYg
bm8gdHJvYmF0LiBHZW5lcmEnbCBwcmltZXIgZXhlY3V0YW50IGVsIHNjcmlwdC4iKQogICAgCiAg
ICByZXR1cm4gRmlsZVJlc3BvbnNlKAogICAgICAgIHBhdGg9cGRmX3BhdGgsCiAgICAgICAgZmls
ZW5hbWU9Ikhvc3RlbGVyaWFfUmV1c0NvbWVyY0Z1dHVyLnBkZiIsCiAgICAgICAgbWVkaWFfdHlw
ZT0iYXBwbGljYXRpb24vcGRmIiwKICAgICAgICBoZWFkZXJzPXsKICAgICAgICAgICAgIkNvbnRl
bnQtRGlzcG9zaXRpb24iOiAiYXR0YWNobWVudDsgZmlsZW5hbWU9SG9zdGVsZXJpYV9SZXVzQ29t
ZXJjRnV0dXIucGRmIgogICAgICAgIH0KICAgICkKCkBhcHAub25fZXZlbnQoInNodXRkb3duIikK
YXN5bmMgZGVmIHNodXRkb3duX2RiX2NsaWVudCgpOgogICAgY2xpZW50LmNsb3NlKCkKCiMgRW5k
cG9pbnQgcGVyIGRlc2NhcnJlZ2FyIGVsIFpJUCBhbWIgZWwgY29kaSBhY3R1YWxpdHphdApAYXBw
LmdldCgiL2FwaS9kZXNjYXJyZWdhLWNvZGkiKQphc3luYyBkZWYgZG93bmxvYWRfY29kZV96aXAo
KToKICAgICIiIkRlc2NhcnJlZ2FyIGVsIFpJUCBhbWIgdG90IGVsIGNvZGkgYWN0dWFsaXR6YXQi
IiIKICAgIHppcF9wYXRoID0gUGF0aChfX2ZpbGVfXykucGFyZW50IC8gInN0YXRpYyIgLyAicmV1
c2FwcF9jb21wbGV0YS56aXAiCiAgICBpZiB6aXBfcGF0aC5leGlzdHMoKToKICAgICAgICByZXR1
cm4gRmlsZVJlc3BvbnNlKAogICAgICAgICAgICB6aXBfcGF0aCwKICAgICAgICAgICAgbWVkaWFf
dHlwZT0iYXBwbGljYXRpb24vemlwIiwKICAgICAgICAgICAgZmlsZW5hbWU9InJldXNhcHBfY29t
cGxldGEuemlwIgogICAgICAgICkKICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9
NDA0LCBkZXRhaWw9IlpJUCBub3QgZm91bmQiKQo=
